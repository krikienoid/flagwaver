/*!
 * FlagWaver - App
 * @author krikienoid / https://github.com/krikienoid
 */
!function(){"use strict";if(window.FLAGWAVER_APP_LOADED)throw new Error("Warning: app.js has already been executed.");window.FLAGWAVER_APP_LOADED=!0;var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=function(e){return e&&e.Math==Math&&e},n=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof e&&e)||function(){return this}()||Function("return this")(),r={},i=function(e){try{return!!e()}catch(e){return!0}},a=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),o=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),s=o,u=Function.prototype.call,l=s?u.bind(u):function(){return u.apply(u,arguments)},c={},f={}.propertyIsEnumerable,h=Object.getOwnPropertyDescriptor,d=h&&!f.call({1:2},1);c.f=d?function(e){var t=h(this,e);return!!t&&t.enumerable}:f;var p,v,m=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},g=o,y=Function.prototype,_=y.call,b=g&&y.bind.bind(_,_),x=g?b:function(e){return function(){return _.apply(e,arguments)}},w=x,S=w({}.toString),M=w("".slice),T=function(e){return M(S(e),8,-1)},E=i,A=T,R=Object,C=x("".split),k=E((function(){return!R("z").propertyIsEnumerable(0)}))?function(e){return"String"==A(e)?C(e,""):R(e)}:R,P=function(e){return null==e},L=P,O=TypeError,D=function(e){if(L(e))throw O("Can't call method on "+e);return e},N=k,I=D,U=function(e){return N(I(e))},z="object"==typeof document&&document.all,F={all:z,IS_HTMLDDA:void 0===z&&void 0!==z},B=F.all,H=F.IS_HTMLDDA?function(e){return"function"==typeof e||e===B}:function(e){return"function"==typeof e},j=H,G=F.all,V=F.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:j(e)||e===G}:function(e){return"object"==typeof e?null!==e:j(e)},W=n,q=H,X=function(e){return q(e)?e:void 0},Y=function(e,t){return arguments.length<2?X(W[e]):W[e]&&W[e][t]},Z=x({}.isPrototypeOf),K="undefined"!=typeof navigator&&String(navigator.userAgent)||"",$=n,J=K,Q=$.process,ee=$.Deno,te=Q&&Q.versions||ee&&ee.version,ne=te&&te.v8;ne&&(v=(p=ne.split("."))[0]>0&&p[0]<4?1:+(p[0]+p[1])),!v&&J&&(!(p=J.match(/Edge\/(\d+)/))||p[1]>=74)&&(p=J.match(/Chrome\/(\d+)/))&&(v=+p[1]);var re=v,ie=re,ae=i,oe=!!Object.getOwnPropertySymbols&&!ae((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ie&&ie<41})),se=oe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ue=Y,le=H,ce=Z,fe=Object,he=se?function(e){return"symbol"==typeof e}:function(e){var t=ue("Symbol");return le(t)&&ce(t.prototype,fe(e))},de=String,pe=function(e){try{return de(e)}catch(e){return"Object"}},ve=H,me=pe,ge=TypeError,ye=function(e){if(ve(e))return e;throw ge(me(e)+" is not a function")},_e=ye,be=P,xe=function(e,t){var n=e[t];return be(n)?void 0:_e(n)},we=l,Se=H,Me=V,Te=TypeError,Ee=function(e,t){var n,r;if("string"===t&&Se(n=e.toString)&&!Me(r=we(n,e)))return r;if(Se(n=e.valueOf)&&!Me(r=we(n,e)))return r;if("string"!==t&&Se(n=e.toString)&&!Me(r=we(n,e)))return r;throw Te("Can't convert object to primitive value")},Ae={},Re={get exports(){return Ae},set exports(e){Ae=e}},Ce=n,ke=Object.defineProperty,Pe=function(e,t){try{ke(Ce,e,{value:t,configurable:!0,writable:!0})}catch(n){Ce[e]=t}return t},Le=Pe,Oe="__core-js_shared__",De=n[Oe]||Le(Oe,{}),Ne=De;(Re.exports=function(e,t){return Ne[e]||(Ne[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.27.2",mode:"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.27.2/LICENSE",source:"https://github.com/zloirock/core-js"});var Ie=D,Ue=Object,ze=function(e){return Ue(Ie(e))},Fe=ze,Be=x({}.hasOwnProperty),He=Object.hasOwn||function(e,t){return Be(Fe(e),t)},je=x,Ge=0,Ve=Math.random(),We=je(1..toString),qe=function(e){return"Symbol("+(void 0===e?"":e)+")_"+We(++Ge+Ve,36)},Xe=Ae,Ye=He,Ze=qe,Ke=oe,$e=se,Je=n.Symbol,Qe=Xe("wks"),et=$e?Je.for||Je:Je&&Je.withoutSetter||Ze,tt=function(e){return Ye(Qe,e)||(Qe[e]=Ke&&Ye(Je,e)?Je[e]:et("Symbol."+e)),Qe[e]},nt=l,rt=V,it=he,at=xe,ot=Ee,st=TypeError,ut=tt("toPrimitive"),lt=function(e,t){if(!rt(e)||it(e))return e;var n,r=at(e,ut);if(r){if(void 0===t&&(t="default"),n=nt(r,e,t),!rt(n)||it(n))return n;throw st("Can't convert object to primitive value")}return void 0===t&&(t="number"),ot(e,t)},ct=lt,ft=he,ht=function(e){var t=ct(e,"string");return ft(t)?t:t+""},dt=V,pt=n.document,vt=dt(pt)&&dt(pt.createElement),mt=function(e){return vt?pt.createElement(e):{}},gt=mt,yt=!a&&!i((function(){return 7!=Object.defineProperty(gt("div"),"a",{get:function(){return 7}}).a})),_t=a,bt=l,xt=c,wt=m,St=U,Mt=ht,Tt=He,Et=yt,At=Object.getOwnPropertyDescriptor;r.f=_t?At:function(e,t){if(e=St(e),t=Mt(t),Et)try{return At(e,t)}catch(e){}if(Tt(e,t))return wt(!bt(xt.f,e,t),e[t])};var Rt={},Ct=a&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),kt=V,Pt=String,Lt=TypeError,Ot=function(e){if(kt(e))return e;throw Lt(Pt(e)+" is not an object")},Dt=a,Nt=yt,It=Ct,Ut=Ot,zt=ht,Ft=TypeError,Bt=Object.defineProperty,Ht=Object.getOwnPropertyDescriptor,jt="enumerable",Gt="configurable",Vt="writable";Rt.f=Dt?It?function(e,t,n){if(Ut(e),t=zt(t),Ut(n),"function"==typeof e&&"prototype"===t&&"value"in n&&Vt in n&&!n[Vt]){var r=Ht(e,t);r&&r[Vt]&&(e[t]=n.value,n={configurable:Gt in n?n[Gt]:r[Gt],enumerable:jt in n?n[jt]:r[jt],writable:!1})}return Bt(e,t,n)}:Bt:function(e,t,n){if(Ut(e),t=zt(t),Ut(n),Nt)try{return Bt(e,t,n)}catch(e){}if("get"in n||"set"in n)throw Ft("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Wt=Rt,qt=m,Xt=a?function(e,t,n){return Wt.f(e,t,qt(1,n))}:function(e,t,n){return e[t]=n,e},Yt={},Zt={get exports(){return Yt},set exports(e){Yt=e}},Kt=a,$t=He,Jt=Function.prototype,Qt=Kt&&Object.getOwnPropertyDescriptor,en=$t(Jt,"name"),tn={EXISTS:en,PROPER:en&&"something"===function(){}.name,CONFIGURABLE:en&&(!Kt||Kt&&Qt(Jt,"name").configurable)},nn=H,rn=De,an=x(Function.toString);nn(rn.inspectSource)||(rn.inspectSource=function(e){return an(e)});var on,sn,un,ln=rn.inspectSource,cn=H,fn=n.WeakMap,hn=cn(fn)&&/native code/.test(String(fn)),dn=qe,pn=Ae("keys"),vn=function(e){return pn[e]||(pn[e]=dn(e))},mn={},gn=hn,yn=n,_n=V,bn=Xt,xn=He,wn=De,Sn=vn,Mn=mn,Tn="Object already initialized",En=yn.TypeError,An=yn.WeakMap;if(gn||wn.state){var Rn=wn.state||(wn.state=new An);Rn.get=Rn.get,Rn.has=Rn.has,Rn.set=Rn.set,on=function(e,t){if(Rn.has(e))throw En(Tn);return t.facade=e,Rn.set(e,t),t},sn=function(e){return Rn.get(e)||{}},un=function(e){return Rn.has(e)}}else{var Cn=Sn("state");Mn[Cn]=!0,on=function(e,t){if(xn(e,Cn))throw En(Tn);return t.facade=e,bn(e,Cn,t),t},sn=function(e){return xn(e,Cn)?e[Cn]:{}},un=function(e){return xn(e,Cn)}}var kn={set:on,get:sn,has:un,enforce:function(e){return un(e)?sn(e):on(e,{})},getterFor:function(e){return function(t){var n;if(!_n(t)||(n=sn(t)).type!==e)throw En("Incompatible receiver, "+e+" required");return n}}},Pn=x,Ln=i,On=H,Dn=He,Nn=a,In=tn.CONFIGURABLE,Un=ln,zn=kn.enforce,Fn=kn.get,Bn=String,Hn=Object.defineProperty,jn=Pn("".slice),Gn=Pn("".replace),Vn=Pn([].join),Wn=Nn&&!Ln((function(){return 8!==Hn((function(){}),"length",{value:8}).length})),qn=String(String).split("String"),Xn=Zt.exports=function(e,t,n){"Symbol("===jn(Bn(t),0,7)&&(t="["+Gn(Bn(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!Dn(e,"name")||In&&e.name!==t)&&(Nn?Hn(e,"name",{value:t,configurable:!0}):e.name=t),Wn&&n&&Dn(n,"arity")&&e.length!==n.arity&&Hn(e,"length",{value:n.arity});try{n&&Dn(n,"constructor")&&n.constructor?Nn&&Hn(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=zn(e);return Dn(r,"source")||(r.source=Vn(qn,"string"==typeof t?t:"")),e};Function.prototype.toString=Xn((function(){return On(this)&&Fn(this).source||Un(this)}),"toString");var Yn=H,Zn=Rt,Kn=Yt,$n=Pe,Jn=function(e,t,n,r){r||(r={});var i=r.enumerable,a=void 0!==r.name?r.name:t;if(Yn(n)&&Kn(n,a,r),r.global)i?e[t]=n:$n(t,n);else{try{r.unsafe?e[t]&&(i=!0):delete e[t]}catch(e){}i?e[t]=n:Zn.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e},Qn={},er=Math.ceil,tr=Math.floor,nr=Math.trunc||function(e){var t=+e;return(t>0?tr:er)(t)},rr=nr,ir=function(e){var t=+e;return t!=t||0===t?0:rr(t)},ar=ir,or=Math.max,sr=Math.min,ur=function(e,t){var n=ar(e);return n<0?or(n+t,0):sr(n,t)},lr=ir,cr=Math.min,fr=function(e){return e>0?cr(lr(e),9007199254740991):0},hr=fr,dr=function(e){return hr(e.length)},pr=U,vr=ur,mr=dr,gr=function(e){return function(t,n,r){var i,a=pr(t),o=mr(a),s=vr(r,o);if(e&&n!=n){for(;o>s;)if((i=a[s++])!=i)return!0}else for(;o>s;s++)if((e||s in a)&&a[s]===n)return e||s||0;return!e&&-1}},yr={includes:gr(!0),indexOf:gr(!1)},_r=He,br=U,xr=yr.indexOf,wr=mn,Sr=x([].push),Mr=function(e,t){var n,r=br(e),i=0,a=[];for(n in r)!_r(wr,n)&&_r(r,n)&&Sr(a,n);for(;t.length>i;)_r(r,n=t[i++])&&(~xr(a,n)||Sr(a,n));return a},Tr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Er=Mr,Ar=Tr.concat("length","prototype");Qn.f=Object.getOwnPropertyNames||function(e){return Er(e,Ar)};var Rr={};Rr.f=Object.getOwnPropertySymbols;var Cr=Y,kr=Qn,Pr=Rr,Lr=Ot,Or=x([].concat),Dr=Cr("Reflect","ownKeys")||function(e){var t=kr.f(Lr(e)),n=Pr.f;return n?Or(t,n(e)):t},Nr=He,Ir=Dr,Ur=r,zr=Rt,Fr=function(e,t,n){for(var r=Ir(t),i=zr.f,a=Ur.f,o=0;o<r.length;o++){var s=r[o];Nr(e,s)||n&&Nr(n,s)||i(e,s,a(t,s))}},Br=i,Hr=H,jr=/#|\.prototype\./,Gr=function(e,t){var n=Wr[Vr(e)];return n==Xr||n!=qr&&(Hr(t)?Br(t):!!t)},Vr=Gr.normalize=function(e){return String(e).replace(jr,".").toLowerCase()},Wr=Gr.data={},qr=Gr.NATIVE="N",Xr=Gr.POLYFILL="P",Yr=Gr,Zr=n,Kr=r.f,$r=Xt,Jr=Jn,Qr=Pe,ei=Fr,ti=Yr,ni=function(e,t){var n,r,i,a,o,s=e.target,u=e.global,l=e.stat;if(n=u?Zr:l?Zr[s]||Qr(s,{}):(Zr[s]||{}).prototype)for(r in t){if(a=t[r],i=e.dontCallGetSet?(o=Kr(n,r))&&o.value:n[r],!ti(u?r:s+(l?".":"#")+r,e.forced)&&void 0!==i){if(typeof a==typeof i)continue;ei(a,i)}(e.sham||i&&i.sham)&&$r(a,"sham",!0),Jr(n,r,a,e)}},ri={};ri[tt("toStringTag")]="z";var ii="[object z]"===String(ri),ai=ii,oi=H,si=T,ui=tt("toStringTag"),li=Object,ci="Arguments"==si(function(){return arguments}()),fi=ai?si:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=li(e),ui))?n:ci?si(t):"Object"==(r=si(t))&&oi(t.callee)?"Arguments":r},hi=fi,di=String,pi=function(e){if("Symbol"===hi(e))throw TypeError("Cannot convert a Symbol value to a string");return di(e)},vi={},mi=Mr,gi=Tr,yi=Object.keys||function(e){return mi(e,gi)},_i=a,bi=Ct,xi=Rt,wi=Ot,Si=U,Mi=yi;vi.f=_i&&!bi?Object.defineProperties:function(e,t){wi(e);for(var n,r=Si(t),i=Mi(t),a=i.length,o=0;a>o;)xi.f(e,n=i[o++],r[n]);return e};var Ti,Ei=Y("document","documentElement"),Ai=Ot,Ri=vi,Ci=Tr,ki=mn,Pi=Ei,Li=mt,Oi="prototype",Di="script",Ni=vn("IE_PROTO"),Ii=function(){},Ui=function(e){return"<"+Di+">"+e+"</"+Di+">"},zi=function(e){e.write(Ui("")),e.close();var t=e.parentWindow.Object;return e=null,t},Fi=function(){try{Ti=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;Fi="undefined"!=typeof document?document.domain&&Ti?zi(Ti):(t=Li("iframe"),n="java"+Di+":",t.style.display="none",Pi.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(Ui("document.F=Object")),e.close(),e.F):zi(Ti);for(var r=Ci.length;r--;)delete Fi[Oi][Ci[r]];return Fi()};ki[Ni]=!0;var Bi=Object.create||function(e,t){var n;return null!==e?(Ii[Oi]=Ai(e),n=new Ii,Ii[Oi]=null,n[Ni]=e):n=Fi(),void 0===t?n:Ri.f(n,t)},Hi={},ji=ht,Gi=Rt,Vi=m,Wi=function(e,t,n){var r=ji(t);r in e?Gi.f(e,r,Vi(0,n)):e[r]=n},qi=ur,Xi=dr,Yi=Wi,Zi=Array,Ki=Math.max,$i=function(e,t,n){for(var r=Xi(e),i=qi(t,r),a=qi(void 0===n?r:n,r),o=Zi(Ki(a-i,0)),s=0;i<a;i++,s++)Yi(o,s,e[i]);return o.length=s,o},Ji=T,Qi=U,ea=Qn.f,ta=$i,na="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Hi.f=function(e){return na&&"Window"==Ji(e)?function(e){try{return ea(e)}catch(e){return ta(na)}}(e):ea(Qi(e))};var ra={},ia=tt;ra.f=ia;var aa=n,oa=aa,sa=He,ua=ra,la=Rt.f,ca=function(e){var t=oa.Symbol||(oa.Symbol={});sa(t,e)||la(t,e,{value:ua.f(e)})},fa=l,ha=Y,da=tt,pa=Jn,va=function(){var e=ha("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,r=da("toPrimitive");t&&!t[r]&&pa(t,r,(function(e){return fa(n,this)}),{arity:1})},ma=Rt.f,ga=He,ya=tt("toStringTag"),_a=function(e,t,n){e&&!n&&(e=e.prototype),e&&!ga(e,ya)&&ma(e,ya,{configurable:!0,value:t})},ba=T,xa=x,wa=function(e){if("Function"===ba(e))return xa(e)},Sa=ye,Ma=o,Ta=wa(wa.bind),Ea=function(e,t){return Sa(e),void 0===t?e:Ma?Ta(e,t):function(){return e.apply(t,arguments)}},Aa=T,Ra=Array.isArray||function(e){return"Array"==Aa(e)},Ca=x,ka=i,Pa=H,La=fi,Oa=ln,Da=function(){},Na=[],Ia=Y("Reflect","construct"),Ua=/^\s*(?:class|function)\b/,za=Ca(Ua.exec),Fa=!Ua.exec(Da),Ba=function(e){if(!Pa(e))return!1;try{return Ia(Da,Na,e),!0}catch(e){return!1}},Ha=function(e){if(!Pa(e))return!1;switch(La(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Fa||!!za(Ua,Oa(e))}catch(e){return!0}};Ha.sham=!0;var ja=!Ia||ka((function(){var e;return Ba(Ba.call)||!Ba(Object)||!Ba((function(){e=!0}))||e}))?Ha:Ba,Ga=Ra,Va=ja,Wa=V,qa=tt("species"),Xa=Array,Ya=function(e){var t;return Ga(e)&&(t=e.constructor,(Va(t)&&(t===Xa||Ga(t.prototype))||Wa(t)&&null===(t=t[qa]))&&(t=void 0)),void 0===t?Xa:t},Za=function(e,t){return new(Ya(e))(0===t?0:t)},Ka=Ea,$a=k,Ja=ze,Qa=dr,eo=Za,to=x([].push),no=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,a=6==e,o=7==e,s=5==e||a;return function(u,l,c,f){for(var h,d,p=Ja(u),v=$a(p),m=Ka(l,c),g=Qa(v),y=0,_=f||eo,b=t?_(u,g):n||o?_(u,0):void 0;g>y;y++)if((s||y in v)&&(d=m(h=v[y],y,p),e))if(t)b[y]=d;else if(d)switch(e){case 3:return!0;case 5:return h;case 6:return y;case 2:to(b,h)}else switch(e){case 4:return!1;case 7:to(b,h)}return a?-1:r||i?i:b}},ro={forEach:no(0),map:no(1),filter:no(2),some:no(3),every:no(4),find:no(5),findIndex:no(6),filterReject:no(7)},io=ni,ao=n,oo=l,so=x,uo=a,lo=oe,co=i,fo=He,ho=Z,po=Ot,vo=U,mo=ht,go=pi,yo=m,_o=Bi,bo=yi,xo=Qn,wo=Hi,So=Rr,Mo=r,To=Rt,Eo=vi,Ao=c,Ro=Jn,Co=Ae,ko=mn,Po=qe,Lo=tt,Oo=ra,Do=ca,No=va,Io=_a,Uo=kn,zo=ro.forEach,Fo=vn("hidden"),Bo="Symbol",Ho="prototype",jo=Uo.set,Go=Uo.getterFor(Bo),Vo=Object[Ho],Wo=ao.Symbol,qo=Wo&&Wo[Ho],Xo=ao.TypeError,Yo=ao.QObject,Zo=Mo.f,Ko=To.f,$o=wo.f,Jo=Ao.f,Qo=so([].push),es=Co("symbols"),ts=Co("op-symbols"),ns=Co("wks"),rs=!Yo||!Yo[Ho]||!Yo[Ho].findChild,is=uo&&co((function(){return 7!=_o(Ko({},"a",{get:function(){return Ko(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=Zo(Vo,t);r&&delete Vo[t],Ko(e,t,n),r&&e!==Vo&&Ko(Vo,t,r)}:Ko,as=function(e,t){var n=es[e]=_o(qo);return jo(n,{type:Bo,tag:e,description:t}),uo||(n.description=t),n},os=function(e,t,n){e===Vo&&os(ts,t,n),po(e);var r=mo(t);return po(n),fo(es,r)?(n.enumerable?(fo(e,Fo)&&e[Fo][r]&&(e[Fo][r]=!1),n=_o(n,{enumerable:yo(0,!1)})):(fo(e,Fo)||Ko(e,Fo,yo(1,{})),e[Fo][r]=!0),is(e,r,n)):Ko(e,r,n)},ss=function(e,t){po(e);var n=vo(t),r=bo(n).concat(fs(n));return zo(r,(function(t){uo&&!oo(us,n,t)||os(e,t,n[t])})),e},us=function(e){var t=mo(e),n=oo(Jo,this,t);return!(this===Vo&&fo(es,t)&&!fo(ts,t))&&(!(n||!fo(this,t)||!fo(es,t)||fo(this,Fo)&&this[Fo][t])||n)},ls=function(e,t){var n=vo(e),r=mo(t);if(n!==Vo||!fo(es,r)||fo(ts,r)){var i=Zo(n,r);return!i||!fo(es,r)||fo(n,Fo)&&n[Fo][r]||(i.enumerable=!0),i}},cs=function(e){var t=$o(vo(e)),n=[];return zo(t,(function(e){fo(es,e)||fo(ko,e)||Qo(n,e)})),n},fs=function(e){var t=e===Vo,n=$o(t?ts:vo(e)),r=[];return zo(n,(function(e){!fo(es,e)||t&&!fo(Vo,e)||Qo(r,es[e])})),r};lo||(Wo=function(){if(ho(qo,this))throw Xo("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?go(arguments[0]):void 0,t=Po(e),n=function(e){this===Vo&&oo(n,ts,e),fo(this,Fo)&&fo(this[Fo],t)&&(this[Fo][t]=!1),is(this,t,yo(1,e))};return uo&&rs&&is(Vo,t,{configurable:!0,set:n}),as(t,e)},Ro(qo=Wo[Ho],"toString",(function(){return Go(this).tag})),Ro(Wo,"withoutSetter",(function(e){return as(Po(e),e)})),Ao.f=us,To.f=os,Eo.f=ss,Mo.f=ls,xo.f=wo.f=cs,So.f=fs,Oo.f=function(e){return as(Lo(e),e)},uo&&(Ko(qo,"description",{configurable:!0,get:function(){return Go(this).description}}),Ro(Vo,"propertyIsEnumerable",us,{unsafe:!0}))),io({global:!0,constructor:!0,wrap:!0,forced:!lo,sham:!lo},{Symbol:Wo}),zo(bo(ns),(function(e){Do(e)})),io({target:Bo,stat:!0,forced:!lo},{useSetter:function(){rs=!0},useSimple:function(){rs=!1}}),io({target:"Object",stat:!0,forced:!lo,sham:!uo},{create:function(e,t){return void 0===t?_o(e):ss(_o(e),t)},defineProperty:os,defineProperties:ss,getOwnPropertyDescriptor:ls}),io({target:"Object",stat:!0,forced:!lo},{getOwnPropertyNames:cs}),No(),Io(Wo,Bo),ko[Fo]=!0;var hs=oe&&!!Symbol.for&&!!Symbol.keyFor,ds=ni,ps=Y,vs=He,ms=pi,gs=Ae,ys=hs,_s=gs("string-to-symbol-registry"),bs=gs("symbol-to-string-registry");ds({target:"Symbol",stat:!0,forced:!ys},{for:function(e){var t=ms(e);if(vs(_s,t))return _s[t];var n=ps("Symbol")(t);return _s[t]=n,bs[n]=t,n}});var xs=ni,ws=He,Ss=he,Ms=pe,Ts=hs,Es=Ae("symbol-to-string-registry");xs({target:"Symbol",stat:!0,forced:!Ts},{keyFor:function(e){if(!Ss(e))throw TypeError(Ms(e)+" is not a symbol");if(ws(Es,e))return Es[e]}});var As=o,Rs=Function.prototype,Cs=Rs.apply,ks=Rs.call,Ps="object"==typeof Reflect&&Reflect.apply||(As?ks.bind(Cs):function(){return ks.apply(Cs,arguments)}),Ls=x([].slice),Os=ni,Ds=Y,Ns=Ps,Is=l,Us=x,zs=i,Fs=Ra,Bs=H,Hs=V,js=he,Gs=Ls,Vs=oe,Ws=Ds("JSON","stringify"),qs=Us(/./.exec),Xs=Us("".charAt),Ys=Us("".charCodeAt),Zs=Us("".replace),Ks=Us(1..toString),$s=/[\uD800-\uDFFF]/g,Js=/^[\uD800-\uDBFF]$/,Qs=/^[\uDC00-\uDFFF]$/,eu=!Vs||zs((function(){var e=Ds("Symbol")();return"[null]"!=Ws([e])||"{}"!=Ws({a:e})||"{}"!=Ws(Object(e))})),tu=zs((function(){return'"\\udf06\\ud834"'!==Ws("\udf06\ud834")||'"\\udead"'!==Ws("\udead")})),nu=function(e,t){var n=Gs(arguments),r=t;if((Hs(t)||void 0!==e)&&!js(e))return Fs(t)||(t=function(e,t){if(Bs(r)&&(t=Is(r,this,e,t)),!js(t))return t}),n[1]=t,Ns(Ws,null,n)},ru=function(e,t,n){var r=Xs(n,t-1),i=Xs(n,t+1);return qs(Js,e)&&!qs(Qs,i)||qs(Qs,e)&&!qs(Js,r)?"\\u"+Ks(Ys(e,0),16):e};Ws&&Os({target:"JSON",stat:!0,arity:3,forced:eu||tu},{stringify:function(e,t,n){var r=Gs(arguments),i=Ns(eu?nu:Ws,null,r);return tu&&"string"==typeof i?Zs(i,$s,ru):i}});var iu=Rr,au=ze;ni({target:"Object",stat:!0,forced:!oe||i((function(){iu.f(1)}))},{getOwnPropertySymbols:function(e){var t=iu.f;return t?t(au(e)):[]}});var ou=ni,su=a,uu=n,lu=x,cu=He,fu=H,hu=Z,du=pi,pu=Rt.f,vu=Fr,mu=uu.Symbol,gu=mu&&mu.prototype;if(su&&fu(mu)&&(!("description"in gu)||void 0!==mu().description)){var yu={},_u=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:du(arguments[0]),t=hu(gu,this)?new mu(e):void 0===e?mu():mu(e);return""===e&&(yu[t]=!0),t};vu(_u,mu),_u.prototype=gu,gu.constructor=_u;var bu="Symbol(test)"==String(mu("test")),xu=lu(gu.valueOf),wu=lu(gu.toString),Su=/^Symbol\((.*)\)[^)]+$/,Mu=lu("".replace),Tu=lu("".slice);pu(gu,"description",{configurable:!0,get:function(){var e=xu(this);if(cu(yu,e))return"";var t=wu(e),n=bu?Tu(t,7,-1):Mu(t,Su,"$1");return""===n?void 0:n}}),ou({global:!0,constructor:!0,forced:!0},{Symbol:_u})}var Eu=fi,Au=ii?{}.toString:function(){return"[object "+Eu(this)+"]"};ii||Jn(Object.prototype,"toString",Au,{unsafe:!0}),ca("iterator");var Ru=tt,Cu=Bi,ku=Rt.f,Pu=Ru("unscopables"),Lu=Array.prototype;null==Lu[Pu]&&ku(Lu,Pu,{configurable:!0,value:Cu(null)});var Ou,Du,Nu,Iu=function(e){Lu[Pu][e]=!0},Uu={},zu=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Fu=He,Bu=H,Hu=ze,ju=zu,Gu=vn("IE_PROTO"),Vu=Object,Wu=Vu.prototype,qu=ju?Vu.getPrototypeOf:function(e){var t=Hu(e);if(Fu(t,Gu))return t[Gu];var n=t.constructor;return Bu(n)&&t instanceof n?n.prototype:t instanceof Vu?Wu:null},Xu=i,Yu=H,Zu=V,Ku=qu,$u=Jn,Ju=tt("iterator"),Qu=!1;[].keys&&("next"in(Nu=[].keys())?(Du=Ku(Ku(Nu)))!==Object.prototype&&(Ou=Du):Qu=!0);var el=!Zu(Ou)||Xu((function(){var e={};return Ou[Ju].call(e)!==e}));el&&(Ou={}),Yu(Ou[Ju])||$u(Ou,Ju,(function(){return this}));var tl={IteratorPrototype:Ou,BUGGY_SAFARI_ITERATORS:Qu},nl=tl.IteratorPrototype,rl=Bi,il=m,al=_a,ol=Uu,sl=function(){return this},ul=function(e,t,n,r){var i=t+" Iterator";return e.prototype=rl(nl,{next:il(+!r,n)}),al(e,i,!1),ol[i]=sl,e},ll=H,cl=String,fl=TypeError,hl=x,dl=Ot,pl=function(e){if("object"==typeof e||ll(e))return e;throw fl("Can't set "+cl(e)+" as a prototype")},vl=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=hl(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return dl(n),pl(r),t?e(n,r):n.__proto__=r,n}}():void 0),ml=ni,gl=l,yl=H,_l=ul,bl=qu,xl=vl,wl=_a,Sl=Xt,Ml=Jn,Tl=Uu,El=tn.PROPER,Al=tn.CONFIGURABLE,Rl=tl.IteratorPrototype,Cl=tl.BUGGY_SAFARI_ITERATORS,kl=tt("iterator"),Pl="keys",Ll="values",Ol="entries",Dl=function(){return this},Nl=function(e,t,n,r,i,a,o){_l(n,t,r);var s,u,l,c=function(e){if(e===i&&v)return v;if(!Cl&&e in d)return d[e];switch(e){case Pl:case Ll:case Ol:return function(){return new n(this,e)}}return function(){return new n(this)}},f=t+" Iterator",h=!1,d=e.prototype,p=d[kl]||d["@@iterator"]||i&&d[i],v=!Cl&&p||c(i),m="Array"==t&&d.entries||p;if(m&&(s=bl(m.call(new e)))!==Object.prototype&&s.next&&(bl(s)!==Rl&&(xl?xl(s,Rl):yl(s[kl])||Ml(s,kl,Dl)),wl(s,f,!0)),El&&i==Ll&&p&&p.name!==Ll&&(Al?Sl(d,"name",Ll):(h=!0,v=function(){return gl(p,this)})),i)if(u={values:c(Ll),keys:a?v:c(Pl),entries:c(Ol)},o)for(l in u)(Cl||h||!(l in d))&&Ml(d,l,u[l]);else ml({target:t,proto:!0,forced:Cl||h},u);return d[kl]!==v&&Ml(d,kl,v,{name:i}),Tl[t]=v,u},Il=function(e,t){return{value:e,done:t}},Ul=U,zl=Iu,Fl=Uu,Bl=kn,Hl=Rt.f,jl=Nl,Gl=Il,Vl=a,Wl="Array Iterator",ql=Bl.set,Xl=Bl.getterFor(Wl),Yl=jl(Array,"Array",(function(e,t){ql(this,{type:Wl,target:Ul(e),index:0,kind:t})}),(function(){var e=Xl(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,Gl(void 0,!0)):Gl("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)}),"values"),Zl=Fl.Arguments=Fl.Array;if(zl("keys"),zl("values"),zl("entries"),Vl&&"values"!==Zl.name)try{Hl(Zl,"name",{value:"values"})}catch(e){}var Kl=x,$l=ir,Jl=pi,Ql=D,ec=Kl("".charAt),tc=Kl("".charCodeAt),nc=Kl("".slice),rc=function(e){return function(t,n){var r,i,a=Jl(Ql(t)),o=$l(n),s=a.length;return o<0||o>=s?e?"":void 0:(r=tc(a,o))<55296||r>56319||o+1===s||(i=tc(a,o+1))<56320||i>57343?e?ec(a,o):r:e?nc(a,o,o+2):i-56320+(r-55296<<10)+65536}},ic={codeAt:rc(!1),charAt:rc(!0)},ac=ic.charAt,oc=pi,sc=kn,uc=Nl,lc=Il,cc="String Iterator",fc=sc.set,hc=sc.getterFor(cc);uc(String,"String",(function(e){fc(this,{type:cc,string:oc(e),index:0})}),(function(){var e,t=hc(this),n=t.string,r=t.index;return r>=n.length?lc(void 0,!0):(e=ac(n,r),t.index+=e.length,lc(e,!1))}));var dc={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},pc=mt("span").classList,vc=pc&&pc.constructor&&pc.constructor.prototype,mc=vc===Object.prototype?void 0:vc,gc=n,yc=dc,_c=mc,bc=Yl,xc=Xt,wc=tt,Sc=wc("iterator"),Mc=wc("toStringTag"),Tc=bc.values,Ec=function(e,t){if(e){if(e[Sc]!==Tc)try{xc(e,Sc,Tc)}catch(t){e[Sc]=Tc}if(e[Mc]||xc(e,Mc,t),yc[t])for(var n in bc)if(e[n]!==bc[n])try{xc(e,n,bc[n])}catch(t){e[n]=bc[n]}}};for(var Ac in yc)Ec(gc[Ac]&&gc[Ac].prototype,Ac);function Rc(e){return Rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rc(e)}Ec(_c,"DOMTokenList");var Cc=a,kc=tn.EXISTS,Pc=x,Lc=Rt.f,Oc=Function.prototype,Dc=Pc(Oc.toString),Nc=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,Ic=Pc(Nc.exec);Cc&&!kc&&Lc(Oc,"name",{configurable:!0,get:function(){try{return Ic(Nc,Dc(this))[1]}catch(e){return""}}});var Uc=i,zc=re,Fc=tt("species"),Bc=function(e){return zc>=51||!Uc((function(){var t=[];return(t.constructor={})[Fc]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Hc=ro.map;ni({target:"Array",proto:!0,forced:!Bc("map")},{map:function(e){return Hc(this,e,arguments.length>1?arguments[1]:void 0)}});var jc=i,Gc=function(e,t){var n=[][e];return!!n&&jc((function(){n.call(null,t||function(){return 1},1)}))},Vc=ro.forEach,Wc=Gc("forEach")?[].forEach:function(e){return Vc(this,e,arguments.length>1?arguments[1]:void 0)},qc=n,Xc=dc,Yc=mc,Zc=Wc,Kc=Xt,$c=function(e){if(e&&e.forEach!==Zc)try{Kc(e,"forEach",Zc)}catch(t){e.forEach=Zc}};for(var Jc in Xc)Xc[Jc]&&$c(qc[Jc]&&qc[Jc].prototype);$c(Yc);var Qc=a,ef=Ra,tf=TypeError,nf=Object.getOwnPropertyDescriptor,rf=Qc&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}()?function(e,t){if(ef(e)&&!nf(e,"length").writable)throw tf("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},af=TypeError,of=function(e){if(e>9007199254740991)throw af("Maximum allowed index exceeded");return e},sf=ze,uf=dr,lf=rf,cf=of;ni({target:"Array",proto:!0,arity:1,forced:i((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}()},{push:function(e){var t=sf(this),n=uf(t),r=arguments.length;cf(n+r);for(var i=0;i<r;i++)t[n]=arguments[i],n++;return lf(t,n),n}});var ff=pe,hf=TypeError,df=function(e,t){if(!delete e[t])throw hf("Cannot delete property "+ff(t)+" of "+ff(e))},pf=ni,vf=ze,mf=ur,gf=ir,yf=dr,_f=rf,bf=of,xf=Za,wf=Wi,Sf=df,Mf=Bc("splice"),Tf=Math.max,Ef=Math.min;pf({target:"Array",proto:!0,forced:!Mf},{splice:function(e,t){var n,r,i,a,o,s,u=vf(this),l=yf(u),c=mf(e,l),f=arguments.length;for(0===f?n=r=0:1===f?(n=0,r=l-c):(n=f-2,r=Ef(Tf(gf(t),0),l-c)),bf(l+n-r),i=xf(u,r),a=0;a<r;a++)(o=c+a)in u&&wf(i,a,u[o]);if(i.length=r,n<r){for(a=c;a<l-r;a++)s=a+n,(o=a+r)in u?u[s]=u[o]:Sf(u,s);for(a=l;a>l-r+n;a--)Sf(u,a-1)}else if(n>r)for(a=l-r;a>c;a--)s=a+n-1,(o=a+r-1)in u?u[s]=u[o]:Sf(u,s);for(a=0;a<n;a++)u[a+c]=arguments[a+2];return _f(u,l-r+n),i}});var Af=ni,Rf=yr.indexOf,Cf=Gc,kf=wa([].indexOf),Pf=!!kf&&1/kf([1],1,-0)<0;Af({target:"Array",proto:!0,forced:Pf||!Cf("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return Pf?kf(this,e,t)||0:Rf(this,e,t)}});var Lf={},Of={get exports(){return Lf},set exports(e){Lf=e}},Df=i((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),Nf=i,If=V,Uf=T,zf=Df,Ff=Object.isExtensible,Bf=Nf((function(){Ff(1)}))||zf?function(e){return!!If(e)&&((!zf||"ArrayBuffer"!=Uf(e))&&(!Ff||Ff(e)))}:Ff,Hf=!i((function(){return Object.isExtensible(Object.preventExtensions({}))})),jf=ni,Gf=x,Vf=mn,Wf=V,qf=He,Xf=Rt.f,Yf=Qn,Zf=Hi,Kf=Bf,$f=Hf,Jf=!1,Qf=qe("meta"),eh=0,th=function(e){Xf(e,Qf,{value:{objectID:"O"+eh++,weakData:{}}})},nh=Of.exports={enable:function(){nh.enable=function(){},Jf=!0;var e=Yf.f,t=Gf([].splice),n={};n[Qf]=1,e(n).length&&(Yf.f=function(n){for(var r=e(n),i=0,a=r.length;i<a;i++)if(r[i]===Qf){t(r,i,1);break}return r},jf({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Zf.f}))},fastKey:function(e,t){if(!Wf(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!qf(e,Qf)){if(!Kf(e))return"F";if(!t)return"E";th(e)}return e[Qf].objectID},getWeakData:function(e,t){if(!qf(e,Qf)){if(!Kf(e))return!0;if(!t)return!1;th(e)}return e[Qf].weakData},onFreeze:function(e){return $f&&Jf&&Kf(e)&&!qf(e,Qf)&&th(e),e}};Vf[Qf]=!0;var rh=Uu,ih=tt("iterator"),ah=Array.prototype,oh=function(e){return void 0!==e&&(rh.Array===e||ah[ih]===e)},sh=fi,uh=xe,lh=P,ch=Uu,fh=tt("iterator"),hh=function(e){if(!lh(e))return uh(e,fh)||uh(e,"@@iterator")||ch[sh(e)]},dh=l,ph=ye,vh=Ot,mh=pe,gh=hh,yh=TypeError,_h=function(e,t){var n=arguments.length<2?gh(e):t;if(ph(n))return vh(dh(n,e));throw yh(mh(e)+" is not iterable")},bh=l,xh=Ot,wh=xe,Sh=function(e,t,n){var r,i;xh(e);try{if(!(r=wh(e,"return"))){if("throw"===t)throw n;return n}r=bh(r,e)}catch(e){i=!0,r=e}if("throw"===t)throw n;if(i)throw r;return xh(r),n},Mh=Ea,Th=l,Eh=Ot,Ah=pe,Rh=oh,Ch=dr,kh=Z,Ph=_h,Lh=hh,Oh=Sh,Dh=TypeError,Nh=function(e,t){this.stopped=e,this.result=t},Ih=Nh.prototype,Uh=function(e,t,n){var r,i,a,o,s,u,l,c=n&&n.that,f=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_RECORD),d=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),v=Mh(t,c),m=function(e){return r&&Oh(r,"normal",e),new Nh(!0,e)},g=function(e){return f?(Eh(e),p?v(e[0],e[1],m):v(e[0],e[1])):p?v(e,m):v(e)};if(h)r=e.iterator;else if(d)r=e;else{if(!(i=Lh(e)))throw Dh(Ah(e)+" is not iterable");if(Rh(i)){for(a=0,o=Ch(e);o>a;a++)if((s=g(e[a]))&&kh(Ih,s))return s;return new Nh(!1)}r=Ph(e,i)}for(u=h?e.next:r.next;!(l=Th(u,r)).done;){try{s=g(l.value)}catch(e){Oh(r,"throw",e)}if("object"==typeof s&&s&&kh(Ih,s))return s}return new Nh(!1)},zh=Z,Fh=TypeError,Bh=function(e,t){if(zh(t,e))return e;throw Fh("Incorrect invocation")},Hh=tt("iterator"),jh=!1;try{var Gh=0,Vh={next:function(){return{done:!!Gh++}},return:function(){jh=!0}};Vh[Hh]=function(){return this},Array.from(Vh,(function(){throw 2}))}catch(e){}var Wh=function(e,t){if(!t&&!jh)return!1;var n=!1;try{var r={};r[Hh]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},qh=H,Xh=V,Yh=vl,Zh=function(e,t,n){var r,i;return Yh&&qh(r=t.constructor)&&r!==n&&Xh(i=r.prototype)&&i!==n.prototype&&Yh(e,i),e},Kh=ni,$h=n,Jh=x,Qh=Yr,ed=Jn,td=Lf,nd=Uh,rd=Bh,id=H,ad=P,od=V,sd=i,ud=Wh,ld=_a,cd=Zh,fd=function(e,t,n){var r=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),a=r?"set":"add",o=$h[e],s=o&&o.prototype,u=o,l={},c=function(e){var t=Jh(s[e]);ed(s,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!od(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return i&&!od(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!od(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(Qh(e,!id(o)||!(i||s.forEach&&!sd((function(){(new o).entries().next()})))))u=n.getConstructor(t,e,r,a),td.enable();else if(Qh(e,!0)){var f=new u,h=f[a](i?{}:-0,1)!=f,d=sd((function(){f.has(1)})),p=ud((function(e){new o(e)})),v=!i&&sd((function(){for(var e=new o,t=5;t--;)e[a](t,t);return!e.has(-0)}));p||((u=t((function(e,t){rd(e,s);var n=cd(new o,e,u);return ad(t)||nd(t,n[a],{that:n,AS_ENTRIES:r}),n}))).prototype=s,s.constructor=u),(d||v)&&(c("delete"),c("has"),r&&c("get")),(v||h)&&c(a),i&&s.clear&&delete s.clear}return l[e]=u,Kh({global:!0,constructor:!0,forced:u!=o},l),ld(u,e),i||n.setStrong(u,e,r),u},hd=Jn,dd=function(e,t,n){for(var r in t)hd(e,r,t[r],n);return e},pd=Y,vd=Rt,md=a,gd=tt("species"),yd=function(e){var t=pd(e),n=vd.f;md&&t&&!t[gd]&&n(t,gd,{configurable:!0,get:function(){return this}})},_d=Rt.f,bd=Bi,xd=dd,wd=Ea,Sd=Bh,Md=P,Td=Uh,Ed=Nl,Ad=Il,Rd=yd,Cd=a,kd=Lf.fastKey,Pd=kn.set,Ld=kn.getterFor,Od={getConstructor:function(e,t,n,r){var i=e((function(e,i){Sd(e,a),Pd(e,{type:t,index:bd(null),first:void 0,last:void 0,size:0}),Cd||(e.size=0),Md(i)||Td(i,e[r],{that:e,AS_ENTRIES:n})})),a=i.prototype,o=Ld(t),s=function(e,t,n){var r,i,a=o(e),s=u(e,t);return s?s.value=n:(a.last=s={index:i=kd(t,!0),key:t,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=s),r&&(r.next=s),Cd?a.size++:e.size++,"F"!==i&&(a.index[i]=s)),e},u=function(e,t){var n,r=o(e),i=kd(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return xd(a,{clear:function(){for(var e=o(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,Cd?e.size=0:this.size=0},delete:function(e){var t=this,n=o(t),r=u(t,e);if(r){var i=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=i),i&&(i.previous=a),n.first==r&&(n.first=i),n.last==r&&(n.last=a),Cd?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=o(this),r=wd(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!u(this,e)}}),xd(a,n?{get:function(e){var t=u(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),Cd&&_d(a,"size",{get:function(){return o(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=Ld(t),a=Ld(r);Ed(e,t,(function(e,t){Pd(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?Ad("keys"==t?n.key:"values"==t?n.value:[n.key,n.value],!1):(e.target=void 0,Ad(void 0,!0))}),n?"entries":"values",!n,!0),Rd(t)}};fd("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Od);var Dd,Nd,Id=Ot,Ud=function(){var e=Id(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},zd=i,Fd=n.RegExp,Bd=zd((function(){var e=Fd("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),Hd=Bd||zd((function(){return!Fd("a","y").sticky})),jd=Bd||zd((function(){var e=Fd("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),Gd={BROKEN_CARET:jd,MISSED_STICKY:Hd,UNSUPPORTED_Y:Bd},Vd=i,Wd=n.RegExp,qd=Vd((function(){var e=Wd(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),Xd=i,Yd=n.RegExp,Zd=Xd((function(){var e=Yd("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),Kd=l,$d=x,Jd=pi,Qd=Ud,ep=Gd,tp=Bi,np=kn.get,rp=qd,ip=Zd,ap=Ae("native-string-replace",String.prototype.replace),op=RegExp.prototype.exec,sp=op,up=$d("".charAt),lp=$d("".indexOf),cp=$d("".replace),fp=$d("".slice),hp=(Nd=/b*/g,Kd(op,Dd=/a/,"a"),Kd(op,Nd,"a"),0!==Dd.lastIndex||0!==Nd.lastIndex),dp=ep.BROKEN_CARET,pp=void 0!==/()??/.exec("")[1];(hp||pp||dp||rp||ip)&&(sp=function(e){var t,n,r,i,a,o,s,u=this,l=np(u),c=Jd(e),f=l.raw;if(f)return f.lastIndex=u.lastIndex,t=Kd(sp,f,c),u.lastIndex=f.lastIndex,t;var h=l.groups,d=dp&&u.sticky,p=Kd(Qd,u),v=u.source,m=0,g=c;if(d&&(p=cp(p,"y",""),-1===lp(p,"g")&&(p+="g"),g=fp(c,u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==up(c,u.lastIndex-1))&&(v="(?: "+v+")",g=" "+g,m++),n=new RegExp("^(?:"+v+")",p)),pp&&(n=new RegExp("^"+v+"$(?!\\s)",p)),hp&&(r=u.lastIndex),i=Kd(op,d?n:u,g),d?i?(i.input=fp(i.input,m),i[0]=fp(i[0],m),i.index=u.lastIndex,u.lastIndex+=i[0].length):u.lastIndex=0:hp&&i&&(u.lastIndex=u.global?i.index+i[0].length:r),pp&&i&&i.length>1&&Kd(ap,i[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i&&h)for(i.groups=o=tp(null),a=0;a<h.length;a++)o[(s=h[a])[0]]=i[s[1]];return i});var vp=sp;ni({target:"RegExp",proto:!0,forced:/./.exec!==vp},{exec:vp});var mp,gp,yp=ni,_p=l,bp=H,xp=Ot,wp=pi,Sp=(mp=!1,(gp=/[ac]/).exec=function(){return mp=!0,/./.exec.apply(this,arguments)},!0===gp.test("abc")&&mp),Mp=/./.test;yp({target:"RegExp",proto:!0,forced:!Sp},{test:function(e){var t=xp(this),n=wp(e),r=t.exec;if(!bp(r))return _p(Mp,t,n);var i=_p(r,t,n);return null!==i&&(xp(i),!0)}});var Tp=ni,Ep=a,Ap=Rt.f;Tp({target:"Object",stat:!0,forced:Object.defineProperty!==Ap,sham:!Ep},{defineProperty:Ap});var Rp=wa,Cp=Jn,kp=vp,Pp=i,Lp=tt,Op=Xt,Dp=Lp("species"),Np=RegExp.prototype,Ip=function(e,t,n,r){var i=Lp(e),a=!Pp((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),o=a&&!Pp((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[Dp]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return t=!0,null},n[i](""),!t}));if(!a||!o||n){var s=Rp(/./[i]),u=t(i,""[e],(function(e,t,n,r,i){var o=Rp(e),u=t.exec;return u===kp||u===Np.exec?a&&!i?{done:!0,value:s(t,n,r)}:{done:!0,value:o(n,t,r)}:{done:!1}}));Cp(String.prototype,e,u[0]),Cp(Np,i,u[1])}r&&Op(Np[i],"sham",!0)},Up=ic.charAt,zp=function(e,t,n){return t+(n?Up(e,t).length:1)},Fp=x,Bp=ze,Hp=Math.floor,jp=Fp("".charAt),Gp=Fp("".replace),Vp=Fp("".slice),Wp=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,qp=/\$([$&'`]|\d{1,2})/g,Xp=l,Yp=Ot,Zp=H,Kp=T,$p=vp,Jp=TypeError,Qp=function(e,t){var n=e.exec;if(Zp(n)){var r=Xp(n,e,t);return null!==r&&Yp(r),r}if("RegExp"===Kp(e))return Xp($p,e,t);throw Jp("RegExp#exec called on incompatible receiver")},ev=Ps,tv=l,nv=x,rv=Ip,iv=i,av=Ot,ov=H,sv=P,uv=ir,lv=fr,cv=pi,fv=D,hv=zp,dv=xe,pv=function(e,t,n,r,i,a){var o=n+e.length,s=r.length,u=qp;return void 0!==i&&(i=Bp(i),u=Wp),Gp(a,u,(function(a,u){var l;switch(jp(u,0)){case"$":return"$";case"&":return e;case"`":return Vp(t,0,n);case"'":return Vp(t,o);case"<":l=i[Vp(u,1,-1)];break;default:var c=+u;if(0===c)return a;if(c>s){var f=Hp(c/10);return 0===f?a:f<=s?void 0===r[f-1]?jp(u,1):r[f-1]+jp(u,1):a}l=r[c-1]}return void 0===l?"":l}))},vv=Qp,mv=tt("replace"),gv=Math.max,yv=Math.min,_v=nv([].concat),bv=nv([].push),xv=nv("".indexOf),wv=nv("".slice),Sv="$0"==="a".replace(/./,"$0"),Mv=!!/./[mv]&&""===/./[mv]("a","$0"),Tv=!iv((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));rv("replace",(function(e,t,n){var r=Mv?"$":"$0";return[function(e,n){var r=fv(this),i=sv(e)?void 0:dv(e,mv);return i?tv(i,e,r,n):tv(t,cv(r),e,n)},function(e,i){var a=av(this),o=cv(e);if("string"==typeof i&&-1===xv(i,r)&&-1===xv(i,"$<")){var s=n(t,a,o,i);if(s.done)return s.value}var u=ov(i);u||(i=cv(i));var l=a.global;if(l){var c=a.unicode;a.lastIndex=0}for(var f=[];;){var h=vv(a,o);if(null===h)break;if(bv(f,h),!l)break;""===cv(h[0])&&(a.lastIndex=hv(o,lv(a.lastIndex),c))}for(var d,p="",v=0,m=0;m<f.length;m++){for(var g=cv((h=f[m])[0]),y=gv(yv(uv(h.index),o.length),0),_=[],b=1;b<h.length;b++)bv(_,void 0===(d=h[b])?d:String(d));var x=h.groups;if(u){var w=_v([g],_,y,o);void 0!==x&&bv(w,x);var S=cv(ev(i,void 0,w))}else S=pv(g,o,y,_,x,i);y>=v&&(p+=wv(o,v,y)+S,v=y+g.length)}return p+wv(o,v)}]}),!Tv||!Sv||Mv);var Ev=ni,Av=Ra,Rv=ja,Cv=V,kv=ur,Pv=dr,Lv=U,Ov=Wi,Dv=tt,Nv=Ls,Iv=Bc("slice"),Uv=Dv("species"),zv=Array,Fv=Math.max;Ev({target:"Array",proto:!0,forced:!Iv},{slice:function(e,t){var n,r,i,a=Lv(this),o=Pv(a),s=kv(e,o),u=kv(void 0===t?o:t,o);if(Av(a)&&(n=a.constructor,(Rv(n)&&(n===zv||Av(n.prototype))||Cv(n)&&null===(n=n[Uv]))&&(n=void 0),n===zv||void 0===n))return Nv(a,s,u);for(r=new(void 0===n?zv:n)(Fv(u-s,0)),i=0;s<u;s++,i++)s in a&&Ov(r,i,a[s]);return r.length=i,r}});var Bv=$i,Hv=Math.floor,jv=function(e,t){var n=e.length,r=Hv(n/2);return n<8?Gv(e,t):Vv(e,jv(Bv(e,0,r),t),jv(Bv(e,r),t),t)},Gv=function(e,t){for(var n,r,i=e.length,a=1;a<i;){for(r=a,n=e[a];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==a++&&(e[r]=n)}return e},Vv=function(e,t,n,r){for(var i=t.length,a=n.length,o=0,s=0;o<i||s<a;)e[o+s]=o<i&&s<a?r(t[o],n[s])<=0?t[o++]:n[s++]:o<i?t[o++]:n[s++];return e},Wv=jv,qv=K.match(/firefox\/(\d+)/i),Xv=!!qv&&+qv[1],Yv=/MSIE|Trident/.test(K),Zv=K.match(/AppleWebKit\/(\d+)\./),Kv=!!Zv&&+Zv[1],$v=ni,Jv=x,Qv=ye,em=ze,tm=dr,nm=df,rm=pi,im=i,am=Wv,om=Gc,sm=Xv,um=Yv,lm=re,cm=Kv,fm=[],hm=Jv(fm.sort),dm=Jv(fm.push),pm=im((function(){fm.sort(void 0)})),vm=im((function(){fm.sort(null)})),mm=om("sort"),gm=!im((function(){if(lm)return lm<70;if(!(sm&&sm>3)){if(um)return!0;if(cm)return cm<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)fm.push({k:t+r,v:n})}for(fm.sort((function(e,t){return t.v-e.v})),r=0;r<fm.length;r++)t=fm[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));$v({target:"Array",proto:!0,forced:pm||!vm||!mm||!gm},{sort:function(e){void 0!==e&&Qv(e);var t=em(this);if(gm)return void 0===e?hm(t):hm(t,e);var n,r,i=[],a=tm(t);for(r=0;r<a;r++)r in t&&dm(i,t[r]);for(am(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:rm(t)>rm(n)?1:-1}}(e)),n=tm(i),r=0;r<n;)t[r]=i[r++];for(;r<a;)nm(t,r++);return t}});var ym=D,_m=pi,bm=/"/g,xm=x("".replace),wm=i,Sm=function(e,t,n,r){var i=_m(ym(e)),a="<"+t;return""!==n&&(a+=" "+n+'="'+xm(_m(r),bm,"&quot;")+'"'),a+">"+i+"</"+t+">"},Mm=function(e){return wm((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))};ni({target:"String",proto:!0,forced:Mm("sub")},{sub:function(){return Sm(this,"sub","","")}});var Tm,Em,Am,Rm,Cm="undefined"!=typeof process&&"process"==T(process),km=ja,Pm=pe,Lm=TypeError,Om=function(e){if(km(e))return e;throw Lm(Pm(e)+" is not a constructor")},Dm=Ot,Nm=Om,Im=P,Um=tt("species"),zm=function(e,t){var n,r=Dm(e).constructor;return void 0===r||Im(n=Dm(r)[Um])?t:Nm(n)},Fm=TypeError,Bm=function(e,t){if(e<t)throw Fm("Not enough arguments");return e},Hm=/(?:ipad|iphone|ipod).*applewebkit/i.test(K),jm=n,Gm=Ps,Vm=Ea,Wm=H,qm=He,Xm=i,Ym=Ei,Zm=Ls,Km=mt,$m=Bm,Jm=Hm,Qm=Cm,eg=jm.setImmediate,tg=jm.clearImmediate,ng=jm.process,rg=jm.Dispatch,ig=jm.Function,ag=jm.MessageChannel,og=jm.String,sg=0,ug={},lg="onreadystatechange";Xm((function(){Tm=jm.location}));var cg=function(e){if(qm(ug,e)){var t=ug[e];delete ug[e],t()}},fg=function(e){return function(){cg(e)}},hg=function(e){cg(e.data)},dg=function(e){jm.postMessage(og(e),Tm.protocol+"//"+Tm.host)};eg&&tg||(eg=function(e){$m(arguments.length,1);var t=Wm(e)?e:ig(e),n=Zm(arguments,1);return ug[++sg]=function(){Gm(t,void 0,n)},Em(sg),sg},tg=function(e){delete ug[e]},Qm?Em=function(e){ng.nextTick(fg(e))}:rg&&rg.now?Em=function(e){rg.now(fg(e))}:ag&&!Jm?(Rm=(Am=new ag).port2,Am.port1.onmessage=hg,Em=Vm(Rm.postMessage,Rm)):jm.addEventListener&&Wm(jm.postMessage)&&!jm.importScripts&&Tm&&"file:"!==Tm.protocol&&!Xm(dg)?(Em=dg,jm.addEventListener("message",hg,!1)):Em=lg in Km("script")?function(e){Ym.appendChild(Km("script"))[lg]=function(){Ym.removeChild(this),cg(e)}}:function(e){setTimeout(fg(e),0)});var pg={set:eg,clear:tg},vg=function(){this.head=null,this.tail=null};vg.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var mg,gg,yg,_g,bg,xg=vg,wg=/ipad|iphone|ipod/i.test(K)&&"undefined"!=typeof Pebble,Sg=/web0s(?!.*chrome)/i.test(K),Mg=n,Tg=Ea,Eg=r.f,Ag=pg.set,Rg=xg,Cg=Hm,kg=wg,Pg=Sg,Lg=Cm,Og=Mg.MutationObserver||Mg.WebKitMutationObserver,Dg=Mg.document,Ng=Mg.process,Ig=Mg.Promise,Ug=Eg(Mg,"queueMicrotask"),zg=Ug&&Ug.value;if(!zg){var Fg=new Rg,Bg=function(){var e,t;for(Lg&&(e=Ng.domain)&&e.exit();t=Fg.get();)try{t()}catch(e){throw Fg.head&&mg(),e}e&&e.enter()};Cg||Lg||Pg||!Og||!Dg?!kg&&Ig&&Ig.resolve?((_g=Ig.resolve(void 0)).constructor=Ig,bg=Tg(_g.then,_g),mg=function(){bg(Bg)}):Lg?mg=function(){Ng.nextTick(Bg)}:(Ag=Tg(Ag,Mg),mg=function(){Ag(Bg)}):(gg=!0,yg=Dg.createTextNode(""),new Og(Bg).observe(yg,{characterData:!0}),mg=function(){yg.data=gg=!gg}),zg=function(e){Fg.head||mg(),Fg.add(e)}}var Hg=zg,jg=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Gg=n.Promise,Vg="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Wg=!Vg&&!Cm&&"object"==typeof window&&"object"==typeof document,qg=n,Xg=Gg,Yg=H,Zg=Yr,Kg=ln,$g=tt,Jg=Wg,Qg=Vg,ey=re;Xg&&Xg.prototype;var ty=$g("species"),ny=!1,ry=Yg(qg.PromiseRejectionEvent),iy=Zg("Promise",(function(){var e=Kg(Xg),t=e!==String(Xg);if(!t&&66===ey)return!0;if(!ey||ey<51||!/native code/.test(e)){var n=new Xg((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[ty]=r,!(ny=n.then((function(){}))instanceof r))return!0}return!t&&(Jg||Qg)&&!ry})),ay={CONSTRUCTOR:iy,REJECTION_EVENT:ry,SUBCLASSING:ny},oy={},sy=ye,uy=TypeError,ly=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw uy("Bad Promise constructor");t=e,n=r})),this.resolve=sy(t),this.reject=sy(n)};oy.f=function(e){return new ly(e)};var cy,fy,hy,dy=ni,py=Cm,vy=n,my=l,gy=Jn,yy=vl,_y=_a,by=yd,xy=ye,wy=H,Sy=V,My=Bh,Ty=zm,Ey=pg.set,Ay=Hg,Ry=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(e){}},Cy=jg,ky=xg,Py=kn,Ly=Gg,Oy=oy,Dy="Promise",Ny=ay.CONSTRUCTOR,Iy=ay.REJECTION_EVENT,Uy=ay.SUBCLASSING,zy=Py.getterFor(Dy),Fy=Py.set,By=Ly&&Ly.prototype,Hy=Ly,jy=By,Gy=vy.TypeError,Vy=vy.document,Wy=vy.process,qy=Oy.f,Xy=qy,Yy=!!(Vy&&Vy.createEvent&&vy.dispatchEvent),Zy="unhandledrejection",Ky=function(e){var t;return!(!Sy(e)||!wy(t=e.then))&&t},$y=function(e,t){var n,r,i,a=t.value,o=1==t.state,s=o?e.ok:e.fail,u=e.resolve,l=e.reject,c=e.domain;try{s?(o||(2===t.rejection&&n_(t),t.rejection=1),!0===s?n=a:(c&&c.enter(),n=s(a),c&&(c.exit(),i=!0)),n===e.promise?l(Gy("Promise-chain cycle")):(r=Ky(n))?my(r,n,u,l):u(n)):l(a)}catch(e){c&&!i&&c.exit(),l(e)}},Jy=function(e,t){e.notified||(e.notified=!0,Ay((function(){for(var n,r=e.reactions;n=r.get();)$y(n,e);e.notified=!1,t&&!e.rejection&&e_(e)})))},Qy=function(e,t,n){var r,i;Yy?((r=Vy.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),vy.dispatchEvent(r)):r={promise:t,reason:n},!Iy&&(i=vy["on"+e])?i(r):e===Zy&&Ry("Unhandled promise rejection",n)},e_=function(e){my(Ey,vy,(function(){var t,n=e.facade,r=e.value;if(t_(e)&&(t=Cy((function(){py?Wy.emit("unhandledRejection",r,n):Qy(Zy,n,r)})),e.rejection=py||t_(e)?2:1,t.error))throw t.value}))},t_=function(e){return 1!==e.rejection&&!e.parent},n_=function(e){my(Ey,vy,(function(){var t=e.facade;py?Wy.emit("rejectionHandled",t):Qy("rejectionhandled",t,e.value)}))},r_=function(e,t,n){return function(r){e(t,r,n)}},i_=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Jy(e,!0))},a_=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Gy("Promise can't be resolved itself");var r=Ky(t);r?Ay((function(){var n={done:!1};try{my(r,t,r_(a_,n,e),r_(i_,n,e))}catch(t){i_(n,t,e)}})):(e.value=t,e.state=1,Jy(e,!1))}catch(t){i_({done:!1},t,e)}}};if(Ny&&(jy=(Hy=function(e){My(this,jy),xy(e),my(cy,this);var t=zy(this);try{e(r_(a_,t),r_(i_,t))}catch(e){i_(t,e)}}).prototype,(cy=function(e){Fy(this,{type:Dy,done:!1,notified:!1,parent:!1,reactions:new ky,rejection:!1,state:0,value:void 0})}).prototype=gy(jy,"then",(function(e,t){var n=zy(this),r=qy(Ty(this,Hy));return n.parent=!0,r.ok=!wy(e)||e,r.fail=wy(t)&&t,r.domain=py?Wy.domain:void 0,0==n.state?n.reactions.add(r):Ay((function(){$y(r,n)})),r.promise})),fy=function(){var e=new cy,t=zy(e);this.promise=e,this.resolve=r_(a_,t),this.reject=r_(i_,t)},Oy.f=qy=function(e){return e===Hy||undefined===e?new fy(e):Xy(e)},wy(Ly)&&By!==Object.prototype)){hy=By.then,Uy||gy(By,"then",(function(e,t){var n=this;return new Hy((function(e,t){my(hy,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete By.constructor}catch(e){}yy&&yy(By,jy)}dy({global:!0,constructor:!0,wrap:!0,forced:Ny},{Promise:Hy}),_y(Hy,Dy,!1),by(Dy);var o_=Gg,s_=ay.CONSTRUCTOR||!Wh((function(e){o_.all(e).then(void 0,(function(){}))})),u_=l,l_=ye,c_=oy,f_=jg,h_=Uh;ni({target:"Promise",stat:!0,forced:s_},{all:function(e){var t=this,n=c_.f(t),r=n.resolve,i=n.reject,a=f_((function(){var n=l_(t.resolve),a=[],o=0,s=1;h_(e,(function(e){var u=o++,l=!1;s++,u_(n,t,e).then((function(e){l||(l=!0,a[u]=e,--s||r(a))}),i)})),--s||r(a)}));return a.error&&i(a.value),n.promise}});var d_=ni,p_=ay.CONSTRUCTOR,v_=Gg,m_=Y,g_=H,y_=Jn,__=v_&&v_.prototype;if(d_({target:"Promise",proto:!0,forced:p_,real:!0},{catch:function(e){return this.then(void 0,e)}}),g_(v_)){var b_=m_("Promise").prototype.catch;__.catch!==b_&&y_(__,"catch",b_,{unsafe:!0})}var x_=l,w_=ye,S_=oy,M_=jg,T_=Uh;ni({target:"Promise",stat:!0,forced:s_},{race:function(e){var t=this,n=S_.f(t),r=n.reject,i=M_((function(){var i=w_(t.resolve);T_(e,(function(e){x_(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var E_=l,A_=oy;ni({target:"Promise",stat:!0,forced:ay.CONSTRUCTOR},{reject:function(e){var t=A_.f(this);return E_(t.reject,void 0,e),t.promise}});var R_=Ot,C_=V,k_=oy,P_=ni,L_=ay.CONSTRUCTOR,O_=function(e,t){if(R_(e),C_(t)&&t.constructor===e)return t;var n=k_.f(e);return(0,n.resolve)(t),n.promise};Y("Promise"),P_({target:"Promise",stat:!0,forced:L_},{resolve:function(e){return O_(this,e)}});var D_,N_,I_,U_,z_,F_,B_,H_,j_={},G_=[],V_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function W_(e,t){for(var n in t)e[n]=t[n];return e}function q_(e){var t=e.parentNode;t&&t.removeChild(e)}function X_(e,t,n){var r,i,a,o={};for(a in t)"key"==a?r=t[a]:"ref"==a?i=t[a]:o[a]=t[a];if(arguments.length>2&&(o.children=arguments.length>3?D_.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===o[a]&&(o[a]=e.defaultProps[a]);return Y_(e,o,r,i,null)}function Y_(e,t,n,r,i){var a={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++I_:i};return null==i&&null!=N_.vnode&&N_.vnode(a),a}function Z_(e){return e.children}function K_(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||V_.test(t)?n:n+"px"}function $_(e,t,n,r,i){var a;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||K_(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||K_(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])a=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?r||e.addEventListener(t,a?Q_:J_,a):e.removeEventListener(t,a?Q_:J_,a);else if("dangerouslySetInnerHTML"!==t){if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&-1==t.indexOf("-")?e.removeAttribute(t):e.setAttribute(t,n))}}function J_(e){U_=!0;try{return this.l[e.type+!1](N_.event?N_.event(e):e)}finally{U_=!1}}function Q_(e){U_=!0;try{return this.l[e.type+!0](N_.event?N_.event(e):e)}finally{U_=!1}}function eb(e,t){this.props=e,this.context=t}function tb(e,t){if(null==t)return e.__?tb(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?tb(e):null}function nb(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return nb(e)}}function rb(e){U_?setTimeout(e):B_(e)}function ib(e){(!e.__d&&(e.__d=!0)&&z_.push(e)&&!ab.__r++||F_!==N_.debounceRendering)&&((F_=N_.debounceRendering)||rb)(ab)}function ab(){var e,t,n,r,i,a,o,s;for(z_.sort((function(e,t){return e.__v.__b-t.__v.__b}));e=z_.shift();)e.__d&&(t=z_.length,r=void 0,i=void 0,o=(a=(n=e).__v).__e,(s=n.__P)&&(r=[],(i=W_({},a)).__v=a.__v+1,fb(s,a,i,n.__n,void 0!==s.ownerSVGElement,null!=a.__h?[o]:null,r,null==o?tb(a):o,a.__h),hb(r,a),a.__e!=o&&nb(a)),z_.length>t&&z_.sort((function(e,t){return e.__v.__b-t.__v.__b})));ab.__r=0}function ob(e,t,n,r,i,a,o,s,u,l){var c,f,h,d,p,v,m,g=r&&r.__k||G_,y=g.length;for(n.__k=[],c=0;c<t.length;c++)if(null!=(d=n.__k[c]=null==(d=t[c])||"boolean"==typeof d?null:"string"==typeof d||"number"==typeof d||"bigint"==typeof d?Y_(null,d,null,null,d):Array.isArray(d)?Y_(Z_,{children:d},null,null,null):d.__b>0?Y_(d.type,d.props,d.key,d.ref?d.ref:null,d.__v):d)){if(d.__=n,d.__b=n.__b+1,null===(h=g[c])||h&&d.key==h.key&&d.type===h.type)g[c]=void 0;else for(f=0;f<y;f++){if((h=g[f])&&d.key==h.key&&d.type===h.type){g[f]=void 0;break}h=null}fb(e,d,h=h||j_,i,a,o,s,u,l),p=d.__e,(f=d.ref)&&h.ref!=f&&(m||(m=[]),h.ref&&m.push(h.ref,null,d),m.push(f,d.__c||p,d)),null!=p?(null==v&&(v=p),"function"==typeof d.type&&d.__k===h.__k?d.__d=u=sb(d,u,e):u=lb(e,d,h,g,p,u),"function"==typeof n.type&&(n.__d=u)):u&&h.__e==u&&u.parentNode!=e&&(u=tb(h))}for(n.__e=v,c=y;c--;)null!=g[c]&&("function"==typeof n.type&&null!=g[c].__e&&g[c].__e==n.__d&&(n.__d=cb(r).nextSibling),vb(g[c],g[c]));if(m)for(c=0;c<m.length;c++)pb(m[c],m[++c],m[++c])}function sb(e,t,n){for(var r,i=e.__k,a=0;i&&a<i.length;a++)(r=i[a])&&(r.__=e,t="function"==typeof r.type?sb(r,t,n):lb(n,r,r,i,r.__e,t));return t}function ub(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){ub(e,t)})):t.push(e)),t}function lb(e,t,n,r,i,a){var o,s,u;if(void 0!==t.__d)o=t.__d,t.__d=void 0;else if(null==n||i!=a||null==i.parentNode)e:if(null==a||a.parentNode!==e)e.appendChild(i),o=null;else{for(s=a,u=0;(s=s.nextSibling)&&u<r.length;u+=1)if(s==i)break e;e.insertBefore(i,a),o=a}return void 0!==o?o:i.nextSibling}function cb(e){var t,n,r;if(null==e.type||"string"==typeof e.type)return e.__e;if(e.__k)for(t=e.__k.length-1;t>=0;t--)if((n=e.__k[t])&&(r=cb(n)))return r;return null}function fb(e,t,n,r,i,a,o,s,u){var l,c,f,h,d,p,v,m,g,y,_,b,x,w,S,M=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(u=n.__h,s=t.__e=n.__e,t.__h=null,a=[s]),(l=N_.__b)&&l(t);try{e:if("function"==typeof M){if(m=t.props,g=(l=M.contextType)&&r[l.__c],y=l?g?g.props.value:l.__:r,n.__c?v=(c=t.__c=n.__c).__=c.__E:("prototype"in M&&M.prototype.render?t.__c=c=new M(m,y):(t.__c=c=new eb(m,y),c.constructor=M,c.render=mb),g&&g.sub(c),c.props=m,c.state||(c.state={}),c.context=y,c.__n=r,f=c.__d=!0,c.__h=[],c._sb=[]),null==c.__s&&(c.__s=c.state),null!=M.getDerivedStateFromProps&&(c.__s==c.state&&(c.__s=W_({},c.__s)),W_(c.__s,M.getDerivedStateFromProps(m,c.__s))),h=c.props,d=c.state,c.__v=t,f)null==M.getDerivedStateFromProps&&null!=c.componentWillMount&&c.componentWillMount(),null!=c.componentDidMount&&c.__h.push(c.componentDidMount);else{if(null==M.getDerivedStateFromProps&&m!==h&&null!=c.componentWillReceiveProps&&c.componentWillReceiveProps(m,y),!c.__e&&null!=c.shouldComponentUpdate&&!1===c.shouldComponentUpdate(m,c.__s,y)||t.__v===n.__v){for(t.__v!==n.__v&&(c.props=m,c.state=c.__s,c.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),_=0;_<c._sb.length;_++)c.__h.push(c._sb[_]);c._sb=[],c.__h.length&&o.push(c);break e}null!=c.componentWillUpdate&&c.componentWillUpdate(m,c.__s,y),null!=c.componentDidUpdate&&c.__h.push((function(){c.componentDidUpdate(h,d,p)}))}if(c.context=y,c.props=m,c.__P=e,b=N_.__r,x=0,"prototype"in M&&M.prototype.render){for(c.state=c.__s,c.__d=!1,b&&b(t),l=c.render(c.props,c.state,c.context),w=0;w<c._sb.length;w++)c.__h.push(c._sb[w]);c._sb=[]}else do{c.__d=!1,b&&b(t),l=c.render(c.props,c.state,c.context),c.state=c.__s}while(c.__d&&++x<25);c.state=c.__s,null!=c.getChildContext&&(r=W_(W_({},r),c.getChildContext())),f||null==c.getSnapshotBeforeUpdate||(p=c.getSnapshotBeforeUpdate(h,d)),S=null!=l&&l.type===Z_&&null==l.key?l.props.children:l,ob(e,Array.isArray(S)?S:[S],t,n,r,i,a,o,s,u),c.base=t.__e,t.__h=null,c.__h.length&&o.push(c),v&&(c.__E=c.__=null),c.__e=!1}else null==a&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=db(n.__e,t,n,r,i,a,o,u);(l=N_.diffed)&&l(t)}catch(e){t.__v=null,(u||null!=a)&&(t.__e=s,t.__h=!!u,a[a.indexOf(s)]=null),N_.__e(e,t,n)}}function hb(e,t){N_.__c&&N_.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){N_.__e(e,t.__v)}}))}function db(e,t,n,r,i,a,o,s){var u,l,c,f=n.props,h=t.props,d=t.type,p=0;if("svg"===d&&(i=!0),null!=a)for(;p<a.length;p++)if((u=a[p])&&"setAttribute"in u==!!d&&(d?u.localName===d:3===u.nodeType)){e=u,a[p]=null;break}if(null==e){if(null===d)return document.createTextNode(h);e=i?document.createElementNS("http://www.w3.org/2000/svg",d):document.createElement(d,h.is&&h),a=null,s=!1}if(null===d)f===h||s&&e.data===h||(e.data=h);else{if(a=a&&D_.call(e.childNodes),l=(f=n.props||j_).dangerouslySetInnerHTML,c=h.dangerouslySetInnerHTML,!s){if(null!=a)for(f={},p=0;p<e.attributes.length;p++)f[e.attributes[p].name]=e.attributes[p].value;(c||l)&&(c&&(l&&c.__html==l.__html||c.__html===e.innerHTML)||(e.innerHTML=c&&c.__html||""))}if(function(e,t,n,r,i){var a;for(a in n)"children"===a||"key"===a||a in t||$_(e,a,null,n[a],r);for(a in t)i&&"function"!=typeof t[a]||"children"===a||"key"===a||"value"===a||"checked"===a||n[a]===t[a]||$_(e,a,t[a],n[a],r)}(e,h,f,i,s),c)t.__k=[];else if(p=t.props.children,ob(e,Array.isArray(p)?p:[p],t,n,r,i&&"foreignObject"!==d,a,o,a?a[0]:n.__k&&tb(n,0),s),null!=a)for(p=a.length;p--;)null!=a[p]&&q_(a[p]);s||("value"in h&&void 0!==(p=h.value)&&(p!==e.value||"progress"===d&&!p||"option"===d&&p!==f.value)&&$_(e,"value",p,f.value,!1),"checked"in h&&void 0!==(p=h.checked)&&p!==e.checked&&$_(e,"checked",p,f.checked,!1))}return e}function pb(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){N_.__e(e,n)}}function vb(e,t,n){var r,i;if(N_.unmount&&N_.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||pb(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){N_.__e(e,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&vb(r[i],t,n||"function"!=typeof e.type);n||null==e.__e||q_(e.__e),e.__=e.__e=e.__d=void 0}function mb(e,t,n){return this.constructor(e,n)}function gb(e,t,n){var r,i,a;N_.__&&N_.__(e,t),i=(r="function"==typeof n)?null:n&&n.__k||t.__k,a=[],fb(t,e=(!r&&n||t).__k=X_(Z_,null,[e]),i||j_,j_,void 0!==t.ownerSVGElement,!r&&n?[n]:i?null:t.firstChild?D_.call(t.childNodes):null,a,!r&&n?n:i?i.__e:t.firstChild,r),hb(a,e)}function yb(e,t){gb(e,t,yb)}function _b(e,t,n){var r,i,a,o=W_({},e.props);for(a in t)"key"==a?r=t[a]:"ref"==a?i=t[a]:o[a]=t[a];return arguments.length>2&&(o.children=arguments.length>3?D_.call(arguments,2):n),Y_(e.type,o,r||e.key,i||e.ref,null)}function bb(e,t){var n={__c:t="__cC"+H_++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some((function(e){e.__e=!0,ib(e)}))},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}D_=G_.slice,N_={__e:function(e,t,n,r){for(var i,a,o;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&null!=a.getDerivedStateFromError&&(i.setState(a.getDerivedStateFromError(e)),o=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,r||{}),o=i.__d),o)return i.__E=i}catch(t){e=t}throw e}},I_=0,U_=!1,eb.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=W_({},this.state),"function"==typeof e&&(e=e(W_({},n),this.props)),e&&W_(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),ib(this))},eb.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ib(this))},eb.prototype.render=Z_,z_=[],B_="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ab.__r=0,H_=0;var xb=ro.filter;ni({target:"Array",proto:!0,forced:!Bc("filter")},{filter:function(e){return xb(this,e,arguments.length>1?arguments[1]:void 0)}});var wb=ni,Sb=i,Mb=Ra,Tb=V,Eb=ze,Ab=dr,Rb=of,Cb=Wi,kb=Za,Pb=Bc,Lb=re,Ob=tt("isConcatSpreadable"),Db=Lb>=51||!Sb((function(){var e=[];return e[Ob]=!1,e.concat()[0]!==e})),Nb=function(e){if(!Tb(e))return!1;var t=e[Ob];return void 0!==t?!!t:Mb(e)};wb({target:"Array",proto:!0,arity:1,forced:!Db||!Pb("concat")},{concat:function(e){var t,n,r,i,a,o=Eb(this),s=kb(o,0),u=0;for(t=-1,r=arguments.length;t<r;t++)if(Nb(a=-1===t?o:arguments[t]))for(i=Ab(a),Rb(u+i),n=0;n<i;n++,u++)n in a&&Cb(s,u,a[n]);else Rb(u+1),Cb(s,u++,a);return s.length=u,s}});var Ib,Ub,zb,Fb,Bb=0,Hb=[],jb=[],Gb=N_.__b,Vb=N_.__r,Wb=N_.diffed,qb=N_.__c,Xb=N_.unmount;function Yb(e,t){N_.__h&&N_.__h(Ub,e,Bb||t),Bb=0;var n=Ub.__H||(Ub.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:jb}),n.__[e]}function Zb(e){return Bb=1,Kb(lx,e)}function Kb(e,t,n){var r=Yb(Ib++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):lx(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=Ub,!Ub.u)){Ub.u=!0;var i=Ub.shouldComponentUpdate;Ub.shouldComponentUpdate=function(e,t,n){if(!r.__c.__H)return!0;var a=r.__c.__H.__.filter((function(e){return e.__c}));if(a.every((function(e){return!e.__N})))return!i||i.call(this,e,t,n);var o=!1;return a.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(o=!0)}})),!(!o&&r.__c.props===e)&&(!i||i.call(this,e,t,n))}}return r.__N||r.__}function $b(e,t){var n=Yb(Ib++,3);!N_.__s&&ux(n.__H,t)&&(n.__=e,n.i=t,Ub.__H.__h.push(n))}function Jb(e,t){var n=Yb(Ib++,4);!N_.__s&&ux(n.__H,t)&&(n.__=e,n.i=t,Ub.__h.push(n))}function Qb(e){return Bb=5,ex((function(){return{current:e}}),[])}function ex(e,t){var n=Yb(Ib++,7);return ux(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function tx(e,t){return Bb=8,ex((function(){return e}),t)}function nx(e){var t=Ub.context[e.__c],n=Yb(Ib++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(Ub)),t.props.value):e.__}function rx(){for(var e;e=Hb.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ox),e.__H.__h.forEach(sx),e.__H.__h=[]}catch(t){e.__H.__h=[],N_.__e(t,e.__v)}}N_.__b=function(e){Ub=null,Gb&&Gb(e)},N_.__r=function(e){Vb&&Vb(e),Ib=0;var t=(Ub=e.__c).__H;t&&(zb===Ub?(t.__h=[],Ub.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=jb,e.__N=e.i=void 0}))):(t.__h.forEach(ox),t.__h.forEach(sx),t.__h=[])),zb=Ub},N_.diffed=function(e){Wb&&Wb(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==Hb.push(t)&&Fb===N_.requestAnimationFrame||((Fb=N_.requestAnimationFrame)||ax)(rx)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==jb&&(e.__=e.__V),e.i=void 0,e.__V=jb}))),zb=Ub=null},N_.__c=function(e,t){t.some((function(e){try{e.__h.forEach(ox),e.__h=e.__h.filter((function(e){return!e.__||sx(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],N_.__e(n,e.__v)}})),qb&&qb(e,t)},N_.unmount=function(e){Xb&&Xb(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{ox(e)}catch(e){t=e}})),n.__H=void 0,t&&N_.__e(t,n.__v))};var ix="function"==typeof requestAnimationFrame;function ax(e){var t,n=function(){clearTimeout(r),ix&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);ix&&(t=requestAnimationFrame(n))}function ox(e){var t=Ub,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),Ub=t}function sx(e){var t=Ub;e.__c=e.__(),Ub=t}function ux(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function lx(e,t){return"function"==typeof t?t(e):t}function cx(e,t){for(var n in t)e[n]=t[n];return e}function fx(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function hx(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}function dx(e){this.props=e}function px(e,t){function n(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:fx(this.props,e)}function r(t){return this.shouldComponentUpdate=n,X_(e,t)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(dx.prototype=new eb).isPureReactComponent=!0,dx.prototype.shouldComponentUpdate=function(e,t){return fx(this.props,e)||fx(this.state,t)};var vx=N_.__b;N_.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),vx&&vx(e)};var mx="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;var gx=function(e,t){return null==e?null:ub(ub(e).map(t))},yx={map:gx,forEach:gx,count:function(e){return e?ub(e).length:0},only:function(e){var t=ub(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:ub},_x=N_.__e;N_.__e=function(e,t,n,r){if(e.then)for(var i,a=t;a=a.__;)if((i=a.__c)&&i.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),i.__c(e,t);_x(e,t,n,r)};var bx=N_.unmount;function xx(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),e.__c.__H=null),null!=(e=cx({},e)).__c&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map((function(e){return xx(e,t,n)}))),e}function wx(e,t,n){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map((function(e){return wx(e,t,n)})),e.__c&&e.__c.__P===t&&(e.__e&&n.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=n)),e}function Sx(){this.__u=0,this.t=null,this.__b=null}function Mx(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Tx(){this.u=null,this.o=null}N_.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&!0===e.__h&&(e.type=null),bx&&bx(e)},(Sx.prototype=new eb).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var i=Mx(r.__v),a=!1,o=function(){a||(a=!0,n.__R=null,i?i(s):s())};n.__R=o;var s=function(){if(!--r.__u){if(r.state.__a){var e=r.state.__a;r.__v.__k[0]=wx(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__a:r.__b=null});t=r.t.pop();)t.forceUpdate()}},u=!0===t.__h;r.__u++||u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(o,o)},Sx.prototype.componentWillUnmount=function(){this.t=[]},Sx.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=xx(this.__b,n,r.__O=r.__P)}this.__b=null}var i=t.__a&&X_(Z_,null,e.fallback);return i&&(i.__h=null),[X_(Z_,null,t.__a?null:e.children),i]};var Ex=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function Ax(e){return this.getChildContext=function(){return e.context},e.children}function Rx(e){var t=this,n=e.i;t.componentWillUnmount=function(){gb(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),e.__v?(t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(e){this.childNodes.push(e),t.i.appendChild(e)},insertBefore:function(e,n){this.childNodes.push(e),t.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.i.removeChild(e)}}),gb(X_(Ax,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}(Tx.prototype=new eb).__a=function(e){var t=this,n=Mx(t.__v),r=t.o.get(e);return r[0]++,function(i){var a=function(){t.props.revealOrder?(r.push(i),Ex(t,e,r)):i()};n?n(a):a()}},Tx.prototype.render=function(e){this.u=null,this.o=new Map;var t=ub(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},Tx.prototype.componentDidUpdate=Tx.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){Ex(e,n,t)}))};var Cx="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,kx=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Px="undefined"!=typeof document,Lx=function(e){return("undefined"!=typeof Symbol&&"symbol"==Rc(Symbol())?/fil|che|rad/i:/fil|che|ra/i).test(e)};function Ox(e,t,n){return null==t.__k&&(t.textContent=""),gb(e,t),"function"==typeof n&&n(),e?e.__c:null}eb.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(eb.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var Dx=N_.event;function Nx(){}function Ix(){return this.cancelBubble}function Ux(){return this.defaultPrevented}N_.event=function(e){return Dx&&(e=Dx(e)),e.persist=Nx,e.isPropagationStopped=Ix,e.isDefaultPrevented=Ux,e.nativeEvent=e};var zx,Fx={configurable:!0,get:function(){return this.class}},Bx=N_.vnode;N_.vnode=function(e){var t=e.type,n=e.props,r=n;if("string"==typeof t){var i=-1===t.indexOf("-");for(var a in r={},n){var o=n[a];Px&&"children"===a&&"noscript"===t||"value"===a&&"defaultValue"in n&&null==o||("defaultValue"===a&&"value"in n&&null==n.value?a="value":"download"===a&&!0===o?o="":/ondoubleclick/i.test(a)?a="ondblclick":/^onchange(textarea|input)/i.test(a+t)&&!Lx(n.type)?a="oninput":/^onfocus$/i.test(a)?a="onfocusin":/^onblur$/i.test(a)?a="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(a)?a=a.toLowerCase():i&&kx.test(a)?a=a.replace(/[A-Z0-9]/g,"-$&").toLowerCase():null===o&&(o=void 0),/^oninput$/i.test(a)&&(a=a.toLowerCase(),r[a]&&(a="oninputCapture")),r[a]=o)}"select"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=ub(n.children).forEach((function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)}))),"select"==t&&null!=r.defaultValue&&(r.value=ub(n.children).forEach((function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value}))),e.props=r,n.class!=n.className&&(Fx.enumerable="className"in n,null!=n.className&&(r.class=n.className),Object.defineProperty(r,"className",Fx))}e.$$typeof=Cx,Bx&&Bx(e)};var Hx=N_.__r;N_.__r=function(e){Hx&&Hx(e),zx=e.__c};var jx={ReactCurrentDispatcher:{current:{readContext:function(e){return zx.__n[e.__c].props.value}}}};function Gx(e){return!!e&&e.$$typeof===Cx}function Vx(e){return Gx(e)?_b.apply(null,arguments):e}var Wx=function(e,t){return e(t)};function qx(e){e()}var Xx={useState:Zb,useId:function(){var e=Yb(Ib++,11);if(!e.__){for(var t=Ub.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__},useReducer:Kb,useEffect:$b,useLayoutEffect:Jb,useInsertionEffect:Jb,useTransition:function(){return[!1,qx]},useDeferredValue:function(e){return e},useSyncExternalStore:function(e,t){var n=t(),r=Zb({h:{__:n,v:t}}),i=r[0].h,a=r[1];return Jb((function(){i.__=n,i.v=t,hx(i.__,t())||a({h:i})}),[e,n,t]),$b((function(){return hx(i.__,i.v())||a({h:i}),e((function(){hx(i.__,i.v())||a({h:i})}))}),[e]),n},startTransition:qx,useRef:Qb,useImperativeHandle:function(e,t,n){Bb=6,Jb((function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0}),null==n?n:n.concat(e))},useMemo:ex,useCallback:tx,useContext:nx,useDebugValue:function(e,t){N_.useDebugValue&&N_.useDebugValue(t?t(e):e)},version:"17.0.2",Children:yx,render:Ox,hydrate:function(e,t,n){return yb(e,t),"function"==typeof n&&n(),e?e.__c:null},unmountComponentAtNode:function(e){return!!e.__k&&(gb(null,e),!0)},createPortal:function(e,t){var n=X_(Rx,{__v:e,i:t});return n.containerInfo=t,n},createElement:X_,createContext:bb,createFactory:function(e){return X_.bind(null,e)},cloneElement:Vx,createRef:function(){return{current:null}},Fragment:Z_,isValidElement:Gx,findDOMNode:function(e){return e&&(e.base||1===e.nodeType&&e)||null},Component:eb,PureComponent:dx,memo:px,forwardRef:function(e){function t(t){var n=cx({},t);return delete n.ref,e(n,t.ref||null)}return t.$$typeof=mx,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t},flushSync:function(e,t){return e(t)},unstable_batchedUpdates:Wx,StrictMode:Z_,Suspense:Sx,SuspenseList:Tx,lazy:function(e){var t,n,r;function i(i){if(t||(t=e()).then((function(e){n=e.default||e}),(function(e){r=e})),r)throw r;if(!n)throw t;return X_(n,i)}return i.displayName="Lazy",i.__f=!0,i},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:jx},Yx={},Zx={get exports(){return Yx},set exports(e){Yx=e}},Kx=Rt.f,$x=pi,Jx=function(e,t){return void 0===e?arguments.length<2?"":t:$x(e)},Qx=V,ew=Xt,tw=Error,nw=x("".replace),rw=String(tw("zxcasd").stack),iw=/\n\s*at [^:]*:[^\n]*/,aw=iw.test(rw),ow=function(e,t){if(aw&&"string"==typeof e&&!tw.prepareStackTrace)for(;t--;)e=nw(e,iw,"");return e},sw=m,uw=!i((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",sw(1,7)),7!==e.stack)})),lw=Xt,cw=ow,fw=uw,hw=Error.captureStackTrace,dw=Y,pw=He,vw=Xt,mw=Z,gw=vl,yw=Fr,_w=function(e,t,n){n in e||Kx(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})},bw=Zh,xw=Jx,ww=function(e,t){Qx(t)&&"cause"in t&&ew(e,"cause",t.cause)},Sw=function(e,t,n,r){fw&&(hw?hw(e,t):lw(e,"stack",cw(n,r)))},Mw=a,Tw=ni,Ew=Ps,Aw=function(e,t,n,r){var i="stackTraceLimit",a=r?2:1,o=e.split("."),s=o[o.length-1],u=dw.apply(null,o);if(u){var l=u.prototype;if(pw(l,"cause")&&delete l.cause,!n)return u;var c=dw("Error"),f=t((function(e,t){var n=xw(r?t:e,void 0),i=r?new u(e):new u;return void 0!==n&&vw(i,"message",n),Sw(i,f,i.stack,2),this&&mw(l,this)&&bw(i,this,f),arguments.length>a&&ww(i,arguments[a]),i}));f.prototype=l,"Error"!==s?gw?gw(f,c):yw(f,c,{name:!0}):Mw&&i in u&&(_w(f,u,i),_w(f,u,"prepareStackTrace")),yw(f,u);try{l.name!==s&&vw(l,"name",s),l.constructor=f}catch(e){}return f}},Rw="WebAssembly",Cw=n[Rw],kw=7!==Error("e",{cause:7}).cause,Pw=function(e,t){var n={};n[e]=Aw(e,t,kw),Tw({global:!0,constructor:!0,arity:1,forced:kw},n)},Lw=function(e,t){if(Cw&&Cw[e]){var n={};n[e]=Aw(Rw+"."+e,t,kw),Tw({target:Rw,stat:!0,constructor:!0,arity:1,forced:kw},n)}};Pw("Error",(function(e){return function(t){return Ew(e,this,arguments)}})),Pw("EvalError",(function(e){return function(t){return Ew(e,this,arguments)}})),Pw("RangeError",(function(e){return function(t){return Ew(e,this,arguments)}})),Pw("ReferenceError",(function(e){return function(t){return Ew(e,this,arguments)}})),Pw("SyntaxError",(function(e){return function(t){return Ew(e,this,arguments)}})),Pw("TypeError",(function(e){return function(t){return Ew(e,this,arguments)}})),Pw("URIError",(function(e){return function(t){return Ew(e,this,arguments)}})),Lw("CompileError",(function(e){return function(t){return Ew(e,this,arguments)}})),Lw("LinkError",(function(e){return function(t){return Ew(e,this,arguments)}})),Lw("RuntimeError",(function(e){return function(t){return Ew(e,this,arguments)}}));var Ow=ni,Dw=k,Nw=U,Iw=Gc,Uw=x([].join);Ow({target:"Array",proto:!0,forced:Dw!=Object||!Iw("join",",")},{join:function(e){return Uw(Nw(this),void 0===e?",":e)}});var zw=ze,Fw=yi;ni({target:"Object",stat:!0,forced:i((function(){Fw(1)}))},{keys:function(e){return Fw(zw(e))}});var Bw=V,Hw=T,jw=tt("match"),Gw=l,Vw=He,Ww=Z,qw=Ud,Xw=RegExp.prototype,Yw=Yt,Zw=Rt,Kw=function(e,t,n){return n.get&&Yw(n.get,t,{getter:!0}),n.set&&Yw(n.set,t,{setter:!0}),Zw.f(e,t,n)},$w=tn.PROPER,Jw=Jn,Qw=Ot,eS=pi,tS=i,nS=function(e){var t=e.flags;return void 0!==t||"flags"in Xw||Vw(e,"flags")||!Ww(Xw,e)?t:Gw(qw,e)},rS="toString",iS=RegExp.prototype[rS],aS=tS((function(){return"/a/b"!=iS.call({source:"a",flags:"b"})})),oS=$w&&iS.name!=rS;(aS||oS)&&Jw(RegExp.prototype,rS,(function(){var e=Qw(this);return"/"+eS(e.source)+"/"+eS(nS(e))}),{unsafe:!0});var sS=a,uS=x,lS=l,cS=i,fS=yi,hS=Rr,dS=c,pS=ze,vS=k,mS=Object.assign,gS=Object.defineProperty,yS=uS([].concat),_S=!mS||cS((function(){if(sS&&1!==mS({b:1},mS(gS({},"a",{enumerable:!0,get:function(){gS(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=mS({},e)[n]||fS(mS({},t)).join("")!=r}))?function(e,t){for(var n=pS(e),r=arguments.length,i=1,a=hS.f,o=dS.f;r>i;)for(var s,u=vS(arguments[i++]),l=a?yS(fS(u),a(u)):fS(u),c=l.length,f=0;c>f;)s=l[f++],sS&&!lS(o,u,s)||(n[s]=u[s]);return n}:mS,bS=_S;ni({target:"Object",stat:!0,arity:2,forced:Object.assign!==bS},{assign:bS});var xS,wS,SS,MS,TS=ni,ES=i,AS=Hi.f;TS({target:"Object",stat:!0,forced:ES((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:AS}),Zx.exports=function(){if(MS)return SS;MS=1;var e=wS?xS:(wS=1,xS="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");function t(){}function n(){}return n.resetWarningCache=t,SS=function(){function r(t,n,r,i,a,o){if(o!==e){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function i(){return r}r.isRequired=r;var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a}}()();var RS=Xx.createContext(null);var CS=function(e){e()},kS=function(){return CS};var PS={notify:function(){},get:function(){return[]}};function LS(e,t){var n,r=PS;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=kS(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=PS)},getListeners:function(){return r}};return o}var OS="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?Jb:$b;function DS(e){var t=e.store,n=e.context,r=e.children,i=ex((function(){var e=LS(t);return{store:t,subscription:e}}),[t]),a=ex((function(){return t.getState()}),[t]);OS((function(){var e=i.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),a!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[i,a]);var o=n||RS;return Xx.createElement(o.Provider,{value:i},r)}function NS(){return NS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NS.apply(this,arguments)}function IS(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var US=ni,zS=i,FS=U,BS=r.f,HS=a;US({target:"Object",stat:!0,forced:!HS||zS((function(){BS(1)})),sham:!HS},{getOwnPropertyDescriptor:function(e,t){return BS(FS(e),t)}});var jS=ze,GS=qu,VS=zu;ni({target:"Object",stat:!0,forced:i((function(){GS(1)})),sham:!VS},{getPrototypeOf:function(e){return GS(jS(e))}});var WS,qS={},XS={get exports(){return qS},set exports(e){qS=e}},YS={};XS.exports=function(){if(WS)return YS;WS=1;var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,u=e?Symbol.for("react.async_mode"):60111,l=e?Symbol.for("react.concurrent_mode"):60111,c=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,d=e?Symbol.for("react.memo"):60115,p=e?Symbol.for("react.lazy"):60116,v=e?Symbol.for("react.block"):60121,m=e?Symbol.for("react.fundamental"):60117,g=e?Symbol.for("react.responder"):60118,y=e?Symbol.for("react.scope"):60119;function _(e){if("object"===Rc(e)&&null!==e){var h=e.$$typeof;switch(h){case t:switch(e=e.type){case u:case l:case r:case a:case i:case f:return e;default:switch(e=e&&e.$$typeof){case s:case c:case p:case d:case o:return e;default:return h}}case n:return h}}}function b(e){return _(e)===l}return YS.AsyncMode=u,YS.ConcurrentMode=l,YS.ContextConsumer=s,YS.ContextProvider=o,YS.Element=t,YS.ForwardRef=c,YS.Fragment=r,YS.Lazy=p,YS.Memo=d,YS.Portal=n,YS.Profiler=a,YS.StrictMode=i,YS.Suspense=f,YS.isAsyncMode=function(e){return b(e)||_(e)===u},YS.isConcurrentMode=b,YS.isContextConsumer=function(e){return _(e)===s},YS.isContextProvider=function(e){return _(e)===o},YS.isElement=function(e){return"object"===Rc(e)&&null!==e&&e.$$typeof===t},YS.isForwardRef=function(e){return _(e)===c},YS.isFragment=function(e){return _(e)===r},YS.isLazy=function(e){return _(e)===p},YS.isMemo=function(e){return _(e)===d},YS.isPortal=function(e){return _(e)===n},YS.isProfiler=function(e){return _(e)===a},YS.isStrictMode=function(e){return _(e)===i},YS.isSuspense=function(e){return _(e)===f},YS.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===r||e===l||e===a||e===i||e===f||e===h||"object"===Rc(e)&&null!==e&&(e.$$typeof===p||e.$$typeof===d||e.$$typeof===o||e.$$typeof===s||e.$$typeof===c||e.$$typeof===m||e.$$typeof===g||e.$$typeof===y||e.$$typeof===v)},YS.typeOf=_,YS}();var ZS=qS,KS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},$S={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},JS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},QS={};function eM(e){return ZS.isMemo(e)?JS:QS[e.$$typeof]||KS}QS[ZS.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},QS[ZS.Memo]=JS;var tM=Object.defineProperty,nM=Object.getOwnPropertyNames,rM=Object.getOwnPropertySymbols,iM=Object.getOwnPropertyDescriptor,aM=Object.getPrototypeOf,oM=Object.prototype;var sM,uM=function e(t,n,r){if("string"!=typeof n){if(oM){var i=aM(n);i&&i!==oM&&e(t,i,r)}var a=nM(n);rM&&(a=a.concat(rM(n)));for(var o=eM(t),s=eM(n),u=0;u<a.length;++u){var l=a[u];if(!($S[l]||r&&r[l]||s&&s[l]||o&&o[l])){var c=iM(n,l);try{tM(t,l,c)}catch(e){}}}}return t},lM={},cM={get exports(){return lM},set exports(e){lM=e}},fM={};!function(e){e.exports=function(){if(sM)return fM;sM=1;var e=60103,t=60106,n=60107,r=60108,i=60114,a=60109,o=60110,s=60112,u=60113,l=60120,c=60115,f=60116,h=60121,d=60122,p=60117,v=60129,m=60131;if("function"==typeof Symbol&&Symbol.for){var g=Symbol.for;e=g("react.element"),t=g("react.portal"),n=g("react.fragment"),r=g("react.strict_mode"),i=g("react.profiler"),a=g("react.provider"),o=g("react.context"),s=g("react.forward_ref"),u=g("react.suspense"),l=g("react.suspense_list"),c=g("react.memo"),f=g("react.lazy"),h=g("react.block"),d=g("react.server.block"),p=g("react.fundamental"),v=g("react.debug_trace_mode"),m=g("react.legacy_hidden")}function y(h){if("object"===Rc(h)&&null!==h){var d=h.$$typeof;switch(d){case e:switch(h=h.type){case n:case i:case r:case u:case l:return h;default:switch(h=h&&h.$$typeof){case o:case s:case f:case c:case a:return h;default:return d}}case t:return d}}}var _=a,b=e,x=s,w=n,S=f,M=c,T=t,E=i,A=r,R=u;return fM.ContextConsumer=o,fM.ContextProvider=_,fM.Element=b,fM.ForwardRef=x,fM.Fragment=w,fM.Lazy=S,fM.Memo=M,fM.Portal=T,fM.Profiler=E,fM.StrictMode=A,fM.Suspense=R,fM.isAsyncMode=function(){return!1},fM.isConcurrentMode=function(){return!1},fM.isContextConsumer=function(e){return y(e)===o},fM.isContextProvider=function(e){return y(e)===a},fM.isElement=function(t){return"object"===Rc(t)&&null!==t&&t.$$typeof===e},fM.isForwardRef=function(e){return y(e)===s},fM.isFragment=function(e){return y(e)===n},fM.isLazy=function(e){return y(e)===f},fM.isMemo=function(e){return y(e)===c},fM.isPortal=function(e){return y(e)===t},fM.isProfiler=function(e){return y(e)===i},fM.isStrictMode=function(e){return y(e)===r},fM.isSuspense=function(e){return y(e)===u},fM.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===n||e===i||e===v||e===r||e===u||e===l||e===m||"object"===Rc(e)&&null!==e&&(e.$$typeof===f||e.$$typeof===c||e.$$typeof===a||e.$$typeof===o||e.$$typeof===s||e.$$typeof===p||e.$$typeof===h||e[0]===d)},fM.typeOf=y,fM}()}(cM);var hM=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],dM=["reactReduxForwardedRef"],pM=[],vM=[null,null];function mM(e,t){var n=e[1];return[t.payload,n+1]}function gM(e,t,n){OS((function(){return e.apply(void 0,t)}),n)}function yM(e,t,n,r,i,a,o){e.current=r,t.current=i,n.current=!1,a.current&&(a.current=null,o())}function _M(e,t,n,r,i,a,o,s,u,l){if(e){var c=!1,f=null,h=function(){if(!c){var e,n,h=t.getState();try{e=r(h,i.current)}catch(e){n=e,f=e}n||(f=null),e===a.current?o.current||u():(a.current=e,s.current=e,o.current=!0,l({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=h,n.trySubscribe(),h();return function(){if(c=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}}var bM=function(){return[null,0]};function xM(e,t){void 0===t&&(t={});var n=t,r=n.getDisplayName,i=void 0===r?function(e){return"ConnectAdvanced("+e+")"}:r,a=n.methodName,o=void 0===a?"connectAdvanced":a,s=n.renderCountProp,u=void 0===s?void 0:s,l=n.shouldHandleStateChanges,c=void 0===l||l,f=n.storeKey,h=void 0===f?"store":f;n.withRef;var d=n.forwardRef,p=void 0!==d&&d,v=n.context,m=void 0===v?RS:v,g=IS(n,hM),y=m;return function(t){var n=t.displayName||t.name||"Component",r=i(n),a=NS({},g,{getDisplayName:i,methodName:o,renderCountProp:u,shouldHandleStateChanges:c,storeKey:h,displayName:r,wrappedComponentName:n,WrappedComponent:t}),s=g.pure;var l=s?ex:function(e){return e()};function f(n){var r=ex((function(){var e=n.reactReduxForwardedRef,t=IS(n,dM);return[n.context,e,t]}),[n]),i=r[0],o=r[1],s=r[2],u=ex((function(){return i&&i.Consumer&&lM.isContextConsumer(Xx.createElement(i.Consumer,null))?i:y}),[i,y]),f=nx(u),h=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(f)&&Boolean(f.store);var d=h?n.store:f.store,p=ex((function(){return function(t){return e(t.dispatch,a)}(d)}),[d]),v=ex((function(){if(!c)return vM;var e=LS(d,h?null:f.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[d,h,f]),m=v[0],g=v[1],_=ex((function(){return h?f:NS({},f,{subscription:m})}),[h,f,m]),b=Kb(mM,pM,bM),x=b[0][0],w=b[1];if(x&&x.error)throw x.error;var S=Qb(),M=Qb(s),T=Qb(),E=Qb(!1),A=l((function(){return T.current&&s===M.current?T.current:p(d.getState(),s)}),[d,x,s]);gM(yM,[M,S,E,s,A,T,g]),gM(_M,[c,d,m,p,M,S,E,T,g,w],[d,m,p]);var R=ex((function(){return Xx.createElement(t,NS({},A,{ref:o}))}),[o,t,A]);return ex((function(){return c?Xx.createElement(u.Provider,{value:_},R):R}),[u,R,_])}var d=s?Xx.memo(f):f;if(d.WrappedComponent=t,d.displayName=f.displayName=r,p){var v=Xx.forwardRef((function(e,t){return Xx.createElement(d,NS({},e,{reactReduxForwardedRef:t}))}));return v.displayName=r,v.WrappedComponent=t,uM(v,t)}return uM(d,t)}}function wM(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function SM(e,t){if(wM(e,t))return!0;if("object"!==Rc(e)||null===e||"object"!==Rc(t)||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!wM(e[n[i]],t[n[i]]))return!1;return!0}function MM(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function TM(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function EM(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=TM(e);var i=r(t,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=TM(i),i=r(t,n)),i},r}}var AM=[function(e){return"function"==typeof e?EM(e):void 0},function(e){return e?void 0:MM((function(e){return{dispatch:e}}))},function(e){return e&&"object"===Rc(e)?MM((function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"==typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)})):void 0}];var RM=[function(e){return"function"==typeof e?EM(e):void 0},function(e){return e?void 0:MM((function(){return{}}))}];function CM(e,t,n){return NS({},n,e,t)}var kM=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,a=n.areMergedPropsEqual,o=!1;return function(t,n,s){var u=e(t,n,s);return o?i&&a(u,r)||(r=u):(o=!0,r=u),r}}}(e):void 0},function(e){return e?void 0:function(){return CM}}],PM=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function LM(e,t,n,r){return function(i,a){return n(e(i,a),t(r,a),a)}}function OM(e,t,n,r,i){var a,o,s,u,l,c=i.areStatesEqual,f=i.areOwnPropsEqual,h=i.areStatePropsEqual,d=!1;function p(i,d){var p,v,m=!f(d,o),g=!c(i,a,d,o);return a=i,o=d,m&&g?(s=e(a,o),t.dependsOnOwnProps&&(u=t(r,o)),l=n(s,u,o)):m?(e.dependsOnOwnProps&&(s=e(a,o)),t.dependsOnOwnProps&&(u=t(r,o)),l=n(s,u,o)):g?(p=e(a,o),v=!h(p,s),s=p,v&&(l=n(s,u,o)),l):l}return function(i,c){return d?p(i,c):(s=e(a=i,o=c),u=t(r,o),l=n(s,u,o),d=!0,l)}}function DM(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,a=IS(t,PM),o=n(e,a),s=r(e,a),u=i(e,a);return(a.pure?OM:LM)(o,s,u,e,a)}var NM=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function IM(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+Rc(e)+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function UM(e,t){return e===t}function zM(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?xM:n,i=t.mapStateToPropsFactories,a=void 0===i?RM:i,o=t.mapDispatchToPropsFactories,s=void 0===o?AM:o,u=t.mergePropsFactories,l=void 0===u?kM:u,c=t.selectorFactory,f=void 0===c?DM:c;return function(e,t,n,i){void 0===i&&(i={});var o=i,u=o.pure,c=void 0===u||u,h=o.areStatesEqual,d=void 0===h?UM:h,p=o.areOwnPropsEqual,v=void 0===p?SM:p,m=o.areStatePropsEqual,g=void 0===m?SM:m,y=o.areMergedPropsEqual,_=void 0===y?SM:y,b=IS(o,NM),x=IM(e,a,"mapStateToProps"),w=IM(t,s,"mapDispatchToProps"),S=IM(n,l,"mergeProps");return r(f,NS({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:x,initMapDispatchToProps:w,initMergeProps:S,pure:c,areStatesEqual:d,areOwnPropsEqual:v,areStatePropsEqual:g,areMergedPropsEqual:_},b))}}var FM=zM();CS=Wx;var BM=Ot,HM=Sh,jM=Ea,GM=l,VM=ze,WM=function(e,t,n,r){try{return r?t(BM(n)[0],n[1]):t(n)}catch(t){HM(e,"throw",t)}},qM=oh,XM=ja,YM=dr,ZM=Wi,KM=_h,$M=hh,JM=Array,QM=function(e){var t=VM(e),n=XM(this),r=arguments.length,i=r>1?arguments[1]:void 0,a=void 0!==i;a&&(i=jM(i,r>2?arguments[2]:void 0));var o,s,u,l,c,f,h=$M(t),d=0;if(!h||this===JM&&qM(h))for(o=YM(t),s=n?new this(o):JM(o);o>d;d++)f=a?i(t[d],d):t[d],ZM(s,d,f);else for(c=(l=KM(t,h)).next,s=n?new this:[];!(u=GM(c,l)).done;d++)f=a?WM(l,i,[u.value,d],!0):u.value,ZM(s,d,f);return s.length=d,s},eT=QM;function tT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nT(e,t){if(e){if("string"==typeof e)return tT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tT(e,t):void 0}}function rT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||nT(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}ni({target:"Array",stat:!0,forced:!Wh((function(e){Array.from(e)}))},{from:eT});var iT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},aT=Xx.createContext&&Xx.createContext(iT),oT=function(){return oT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},oT.apply(this,arguments)},sT=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function uT(e){return e&&e.map((function(e,t){return Xx.createElement(e.tag,oT({key:t},e.attr),uT(e.child))}))}function lT(e){return function(t){return Xx.createElement(cT,oT({attr:oT({},e.attr)},t),uT(e.child))}}function cT(e){var t=function(t){var n,r=e.attr,i=e.size,a=e.title,o=sT(e,["attr","size","title"]),s=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),Xx.createElement("svg",oT({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:n,style:oT(oT({color:e.color||t.color},t.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),a&&Xx.createElement("title",null,a),e.children)};return void 0!==aT?Xx.createElement(aT.Consumer,null,(function(e){return t(e)})):t(iT)}function fT(e){return lT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}}]})(e)}function hT(e){return lT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}}]})(e)}function dT(e){return lT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M8 5v14l11-7z"}}]})(e)}function pT(e){return lT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"}}]})(e)}function vT(e){return lT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 6h12v12H6z"}}]})(e)}function mT(e){return lT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M16.5 12A4.5 4.5 0 0014 7.97v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51A8.796 8.796 0 0021 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06a8.99 8.99 0 003.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"}}]})(e)}function gT(e){return lT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0014 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"}}]})(e)}function yT(e){return lT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z"}}]})(e)}function _T(e){return lT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 017.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"}}]})(e)}function bT(e){return lT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"}}]})(e)}function xT(e){return lT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"}}]})(e)}function wT(e){return lT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M7 10l5 5 5-5z"}}]})(e)}function ST(e){return lT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M7 14l5-5 5 5z"}}]})(e)}function MT(e){return lT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}}]})(e)}function TT(e){return lT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}}]})(e)}function ET(e){return lT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"}}]})(e)}function AT(e){return lT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"}}]})(e)}function RT(e){return lT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}}]})(e)}function CT(e){return lT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M12.01 5.5L10 8h4l-1.99-2.5zM18 10v4l2.5-1.99L18 10zM6 10l-2.5 2.01L6 14v-4zm8 6h-4l2.01 2.5L14 16zm7-13H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z"}}]})(e)}function kT(e){return lT({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M5 15H3v4c0 1.1.9 2 2 2h4v-2H5v-4zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2V5zm7 3c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm7-11h-4v2h4v4h2V5c0-1.1-.9-2-2-2zm0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4z"}}]})(e)}var PT=va;ca("toPrimitive"),PT();var LT=Ot,OT=Ee,DT=TypeError,NT=He,IT=Jn,UT=function(e){if(LT(this),"string"===e||"default"===e)e="string";else if("number"!==e)throw DT("Incorrect hint");return OT(this,e)},zT=tt("toPrimitive"),FT=Date.prototype;NT(FT,zT)||IT(FT,zT,UT);var BT=x(1..valueOf),HT="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",jT=D,GT=pi,VT=HT,WT=x("".replace),qT="["+VT+"]",XT=RegExp("^"+qT+qT+"*"),YT=RegExp(qT+qT+"*$"),ZT=function(e){return function(t){var n=GT(jT(t));return 1&e&&(n=WT(n,XT,"")),2&e&&(n=WT(n,YT,"")),n}},KT={start:ZT(1),end:ZT(2),trim:ZT(3)},$T=ni,JT=a,QT=n,eE=aa,tE=x,nE=Yr,rE=He,iE=Zh,aE=Z,oE=he,sE=lt,uE=i,lE=Qn.f,cE=r.f,fE=Rt.f,hE=BT,dE=KT.trim,pE="Number",vE=QT[pE];eE[pE];var mE=vE.prototype,gE=QT.TypeError,yE=tE("".slice),_E=tE("".charCodeAt),bE=function(e){var t=sE(e,"number");return"bigint"==typeof t?t:xE(t)},xE=function(e){var t,n,r,i,a,o,s,u,l=sE(e,"number");if(oE(l))throw gE("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=dE(l),43===(t=_E(l,0))||45===t){if(88===(n=_E(l,2))||120===n)return NaN}else if(48===t){switch(_E(l,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(o=(a=yE(l,2)).length,s=0;s<o;s++)if((u=_E(a,s))<48||u>i)return NaN;return parseInt(a,r)}return+l},wE=nE(pE,!vE(" 0o1")||!vE("0b1")||vE("+0x1")),SE=function(e){return aE(mE,e)&&uE((function(){hE(e)}))},ME=function(e){var t=arguments.length<1?0:vE(bE(e));return SE(this)?iE(Object(t),this,ME):t};ME.prototype=mE,wE&&(mE.constructor=ME),$T({global:!0,constructor:!0,wrap:!0,forced:wE},{Number:ME});function TE(e){var t=function(e,t){if("object"!==Rc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Rc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Rc(t)?t:String(t)}function EE(e,t,n){return(t=TE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}wE&&function(e,t){for(var n,r=JT?lE(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),i=0;r.length>i;i++)rE(t,n=r[i])&&!rE(e,n)&&fE(e,n,cE(t,n))}(eE[pE],vE);var AE=ni,RE=ro.find,CE=Iu,kE="find",PE=!0;kE in[]&&Array(1)[kE]((function(){PE=!1})),AE({target:"Array",proto:!0,forced:PE},{find:function(e){return RE(this,e,arguments.length>1?arguments[1]:void 0)}}),CE(kE);var LE=a,OE=x,DE=yi,NE=U,IE=OE(c.f),UE=OE([].push),zE=function(e){return function(t){for(var n,r=NE(t),i=DE(r),a=i.length,o=0,s=[];a>o;)n=i[o++],LE&&!IE(r,n)||UE(s,e?[n,r[n]]:r[n]);return s}},FE={entries:zE(!0),values:zE(!1)}.values;ni({target:"Object",stat:!0},{values:function(e){return FE(e)}});var BE=l,HE=Ot,jE=P,GE=fr,VE=pi,WE=D,qE=xe,XE=zp,YE=Qp;Ip("match",(function(e,t,n){return[function(t){var n=WE(this),r=jE(t)?void 0:qE(t,e);return r?BE(r,t,n):new RegExp(t)[e](VE(n))},function(e){var r=HE(this),i=VE(e),a=n(t,r,i);if(a.done)return a.value;if(!r.global)return YE(r,i);var o=r.unicode;r.lastIndex=0;for(var s,u=[],l=0;null!==(s=YE(r,i));){var c=VE(s[0]);u[l]=c,""===c&&(r.lastIndex=XE(i,GE(r.lastIndex),o)),l++}return 0===l?null:u}]}));var ZE=ye,KE=ze,$E=k,JE=dr,QE=TypeError,eA=function(e){return function(t,n,r,i){ZE(n);var a=KE(t),o=$E(a),s=JE(a),u=e?s-1:0,l=e?-1:1;if(r<2)for(;;){if(u in o){i=o[u],u+=l;break}if(u+=l,e?u<0:s<=u)throw QE("Reduce of empty array with no initial value")}for(;e?u>=0:s>u;u+=l)u in o&&(i=n(i,o[u],u,a));return i}},tA={left:eA(!1),right:eA(!0)},nA=tA.left;ni({target:"Array",proto:!0,forced:!Cm&&re>79&&re<83||!Gc("reduce")},{reduce:function(e){var t=arguments.length;return nA(this,e,t,t>1?arguments[1]:void 0)}});var rA=Dr,iA=U,aA=r,oA=Wi;ni({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){for(var t,n,r=iA(e),i=aA.f,a=rA(r),o={},s=0;a.length>s;)void 0!==(n=i(r,t=a[s++]))&&oA(o,t,n);return o}});var sA=ni,uA=a,lA=vi.f;sA({target:"Object",stat:!0,forced:Object.defineProperties!==lA,sham:!uA},{defineProperties:lA});var cA=1/60,fA=.12,hA=1.225,dA={DEXTER:"dexter",SINISTER:"sinister"},pA={TOP:"top",LEFT:"left",BOTTOM:"bottom",RIGHT:"right"},vA={VERTICAL:"vertical",HORIZONTAL:"horizontal",OUTRIGGER:"outrigger",CROSSBAR:"crossbar",GALLERY:"gallery",AUSTRALIAN:"australian"},mA={NONE:"none",TOP_RIGHT:"topright",TOP_LEFT:"topleft"};function gA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,TE(r.key),r)}}function _A(e,t,n){return t&&yA(e.prototype,t),n&&yA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var bA="149",xA={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},wA={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},SA=0,MA=1,TA=2,EA=1,AA=2,RA=3,CA=0,kA=1,PA=2,LA=0,OA=1,DA=2,NA=3,IA=4,UA=5,zA=100,FA=101,BA=102,HA=103,jA=104,GA=200,VA=201,WA=202,qA=203,XA=204,YA=205,ZA=206,KA=207,$A=208,JA=209,QA=210,eR=0,tR=1,nR=2,rR=3,iR=4,aR=5,oR=6,sR=7,uR=0,lR=1,cR=2,fR=0,hR=1,dR=2,pR=3,vR=4,mR=5,gR=301,yR=302,_R=303,bR=304,xR=306,wR=1e3,SR=1001,MR=1002,TR=1003,ER=1004,AR=1005,RR=1006,CR=1007,kR=1008,PR=1009,LR=1010,OR=1011,DR=1012,NR=1013,IR=1014,UR=1015,zR=1016,FR=1017,BR=1018,HR=1020,jR=1021,GR=1023,VR=1024,WR=1025,qR=1026,XR=1027,YR=1028,ZR=1029,KR=1030,$R=1031,JR=1033,QR=33776,eC=33777,tC=33778,nC=33779,rC=35840,iC=35841,aC=35842,oC=35843,sC=36196,uC=37492,lC=37496,cC=37808,fC=37809,hC=37810,dC=37811,pC=37812,vC=37813,mC=37814,gC=37815,yC=37816,_C=37817,bC=37818,xC=37819,wC=37820,SC=37821,MC=36492,TC=36283,EC=36284,AC=36285,RC=36286,CC=3e3,kC=3001,PC=3200,LC=3201,OC=0,DC=1,NC="srgb",IC="srgb-linear",UC=7680,zC=519,FC=35044,BC=35040,HC="300 es",jC=1035,GC=n,VC=_a;ni({global:!0},{Reflect:{}}),VC(GC.Reflect,"Reflect",!0);var WC=x,qC=ye,XC=V,YC=He,ZC=Ls,KC=o,$C=Function,JC=WC([].concat),QC=WC([].join),ek={},tk=function(e,t,n){if(!YC(ek,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";ek[t]=$C("C,a","return new C("+QC(r,",")+")")}return ek[t](e,n)},nk=KC?$C.bind:function(e){var t=qC(this),n=t.prototype,r=ZC(arguments,1),i=function(){var n=JC(r,ZC(arguments));return this instanceof i?tk(t,n.length,n):t.apply(e,n)};return XC(n)&&(i.prototype=n),i},rk=ni,ik=Ps,ak=nk,ok=Om,sk=Ot,uk=V,lk=Bi,ck=i,fk=Y("Reflect","construct"),hk=Object.prototype,dk=[].push,pk=ck((function(){function e(){}return!(fk((function(){}),[],e)instanceof e)})),vk=!ck((function(){fk((function(){}))})),mk=pk||vk;function gk(e,t){return gk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gk(e,t)}function yk(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gk(e,t)}function _k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bk(e,t){if(t&&("object"===Rc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _k(e)}function xk(e){return xk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xk(e)}rk({target:"Reflect",stat:!0,forced:mk,sham:mk},{construct:function(e,t){ok(e),sk(t);var n=arguments.length<3?e:ok(arguments[2]);if(vk&&!pk)return fk(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return ik(dk,r,t),new(ik(ak,e,r))}var i=n.prototype,a=lk(uk(i)?i:hk),o=ik(e,a,t);return uk(o)?o:a}}),ni({target:"Object",stat:!0},{setPrototypeOf:vl});var wk=function(){function e(){gA(this,e)}return _A(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e);e.target=null}}}}]),e}(),Sk=ir,Mk=pi,Tk=D,Ek=RangeError,Ak=function(e){var t=Mk(Tk(this)),n="",r=Sk(e);if(r<0||r==1/0)throw Ek("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n};ni({target:"String",proto:!0},{repeat:Ak});var Rk=l;ni({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return Rk(URL.prototype.toString,this)}});var Ck=ni,kk=i,Pk=Math.imul;Ck({target:"Math",stat:!0,forced:kk((function(){return-5!=Pk(4294967295,5)||2!=Pk.length}))},{imul:function(e,t){var n=65535,r=+e,i=+t,a=n&r,o=n&i;return 0|a*o+((n&r>>>16)*o+a*(n&i>>>16)<<16>>>0)}});var Lk,Ok,Dk,Nk={},Ik={get exports(){return Nk},set exports(e){Nk=e}},Uk="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,zk=Uk,Fk=a,Bk=n,Hk=H,jk=V,Gk=He,Vk=fi,Wk=pe,qk=Xt,Xk=Jn,Yk=Rt.f,Zk=Z,Kk=qu,$k=vl,Jk=tt,Qk=qe,eP=kn.enforce,tP=kn.get,nP=Bk.Int8Array,rP=nP&&nP.prototype,iP=Bk.Uint8ClampedArray,aP=iP&&iP.prototype,oP=nP&&Kk(nP),sP=rP&&Kk(rP),uP=Object.prototype,lP=Bk.TypeError,cP=Jk("toStringTag"),fP=Qk("TYPED_ARRAY_TAG"),hP="TypedArrayConstructor",dP=zk&&!!$k&&"Opera"!==Vk(Bk.opera),pP=!1,vP={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},mP={BigInt64Array:8,BigUint64Array:8},gP=function(e){var t=Kk(e);if(jk(t)){var n=tP(t);return n&&Gk(n,hP)?n[hP]:gP(t)}},yP=function(e){if(!jk(e))return!1;var t=Vk(e);return Gk(vP,t)||Gk(mP,t)};for(Lk in vP)(Dk=(Ok=Bk[Lk])&&Ok.prototype)?eP(Dk)[hP]=Ok:dP=!1;for(Lk in mP)(Dk=(Ok=Bk[Lk])&&Ok.prototype)&&(eP(Dk)[hP]=Ok);if((!dP||!Hk(oP)||oP===Function.prototype)&&(oP=function(){throw lP("Incorrect invocation")},dP))for(Lk in vP)Bk[Lk]&&$k(Bk[Lk],oP);if((!dP||!sP||sP===uP)&&(sP=oP.prototype,dP))for(Lk in vP)Bk[Lk]&&$k(Bk[Lk].prototype,sP);if(dP&&Kk(aP)!==sP&&$k(aP,sP),Fk&&!Gk(sP,cP))for(Lk in pP=!0,Yk(sP,cP,{get:function(){return jk(this)?this[fP]:void 0}}),vP)Bk[Lk]&&qk(Bk[Lk],fP,Lk);var _P={NATIVE_ARRAY_BUFFER_VIEWS:dP,TYPED_ARRAY_TAG:pP&&fP,aTypedArray:function(e){if(yP(e))return e;throw lP("Target is not a typed array")},aTypedArrayConstructor:function(e){if(Hk(e)&&(!$k||Zk(oP,e)))return e;throw lP(Wk(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,r){if(Fk){if(n)for(var i in vP){var a=Bk[i];if(a&&Gk(a.prototype,e))try{delete a.prototype[e]}catch(n){try{a.prototype[e]=t}catch(e){}}}sP[e]&&!n||Xk(sP,e,n?t:dP&&rP[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(Fk){if($k){if(n)for(r in vP)if((i=Bk[r])&&Gk(i,e))try{delete i[e]}catch(e){}if(oP[e]&&!n)return;try{return Xk(oP,e,n?t:dP&&oP[e]||t)}catch(e){}}for(r in vP)!(i=Bk[r])||i[e]&&!n||Xk(i,e,t)}},getTypedArrayConstructor:gP,isView:function(e){if(!jk(e))return!1;var t=Vk(e);return"DataView"===t||Gk(vP,t)||Gk(mP,t)},isTypedArray:yP,TypedArray:oP,TypedArrayPrototype:sP},bP=n,xP=i,wP=Wh,SP=_P.NATIVE_ARRAY_BUFFER_VIEWS,MP=bP.ArrayBuffer,TP=bP.Int8Array,EP=!SP||!xP((function(){TP(1)}))||!xP((function(){new TP(-1)}))||!wP((function(e){new TP,new TP(null),new TP(1.5),new TP(e)}),!0)||xP((function(){return 1!==new TP(new MP(2),1,void 0).length})),AP=ir,RP=fr,CP=RangeError,kP=function(e){if(void 0===e)return 0;var t=AP(e),n=RP(t);if(t!==n)throw CP("Wrong length or index");return n},PP=Array,LP=Math.abs,OP=Math.pow,DP=Math.floor,NP=Math.log,IP=Math.LN2,UP={pack:function(e,t,n){var r,i,a,o=PP(n),s=8*n-t-1,u=(1<<s)-1,l=u>>1,c=23===t?OP(2,-24)-OP(2,-77):0,f=e<0||0===e&&1/e<0?1:0,h=0;for((e=LP(e))!=e||e===1/0?(i=e!=e?1:0,r=u):(r=DP(NP(e)/IP),e*(a=OP(2,-r))<1&&(r--,a*=2),(e+=r+l>=1?c/a:c*OP(2,1-l))*a>=2&&(r++,a/=2),r+l>=u?(i=0,r=u):r+l>=1?(i=(e*a-1)*OP(2,t),r+=l):(i=e*OP(2,l-1)*OP(2,t),r=0));t>=8;)o[h++]=255&i,i/=256,t-=8;for(r=r<<t|i,s+=t;s>0;)o[h++]=255&r,r/=256,s-=8;return o[--h]|=128*f,o},unpack:function(e,t){var n,r=e.length,i=8*r-t-1,a=(1<<i)-1,o=a>>1,s=i-7,u=r-1,l=e[u--],c=127&l;for(l>>=7;s>0;)c=256*c+e[u--],s-=8;for(n=c&(1<<-s)-1,c>>=-s,s+=t;s>0;)n=256*n+e[u--],s-=8;if(0===c)c=1-o;else{if(c===a)return n?NaN:l?-1/0:1/0;n+=OP(2,t),c-=o}return(l?-1:1)*n*OP(2,c-t)}},zP=ze,FP=ur,BP=dr,HP=function(e){for(var t=zP(this),n=BP(t),r=arguments.length,i=FP(r>1?arguments[1]:void 0,n),a=r>2?arguments[2]:void 0,o=void 0===a?n:FP(a,n);o>i;)t[i++]=e;return t},jP=n,GP=x,VP=a,WP=Uk,qP=tn,XP=Xt,YP=dd,ZP=i,KP=Bh,$P=ir,JP=fr,QP=kP,eL=UP,tL=qu,nL=vl,rL=Qn.f,iL=Rt.f,aL=HP,oL=$i,sL=_a,uL=qP.PROPER,lL=qP.CONFIGURABLE,cL=kn.get,fL=kn.set,hL="ArrayBuffer",dL="DataView",pL="prototype",vL="Wrong index",mL=jP[hL],gL=mL,yL=gL&&gL[pL],_L=jP[dL],bL=_L&&_L[pL],xL=Object.prototype,wL=jP.Array,SL=jP.RangeError,ML=GP(aL),TL=GP([].reverse),EL=eL.pack,AL=eL.unpack,RL=function(e){return[255&e]},CL=function(e){return[255&e,e>>8&255]},kL=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},PL=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},LL=function(e){return EL(e,23,4)},OL=function(e){return EL(e,52,8)},DL=function(e,t){iL(e[pL],t,{get:function(){return cL(this)[t]}})},NL=function(e,t,n,r){var i=QP(n),a=cL(e);if(i+t>a.byteLength)throw SL(vL);var o=cL(a.buffer).bytes,s=i+a.byteOffset,u=oL(o,s,s+t);return r?u:TL(u)},IL=function(e,t,n,r,i,a){var o=QP(n),s=cL(e);if(o+t>s.byteLength)throw SL(vL);for(var u=cL(s.buffer).bytes,l=o+s.byteOffset,c=r(+i),f=0;f<t;f++)u[l+f]=c[a?f:t-f-1]};if(WP){var UL=uL&&mL.name!==hL;if(ZP((function(){mL(1)}))&&ZP((function(){new mL(-1)}))&&!ZP((function(){return new mL,new mL(1.5),new mL(NaN),1!=mL.length||UL&&!lL})))UL&&lL&&XP(mL,"name",hL);else{(gL=function(e){return KP(this,yL),new mL(QP(e))})[pL]=yL;for(var zL,FL=rL(mL),BL=0;FL.length>BL;)(zL=FL[BL++])in gL||XP(gL,zL,mL[zL]);yL.constructor=gL}nL&&tL(bL)!==xL&&nL(bL,xL);var HL=new _L(new gL(2)),jL=GP(bL.setInt8);HL.setInt8(0,2147483648),HL.setInt8(1,2147483649),!HL.getInt8(0)&&HL.getInt8(1)||YP(bL,{setInt8:function(e,t){jL(this,e,t<<24>>24)},setUint8:function(e,t){jL(this,e,t<<24>>24)}},{unsafe:!0})}else yL=(gL=function(e){KP(this,yL);var t=QP(e);fL(this,{bytes:ML(wL(t),0),byteLength:t}),VP||(this.byteLength=t)})[pL],bL=(_L=function(e,t,n){KP(this,bL),KP(e,yL);var r=cL(e).byteLength,i=$P(t);if(i<0||i>r)throw SL("Wrong offset");if(i+(n=void 0===n?r-i:JP(n))>r)throw SL("Wrong length");fL(this,{buffer:e,byteLength:n,byteOffset:i}),VP||(this.buffer=e,this.byteLength=n,this.byteOffset=i)})[pL],VP&&(DL(gL,"byteLength"),DL(_L,"buffer"),DL(_L,"byteLength"),DL(_L,"byteOffset")),YP(bL,{getInt8:function(e){return NL(this,1,e)[0]<<24>>24},getUint8:function(e){return NL(this,1,e)[0]},getInt16:function(e){var t=NL(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=NL(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return PL(NL(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return PL(NL(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return AL(NL(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return AL(NL(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){IL(this,1,e,RL,t)},setUint8:function(e,t){IL(this,1,e,RL,t)},setInt16:function(e,t){IL(this,2,e,CL,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){IL(this,2,e,CL,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){IL(this,4,e,kL,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){IL(this,4,e,kL,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){IL(this,4,e,LL,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){IL(this,8,e,OL,t,arguments.length>2?arguments[2]:void 0)}});sL(gL,hL),sL(_L,dL);var GL={ArrayBuffer:gL,DataView:_L},VL=V,WL=Math.floor,qL=Number.isInteger||function(e){return!VL(e)&&isFinite(e)&&WL(e)===e},XL=ir,YL=RangeError,ZL=function(e){var t=XL(e);if(t<0)throw YL("The argument can't be less than 0");return t},KL=RangeError,$L=function(e,t){var n=ZL(e);if(n%t)throw KL("Wrong offset");return n},JL=fi,QL=lt,eO=TypeError,tO=function(e){var t=QL(e,"number");if("number"==typeof t)throw eO("Can't convert number to bigint");return BigInt(t)},nO=Ea,rO=l,iO=Om,aO=ze,oO=dr,sO=_h,uO=hh,lO=oh,cO=function(e){var t=JL(e);return"BigInt64Array"==t||"BigUint64Array"==t},fO=_P.aTypedArrayConstructor,hO=tO,dO=ni,pO=n,vO=l,mO=a,gO=EP,yO=_P,_O=GL,bO=Bh,xO=m,wO=Xt,SO=qL,MO=fr,TO=kP,EO=$L,AO=ht,RO=He,CO=fi,kO=V,PO=he,LO=Bi,OO=Z,DO=vl,NO=Qn.f,IO=function(e){var t,n,r,i,a,o,s,u,l=iO(this),c=aO(e),f=arguments.length,h=f>1?arguments[1]:void 0,d=void 0!==h,p=uO(c);if(p&&!lO(p))for(u=(s=sO(c,p)).next,c=[];!(o=rO(u,s)).done;)c.push(o.value);for(d&&f>2&&(h=nO(h,arguments[2])),n=oO(c),r=new(fO(l))(n),i=cO(r),t=0;n>t;t++)a=d?h(c[t],t):c[t],r[t]=i?hO(a):+a;return r},UO=ro.forEach,zO=yd,FO=Rt,BO=r,HO=Zh,jO=kn.get,GO=kn.set,VO=kn.enforce,WO=FO.f,qO=BO.f,XO=Math.round,YO=pO.RangeError,ZO=_O.ArrayBuffer,KO=ZO.prototype,$O=_O.DataView,JO=yO.NATIVE_ARRAY_BUFFER_VIEWS,QO=yO.TYPED_ARRAY_TAG,eD=yO.TypedArray,tD=yO.TypedArrayPrototype,nD=yO.aTypedArrayConstructor,rD=yO.isTypedArray,iD="BYTES_PER_ELEMENT",aD="Wrong length",oD=function(e,t){nD(e);for(var n=0,r=t.length,i=new e(r);r>n;)i[n]=t[n++];return i},sD=function(e,t){WO(e,t,{get:function(){return jO(this)[t]}})},uD=function(e){var t;return OO(KO,e)||"ArrayBuffer"==(t=CO(e))||"SharedArrayBuffer"==t},lD=function(e,t){return rD(e)&&!PO(t)&&t in e&&SO(+t)&&t>=0},cD=function(e,t){return t=AO(t),lD(e,t)?xO(2,e[t]):qO(e,t)},fD=function(e,t,n){return t=AO(t),!(lD(e,t)&&kO(n)&&RO(n,"value"))||RO(n,"get")||RO(n,"set")||n.configurable||RO(n,"writable")&&!n.writable||RO(n,"enumerable")&&!n.enumerable?WO(e,t,n):(e[t]=n.value,e)};mO?(JO||(BO.f=cD,FO.f=fD,sD(tD,"buffer"),sD(tD,"byteOffset"),sD(tD,"byteLength"),sD(tD,"length")),dO({target:"Object",stat:!0,forced:!JO},{getOwnPropertyDescriptor:cD,defineProperty:fD}),Ik.exports=function(e,t,n){var r=e.match(/\d+$/)[0]/8,i=e+(n?"Clamped":"")+"Array",a="get"+e,o="set"+e,s=pO[i],u=s,l=u&&u.prototype,c={},f=function(e,t){WO(e,t,{get:function(){return function(e,t){var n=jO(e);return n.view[a](t*r+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var a=jO(e);n&&(i=(i=XO(i))<0?0:i>255?255:255&i),a.view[o](t*r+a.byteOffset,i,!0)}(this,t,e)},enumerable:!0})};JO?gO&&(u=t((function(e,t,n,i){return bO(e,l),HO(kO(t)?uD(t)?void 0!==i?new s(t,EO(n,r),i):void 0!==n?new s(t,EO(n,r)):new s(t):rD(t)?oD(u,t):vO(IO,u,t):new s(TO(t)),e,u)})),DO&&DO(u,eD),UO(NO(s),(function(e){e in u||wO(u,e,s[e])})),u.prototype=l):(u=t((function(e,t,n,i){bO(e,l);var a,o,s,c=0,h=0;if(kO(t)){if(!uD(t))return rD(t)?oD(u,t):vO(IO,u,t);a=t,h=EO(n,r);var d=t.byteLength;if(void 0===i){if(d%r)throw YO(aD);if((o=d-h)<0)throw YO(aD)}else if((o=MO(i)*r)+h>d)throw YO(aD);s=o/r}else s=TO(t),a=new ZO(o=s*r);for(GO(e,{buffer:a,byteOffset:h,byteLength:o,length:s,view:new $O(a)});c<s;)f(e,c++)})),DO&&DO(u,eD),l=u.prototype=LO(tD)),l.constructor!==u&&wO(l,"constructor",u),VO(l).TypedArrayConstructor=u,QO&&wO(l,QO,i);var h=u!=s;c[i]=u,dO({global:!0,constructor:!0,forced:h,sham:!JO},c),iD in u||wO(u,iD,r),iD in l||wO(l,iD,r),zO(i)}):Ik.exports=function(){},Nk("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var hD=dr,dD=ir,pD=_P.aTypedArray;(0,_P.exportTypedArrayMethod)("at",(function(e){var t=pD(this),n=hD(t),r=dD(e),i=r>=0?r:n+r;return i<0||i>=n?void 0:t[i]}));var vD=ze,mD=ur,gD=dr,yD=df,_D=Math.min,bD=[].copyWithin||function(e,t){var n=vD(this),r=gD(n),i=mD(e,r),a=mD(t,r),o=arguments.length>2?arguments[2]:void 0,s=_D((void 0===o?r:mD(o,r))-a,r-i),u=1;for(a<i&&i<a+s&&(u=-1,a+=s-1,i+=s-1);s-- >0;)a in n?n[i]=n[a]:yD(n,i),i+=u,a+=u;return n},xD=_P,wD=x(bD),SD=xD.aTypedArray;(0,xD.exportTypedArrayMethod)("copyWithin",(function(e,t){return wD(SD(this),e,t,arguments.length>2?arguments[2]:void 0)}));var MD=ro.every,TD=_P.aTypedArray;(0,_P.exportTypedArrayMethod)("every",(function(e){return MD(TD(this),e,arguments.length>1?arguments[1]:void 0)}));var ED=HP,AD=tO,RD=fi,CD=l,kD=i,PD=_P.aTypedArray,LD=_P.exportTypedArrayMethod,OD=x("".slice);LD("fill",(function(e){var t=arguments.length;PD(this);var n="Big"===OD(RD(this),0,3)?AD(e):+e;return CD(ED,this,n,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),kD((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e})));var DD=dr,ND=zm,ID=_P.aTypedArrayConstructor,UD=_P.getTypedArrayConstructor,zD=function(e){return ID(ND(e,UD(e)))},FD=function(e,t){for(var n=0,r=DD(t),i=new e(r);r>n;)i[n]=t[n++];return i},BD=zD,HD=ro.filter,jD=function(e,t){return FD(BD(e),t)},GD=_P.aTypedArray;(0,_P.exportTypedArrayMethod)("filter",(function(e){var t=HD(GD(this),e,arguments.length>1?arguments[1]:void 0);return jD(this,t)}));var VD=ro.find,WD=_P.aTypedArray;(0,_P.exportTypedArrayMethod)("find",(function(e){return VD(WD(this),e,arguments.length>1?arguments[1]:void 0)}));var qD=ro.findIndex,XD=_P.aTypedArray;(0,_P.exportTypedArrayMethod)("findIndex",(function(e){return qD(XD(this),e,arguments.length>1?arguments[1]:void 0)}));var YD=Ea,ZD=k,KD=ze,$D=dr,JD=function(e){var t=1==e;return function(n,r,i){for(var a,o=KD(n),s=ZD(o),u=YD(r,i),l=$D(s);l-- >0;)if(u(a=s[l],l,o))switch(e){case 0:return a;case 1:return l}return t?-1:void 0}},QD={findLast:JD(0),findLastIndex:JD(1)},eN=QD.findLast,tN=_P.aTypedArray;(0,_P.exportTypedArrayMethod)("findLast",(function(e){return eN(tN(this),e,arguments.length>1?arguments[1]:void 0)}));var nN=QD.findLastIndex,rN=_P.aTypedArray;(0,_P.exportTypedArrayMethod)("findLastIndex",(function(e){return nN(rN(this),e,arguments.length>1?arguments[1]:void 0)}));var iN=ro.forEach,aN=_P.aTypedArray;(0,_P.exportTypedArrayMethod)("forEach",(function(e){iN(aN(this),e,arguments.length>1?arguments[1]:void 0)}));var oN=yr.includes,sN=_P.aTypedArray;(0,_P.exportTypedArrayMethod)("includes",(function(e){return oN(sN(this),e,arguments.length>1?arguments[1]:void 0)}));var uN=yr.indexOf,lN=_P.aTypedArray;(0,_P.exportTypedArrayMethod)("indexOf",(function(e){return uN(lN(this),e,arguments.length>1?arguments[1]:void 0)}));var cN=n,fN=i,hN=x,dN=_P,pN=Yl,vN=tt("iterator"),mN=cN.Uint8Array,gN=hN(pN.values),yN=hN(pN.keys),_N=hN(pN.entries),bN=dN.aTypedArray,xN=dN.exportTypedArrayMethod,wN=mN&&mN.prototype,SN=!fN((function(){wN[vN].call([1])})),MN=!!wN&&wN.values&&wN[vN]===wN.values&&"values"===wN.values.name,TN=function(){return gN(bN(this))};xN("entries",(function(){return _N(bN(this))}),SN),xN("keys",(function(){return yN(bN(this))}),SN),xN("values",TN,SN||!MN,{name:"values"}),xN(vN,TN,SN||!MN,{name:"values"});var EN=_P.aTypedArray,AN=_P.exportTypedArrayMethod,RN=x([].join);AN("join",(function(e){return RN(EN(this),e)}));var CN=Ps,kN=U,PN=ir,LN=dr,ON=Gc,DN=Math.min,NN=[].lastIndexOf,IN=!!NN&&1/[1].lastIndexOf(1,-0)<0,UN=ON("lastIndexOf"),zN=IN||!UN?function(e){if(IN)return CN(NN,this,arguments)||0;var t=kN(this),n=LN(t),r=n-1;for(arguments.length>1&&(r=DN(r,PN(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:NN,FN=Ps,BN=zN,HN=_P.aTypedArray;(0,_P.exportTypedArrayMethod)("lastIndexOf",(function(e){var t=arguments.length;return FN(BN,HN(this),t>1?[e,arguments[1]]:[e])}));var jN=ro.map,GN=zD,VN=_P.aTypedArray;(0,_P.exportTypedArrayMethod)("map",(function(e){return jN(VN(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(GN(e))(t)}))}));var WN=tA.left,qN=_P.aTypedArray;(0,_P.exportTypedArrayMethod)("reduce",(function(e){var t=arguments.length;return WN(qN(this),e,t,t>1?arguments[1]:void 0)}));var XN=tA.right,YN=_P.aTypedArray;(0,_P.exportTypedArrayMethod)("reduceRight",(function(e){var t=arguments.length;return XN(YN(this),e,t,t>1?arguments[1]:void 0)}));var ZN=_P.aTypedArray,KN=_P.exportTypedArrayMethod,$N=Math.floor;KN("reverse",(function(){for(var e,t=this,n=ZN(t).length,r=$N(n/2),i=0;i<r;)e=t[i],t[i++]=t[--n],t[n]=e;return t}));var JN=n,QN=l,eI=_P,tI=dr,nI=$L,rI=ze,iI=i,aI=JN.RangeError,oI=JN.Int8Array,sI=oI&&oI.prototype,uI=sI&&sI.set,lI=eI.aTypedArray,cI=eI.exportTypedArrayMethod,fI=!iI((function(){var e=new Uint8ClampedArray(2);return QN(uI,e,{length:1,0:3},1),3!==e[1]})),hI=fI&&eI.NATIVE_ARRAY_BUFFER_VIEWS&&iI((function(){var e=new oI(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));cI("set",(function(e){lI(this);var t=nI(arguments.length>1?arguments[1]:void 0,1),n=rI(e);if(fI)return QN(uI,this,n,t);var r=this.length,i=tI(n),a=0;if(i+t>r)throw aI("Wrong length");for(;a<i;)this[t+a]=n[a++]}),!fI||hI);var dI=zD,pI=Ls,vI=_P.aTypedArray;(0,_P.exportTypedArrayMethod)("slice",(function(e,t){for(var n=pI(vI(this),e,t),r=dI(this),i=0,a=n.length,o=new r(a);a>i;)o[i]=n[i++];return o}),i((function(){new Int8Array(1).slice()})));var mI=ro.some,gI=_P.aTypedArray;(0,_P.exportTypedArrayMethod)("some",(function(e){return mI(gI(this),e,arguments.length>1?arguments[1]:void 0)}));var yI=wa,_I=i,bI=ye,xI=Wv,wI=Xv,SI=Yv,MI=re,TI=Kv,EI=_P.aTypedArray,AI=_P.exportTypedArrayMethod,RI=n.Uint16Array,CI=RI&&yI(RI.prototype.sort),kI=!(!CI||_I((function(){CI(new RI(2),null)}))&&_I((function(){CI(new RI(2),{})}))),PI=!!CI&&!_I((function(){if(MI)return MI<74;if(wI)return wI<67;if(SI)return!0;if(TI)return TI<602;var e,t,n=new RI(516),r=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(CI(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0}));AI("sort",(function(e){return void 0!==e&&bI(e),PI?CI(this,e):xI(EI(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!PI||kI);var LI=fr,OI=ur,DI=zD,NI=_P.aTypedArray;(0,_P.exportTypedArrayMethod)("subarray",(function(e,t){var n=NI(this),r=n.length,i=OI(e,r);return new(DI(n))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,LI((void 0===t?r:OI(t,r))-i))}));var II=Ps,UI=_P,zI=i,FI=Ls,BI=n.Int8Array,HI=UI.aTypedArray,jI=UI.exportTypedArrayMethod,GI=[].toLocaleString,VI=!!BI&&zI((function(){GI.call(new BI(1))}));jI("toLocaleString",(function(){return II(GI,VI?FI(HI(this)):HI(this),FI(arguments))}),zI((function(){return[1,2].toLocaleString()!=new BI([1,2]).toLocaleString()}))||!zI((function(){BI.prototype.toLocaleString.call([1,2])})));var WI=_P.exportTypedArrayMethod,qI=i,XI=x,YI=n.Uint8Array,ZI=YI&&YI.prototype||{},KI=[].toString,$I=XI([].join);qI((function(){KI.call({})}))&&(KI=function(){return $I(this)});var JI=ZI.toString!=KI;WI("toString",KI,JI),Nk("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Nk("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Nk("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Nk("Int8",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var QI=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],eU=Math.PI/180,tU=180/Math.PI;function nU(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(QI[255&e]+QI[e>>8&255]+QI[e>>16&255]+QI[e>>24&255]+"-"+QI[255&t]+QI[t>>8&255]+"-"+QI[t>>16&15|64]+QI[t>>24&255]+"-"+QI[63&n|128]+QI[n>>8&255]+"-"+QI[n>>16&255]+QI[n>>24&255]+QI[255&r]+QI[r>>8&255]+QI[r>>16&255]+QI[r>>24&255]).toLowerCase()}function rU(e,t,n){return Math.max(t,Math.min(n,e))}function iU(e,t,n){return(1-n)*e+n*t}function aU(e){return 0==(e&e-1)&&0!==e}function oU(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function sU(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function uU(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var lU=n;ni({global:!0,forced:lU.globalThis!==lU},{globalThis:lU}),ca("asyncIterator");var cU=Y,fU=_a;ca("toStringTag"),fU(cU("Symbol"),"Symbol"),_a(n.JSON,"JSON",!0),_a(Math,"Math",!0);var hU={},dU={get exports(){return hU},set exports(e){hU=e}},pU={},vU={get exports(){return pU},set exports(e){pU=e}};!function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(vU),function(e){var t=pU.default;function n(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var r={},i=Object.prototype,a=i.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new R(r||[]);return o(a,"_invoke",{value:M(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}r.wrap=h;var p={};function v(){}function m(){}function g(){}var y={};f(y,u,(function(){return this}));var _=Object.getPrototypeOf,b=_&&_(_(C([])));b&&b!==i&&a.call(b,u)&&(y=b);var x=g.prototype=v.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,n){function r(i,o,s,u){var l=d(e[i],e,o);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==t(f)&&a.call(f,"__await")?n.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):n.resolve(f).then((function(e){c.value=e,s(c)}),(function(e){return r("throw",e,s,u)}))}u(l.arg)}var i;o(this,"_invoke",{value:function(e,t){function a(){return new n((function(n,i){r(e,t,n,i)}))}return i=i?i.then(a,a):a()}})}function M(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return k()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=T(o,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=d(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function T(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=d(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function C(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=f(g,c,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,f(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},r.awrap=function(e){return{__await:e}},w(S.prototype),f(S.prototype,l,(function(){return this})),r.AsyncIterator=S,r.async=function(e,t,n,i,a){void 0===a&&(a=Promise);var o=new S(h(e,t,n,i),a);return r.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(x),f(x,c,"Generator"),f(x,u,(function(){return this})),f(x,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},r.values=C,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(dU);var mU=hU(),gU=mU;try{regeneratorRuntime=mU}catch(e){"object"===("undefined"==typeof globalThis?"undefined":Rc(globalThis))?globalThis.regeneratorRuntime=mU:Function("r","regeneratorRuntime = r")(mU)}var yU=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;gA(this,t),t.prototype.isVector2=!0,this.x=e,this.y=n}return _A(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:gU.mark((function e(){return gU.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(),_U=function(){function e(){gA(this,e),e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}return _A(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=o,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=a,l[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],l=n[4],c=n[7],f=n[2],h=n[5],d=n[8],p=r[0],v=r[3],m=r[6],g=r[1],y=r[4],_=r[7],b=r[2],x=r[5],w=r[8];return i[0]=a*p+o*g+s*b,i[3]=a*v+o*y+s*x,i[6]=a*m+o*_+s*w,i[1]=u*p+l*g+c*b,i[4]=u*v+l*y+c*x,i[7]=u*m+l*_+c*w,i[2]=f*p+h*g+d*b,i[5]=f*v+h*y+d*x,i[8]=f*m+h*_+d*w,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8];return t*a*l-t*o*u-n*i*l+n*o*s+r*i*u-r*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=l*a-o*u,f=o*s-l*i,h=u*i-a*s,d=t*c+n*f+r*h;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);var p=1/d;return e[0]=c*p,e[1]=(r*u-l*n)*p,e[2]=(o*n-r*a)*p,e[3]=f*p,e[4]=(l*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=h*p,e[7]=(n*s-u*t)*p,e[8]=(a*t-n*i)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,a,o){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*a+u*o)+a+e,-r*u,r*s,-r*(-u*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){return this.premultiply(bU.makeScale(e,t)),this}},{key:"rotate",value:function(e){return this.premultiply(bU.makeRotation(-e)),this}},{key:"translate",value:function(e,t){return this.premultiply(bU.makeTranslation(e,t)),this}},{key:"makeTranslation",value:function(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}},{key:"makeRotation",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}},{key:"makeScale",value:function(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}(),bU=new _U;function xU(e){for(var t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}function wU(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}Nk("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0),Nk("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Nk("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Nk("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var SU=n,MU=i,TU=pi,EU=KT.trim,AU=HT,RU=x("".charAt),CU=SU.parseFloat,kU=SU.Symbol,PU=kU&&kU.iterator,LU=1/CU(AU+"-0")!=-1/0||PU&&!MU((function(){CU(Object(PU))}))?function(e){var t=EU(TU(e)),n=CU(t);return 0===n&&"-"==RU(t,0)?-0:n}:CU;ni({global:!0,forced:parseFloat!=LU},{parseFloat:LU});var OU,DU=n,NU=i,IU=x,UU=pi,zU=KT.trim,FU=HT,BU=DU.parseInt,HU=DU.Symbol,jU=HU&&HU.iterator,GU=/^[+-]?0x/i,VU=IU(GU.exec),WU=8!==BU(FU+"08")||22!==BU(FU+"0x16")||jU&&!NU((function(){BU(Object(jU))}))?function(e,t){var n=zU(UU(e));return BU(n,t>>>0||(VU(GU,n)?16:10))}:BU;function qU(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function XU(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}ni({global:!0,forced:parseInt!=WU},{parseInt:WU});var YU=(EE(OU={},NC,EE({},IC,qU)),EE(OU,IC,EE({},NC,XU)),OU),ZU={legacyMode:!0,get workingColorSpace(){return IC},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(YU[t]&&void 0!==YU[t][n]){var r=YU[t][n];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},KU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},$U={r:0,g:0,b:0},JU={h:0,s:0,l:0},QU={h:0,s:0,l:0};function ez(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function tz(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var nz,rz=function(e){function t(e,n,r){return gA(this,t),this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===r?this.set(e):this.setRGB(e,n,r)}return _A(t,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NC;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,ZU.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ZU.workingColorSpace;return this.r=e,this.g=t,this.b=n,ZU.toWorkingColorSpace(this,r),this}},{key:"setHSL",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ZU.workingColorSpace;if(e=function(e,t){return(e%t+t)%t}(e,1),t=rU(t,0,1),n=rU(n,0,1),0===t)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+t):n+t-n*t,a=2*n-i;this.r=ez(a,i,e+1/3),this.g=ez(a,i,e),this.b=ez(a,i,e-1/3)}return ZU.toWorkingColorSpace(this,r),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NC;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var i,a=t[1],o=t[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,ZU.toWorkingColorSpace(this,n),r(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,ZU.toWorkingColorSpace(this,n),r(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){var s=parseFloat(i[1])/360,u=parseFloat(i[2])/100,l=parseFloat(i[3])/100;return r(i[4]),this.setHSL(s,u,l,n)}}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var c=t[1],f=c.length;if(3===f)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,ZU.toWorkingColorSpace(this,n),this;if(6===f)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,ZU.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NC,n=KU[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=qU(e.r),this.g=qU(e.g),this.b=qU(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=XU(e.r),this.g=XU(e.g),this.b=XU(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NC;return ZU.fromWorkingColorSpace(tz(this,$U),e),rU(255*$U.r,0,255)<<16^rU(255*$U.g,0,255)<<8^rU(255*$U.b,0,255)<<0}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NC;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ZU.workingColorSpace;ZU.fromWorkingColorSpace(tz(this,$U),t);var n,r,i=$U.r,a=$U.g,o=$U.b,s=Math.max(i,a,o),u=Math.min(i,a,o),l=(u+s)/2;if(u===s)n=0,r=0;else{var c=s-u;switch(r=l<=.5?c/(s+u):c/(2-s-u),s){case i:n=(a-o)/c+(a<o?6:0);break;case a:n=(o-i)/c+2;break;case o:n=(i-a)/c+4}n/=6}return e.h=n,e.s=r,e.l=l,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ZU.workingColorSpace;return ZU.fromWorkingColorSpace(tz(this,$U),t),e.r=$U.r,e.g=$U.g,e.b=$U.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NC;return ZU.fromWorkingColorSpace(tz(this,$U),e),e!==NC?"color(".concat(e," ").concat($U.r," ").concat($U.g," ").concat($U.b,")"):"rgb(".concat(255*$U.r|0,",").concat(255*$U.g|0,",").concat(255*$U.b|0,")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(JU),JU.h+=e,JU.s+=t,JU.l+=n,this.setHSL(JU.h,JU.s,JU.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(JU),e.getHSL(QU);var n=iU(JU.h,QU.h,t),r=iU(JU.s,QU.s,t),i=iU(JU.l,QU.l,t);return this.setHSL(n,r,i),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:gU.mark((function e(){return gU.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),e,this)}))}]),t}();rz.NAMES=KU;var iz=function(){function e(){gA(this,e)}return _A(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===nz&&(nz=wU("canvas")),nz.width=e.width,nz.height=e.height;var n=nz.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=nz}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var t=wU("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var r=n.getImageData(0,0,e.width,e.height),i=r.data,a=0;a<i.length;a++)i[a]=255*qU(i[a]/255);return n.putImageData(r,0,0),t}if(e.data){for(var o=e.data.slice(0),s=0;s<o.length;s++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[s]=Math.floor(255*qU(o[s]/255)):o[s]=qU(o[s]);return{data:o,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),e}(),az=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;gA(this,e),this.isSource=!0,this.uuid=nU(),this.data=t,this.version=0}return _A(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},r=this.data;if(null!==r){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)r[a].isDataTexture?i.push(oz(r[a].image)):i.push(oz(r[a]))}else i=oz(r);n.url=i}return t||(e.images[this.uuid]=n),n}}]),e}();function oz(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?iz.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}function sz(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var uz=0,lz=function(e){yk(n,e);var t=sz(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:SR,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:SR,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:RR,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:kR,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:GR,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:PR,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:n.DEFAULT_ANISOTROPY,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:CC;return gA(this,n),(e=t.call(this)).isTexture=!0,Object.defineProperty(_k(e),"id",{value:uz++}),e.uuid=nU(),e.name="",e.source=new az(r),e.mipmaps=[],e.mapping=i,e.wrapS=a,e.wrapT=o,e.magFilter=s,e.minFilter=u,e.anisotropy=f,e.format=l,e.internalFormat=null,e.type=c,e.offset=new yU(0,0),e.repeat=new yU(1,1),e.center=new yU(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new _U,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=h,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.needsPMREMUpdate=!1,e}return _A(n,[{key:"image",get:function(){return this.source.data},set:function(e){this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case wR:e.x=e.x-Math.floor(e.x);break;case SR:e.x=e.x<0?0:1;break;case MR:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case wR:e.y=e.y-Math.floor(e.y);break;case SR:e.y=e.y<0?0:1;break;case MR:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}]),n}(wk);lz.DEFAULT_IMAGE=null,lz.DEFAULT_MAPPING=300,lz.DEFAULT_ANISOTROPY=1;var cz=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;gA(this,t),t.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}return _A(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,a=.01,o=.1,s=e.elements,u=s[0],l=s[4],c=s[8],f=s[1],h=s[5],d=s[9],p=s[2],v=s[6],m=s[10];if(Math.abs(l-f)<a&&Math.abs(c-p)<a&&Math.abs(d-v)<a){if(Math.abs(l+f)<o&&Math.abs(c+p)<o&&Math.abs(d+v)<o&&Math.abs(u+h+m-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var g=(u+1)/2,y=(h+1)/2,_=(m+1)/2,b=(l+f)/4,x=(c+p)/4,w=(d+v)/4;return g>y&&g>_?g<a?(n=0,r=.707106781,i=.707106781):(r=b/(n=Math.sqrt(g)),i=x/n):y>_?y<a?(n=.707106781,r=0,i=.707106781):(n=b/(r=Math.sqrt(y)),i=w/r):_<a?(n=.707106781,r=.707106781,i=0):(n=x/(i=Math.sqrt(_)),r=w/i),this.set(n,r,i,t),this}var S=Math.sqrt((v-d)*(v-d)+(c-p)*(c-p)+(f-l)*(f-l));return Math.abs(S)<.001&&(S=1),this.x=(v-d)/S,this.y=(c-p)/S,this.z=(f-l)/S,this.w=Math.acos((u+h+m-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:gU.mark((function e(){return gU.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}();function fz(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var hz=function(e){yk(n,e);var t=fz(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};gA(this,n),(e=t.call(this)).isWebGLRenderTarget=!0,e.width=r,e.height=i,e.depth=1,e.scissor=new cz(0,0,r,i),e.scissorTest=!1,e.viewport=new cz(0,0,r,i);var o={width:r,height:i,depth:1};return e.texture=new lz(o,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),e.texture.isRenderTargetTexture=!0,e.texture.flipY=!1,e.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,e.texture.internalFormat=void 0!==a.internalFormat?a.internalFormat:null,e.texture.minFilter=void 0!==a.minFilter?a.minFilter:RR,e.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,e.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,e.depthTexture=void 0!==a.depthTexture?a.depthTexture:null,e.samples=void 0!==a.samples?a.samples:0,e}return _A(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;var t=Object.assign({},e.texture.image);return this.texture.source=new az(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(wk);function dz(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var pz=function(e){yk(n,e);var t=dz(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return gA(this,n),(e=t.call(this,null)).isDataArrayTexture=!0,e.image={data:r,width:i,height:a,depth:o},e.magFilter=TR,e.minFilter=TR,e.wrapR=SR,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return _A(n)}(lz);function vz(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var mz=function(e){yk(n,e);var t=vz(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return gA(this,n),(e=t.call(this,null)).isData3DTexture=!0,e.image={data:r,width:i,height:a,depth:o},e.magFilter=TR,e.minFilter=TR,e.wrapR=SR,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return _A(n)}(lz),gz=He,yz=l,_z=V,bz=Ot,xz=function(e){return void 0!==e&&(gz(e,"value")||gz(e,"writable"))},wz=r,Sz=qu;function Mz(){return Mz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xk(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Mz.apply(this,arguments)}ni({target:"Reflect",stat:!0},{get:function e(t,n){var r,i,a=arguments.length<3?t:arguments[2];return bz(t)===a?t[n]:(r=wz.f(t,n))?xz(r)?r.value:void 0===r.get?void 0:yz(r.get,a):_z(i=Sz(t))?e(i,n,a):void 0}}),ni({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)});var Tz=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;gA(this,t),this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}return _A(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,u=o(n/2),l=o(r/2),c=o(i/2),f=s(n/2),h=s(r/2),d=s(i/2);switch(a){case"XYZ":this._x=f*l*c+u*h*d,this._y=u*h*c-f*l*d,this._z=u*l*d+f*h*c,this._w=u*l*c-f*h*d;break;case"YXZ":this._x=f*l*c+u*h*d,this._y=u*h*c-f*l*d,this._z=u*l*d-f*h*c,this._w=u*l*c+f*h*d;break;case"ZXY":this._x=f*l*c-u*h*d,this._y=u*h*c+f*l*d,this._z=u*l*d+f*h*c,this._w=u*l*c-f*h*d;break;case"ZYX":this._x=f*l*c-u*h*d,this._y=u*h*c+f*l*d,this._z=u*l*d-f*h*c,this._w=u*l*c+f*h*d;break;case"YZX":this._x=f*l*c+u*h*d,this._y=u*h*c+f*l*d,this._z=u*l*d-f*h*c,this._w=u*l*c-f*h*d;break;case"XZY":this._x=f*l*c-u*h*d,this._y=u*h*c-f*l*d,this._z=u*l*d+f*h*c,this._w=u*l*c+f*h*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],u=t[2],l=t[6],c=t[10],f=n+o+c;if(f>0){var h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(l-s)*h,this._y=(i-u)*h,this._z=(a-r)*h}else if(n>o&&n>c){var d=2*Math.sqrt(1+n-o-c);this._w=(l-s)/d,this._x=.25*d,this._y=(r+a)/d,this._z=(i+u)/d}else if(o>c){var p=2*Math.sqrt(1+o-n-c);this._w=(i-u)/p,this._x=(r+a)/p,this._y=.25*p,this._z=(s+l)/p}else{var v=2*Math.sqrt(1+c-n-o);this._w=(a-r)/v,this._x=(i+u)/v,this._y=(s+l)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(rU(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+a*o+r*u-i*s,this._y=r*l+a*s+i*o-n*u,this._z=i*l+a*u+n*s-r*o,this._w=a*l-n*o-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-t;return this._w=u*a+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(s),c=Math.atan2(l,o),f=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=a*f+this._w*h,this._x=n*f+this._x*h,this._y=r*f+this._y*h,this._z=i*f+this._z*h,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:gU.mark((function e(){return gU.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),e,this)}))}],[{key:"slerpFlat",value:function(e,t,n,r,i,a,o){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],f=i[a+0],h=i[a+1],d=i[a+2],p=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=u,e[t+2]=l,void(e[t+3]=c);if(1===o)return e[t+0]=f,e[t+1]=h,e[t+2]=d,void(e[t+3]=p);if(c!==p||s!==f||u!==h||l!==d){var v=1-o,m=s*f+u*h+l*d+c*p,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,m*g);v=Math.sin(v*b)/_,o=Math.sin(o*b)/_}var x=o*g;if(s=s*v+f*x,u=u*v+h*x,l=l*v+d*x,c=c*v+p*x,v===1-o){var w=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=w,u*=w,l*=w,c*=w}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,a){var o=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=i[a],f=i[a+1],h=i[a+2],d=i[a+3];return e[t]=o*d+l*c+s*h-u*f,e[t+1]=s*d+l*f+u*c-o*h,e[t+2]=u*d+l*h+o*f-s*c,e[t+3]=l*d-o*c-s*f-u*h,e}}]),t}(),Ez=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;gA(this,t),t.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}return _A(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(Rz.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(Rz.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=s*t+a*r-o*n,l=s*n+o*t-i*r,c=s*r+i*n-a*t,f=-i*t-a*n-o*r;return this.x=u*s+f*-i+l*-o-c*-a,this.y=l*s+f*-a+c*-i-u*-o,this.z=c*s+f*-o+u*-a-l*-i,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return Az.copy(this).projectOnVector(e),this.sub(Az)}},{key:"reflect",value:function(e){return this.sub(Az.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(rU(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:Symbol.iterator,value:gU.mark((function e(){return gU.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(),Az=new Ez,Rz=new Tz,Cz=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ez(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ez(-1/0,-1/0,-1/0);gA(this,e),this.isBox3=!0,this.min=t,this.max=n}return _A(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.length;s<u;s+=3){var l=e[s],c=e[s+1],f=e[s+2];l<t&&(t=l),c<n&&(n=c),f<r&&(r=f),l>i&&(i=l),c>a&&(a=c),f>o&&(o=f)}return this.min.set(t,n,r),this.max.set(i,a,o),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.count;s<u;s++){var l=e.getX(s),c=e.getY(s),f=e.getZ(s);l<t&&(t=l),c<n&&(n=c),f<r&&(r=f),l>i&&(i=l),c>a&&(a=c),f>o&&(o=f)}return this.min.set(t,n,r),this.max.set(i,a,o),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Pz.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var n=e.geometry;if(void 0!==n)if(t&&null!=n.attributes&&void 0!==n.attributes.position)for(var r=n.attributes.position,i=0,a=r.count;i<a;i++)Pz.fromBufferAttribute(r,i).applyMatrix4(e.matrixWorld),this.expandByPoint(Pz);else null===n.boundingBox&&n.computeBoundingBox(),Lz.copy(n.boundingBox),Lz.applyMatrix4(e.matrixWorld),this.union(Lz);for(var o=e.children,s=0,u=o.length;s<u;s++)this.expandByObject(o[s],t);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Pz),Pz.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Fz),Bz.subVectors(this.max,Fz),Oz.subVectors(e.a,Fz),Dz.subVectors(e.b,Fz),Nz.subVectors(e.c,Fz),Iz.subVectors(Dz,Oz),Uz.subVectors(Nz,Dz),zz.subVectors(Oz,Nz);var t=[0,-Iz.z,Iz.y,0,-Uz.z,Uz.y,0,-zz.z,zz.y,Iz.z,0,-Iz.x,Uz.z,0,-Uz.x,zz.z,0,-zz.x,-Iz.y,Iz.x,0,-Uz.y,Uz.x,0,-zz.y,zz.x,0];return!!Gz(t,Oz,Dz,Nz,Bz)&&(!!Gz(t=[1,0,0,0,1,0,0,0,1],Oz,Dz,Nz,Bz)&&(Hz.crossVectors(Iz,Uz),Gz(t=[Hz.x,Hz.y,Hz.z],Oz,Dz,Nz,Bz)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return Pz.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Pz).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(kz[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),kz[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),kz[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),kz[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),kz[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),kz[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),kz[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),kz[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(kz)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),kz=[new Ez,new Ez,new Ez,new Ez,new Ez,new Ez,new Ez,new Ez],Pz=new Ez,Lz=new Cz,Oz=new Ez,Dz=new Ez,Nz=new Ez,Iz=new Ez,Uz=new Ez,zz=new Ez,Fz=new Ez,Bz=new Ez,Hz=new Ez,jz=new Ez;function Gz(e,t,n,r,i){for(var a=0,o=e.length-3;a<=o;a+=3){jz.fromArray(e,a);var s=i.x*Math.abs(jz.x)+i.y*Math.abs(jz.y)+i.z*Math.abs(jz.z),u=t.dot(jz),l=n.dot(jz),c=r.dot(jz);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>s)return!1}return!0}var Vz=new Cz,Wz=new Ez,qz=new Ez,Xz=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ez,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;gA(this,e),this.center=t,this.radius=n}return _A(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):Vz.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Wz.subVectors(e,this.center);var t=Wz.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.addScaledVector(Wz,r/n),this.radius+=r}return this}},{key:"union",value:function(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(qz.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Wz.copy(e.center).add(qz)),this.expandByPoint(Wz.copy(e.center).sub(qz))),this)}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Yz=ze,Zz=dr,Kz=ir,$z=Iu;ni({target:"Array",proto:!0},{at:function(e){var t=Yz(this),n=Zz(t),r=Kz(e),i=r>=0?r:n+r;return i<0||i>=n?void 0:t[i]}}),$z("at");var Jz=ni,Qz=D,eF=ir,tF=pi,nF=i,rF=x("".charAt);Jz({target:"String",proto:!0,forced:nF((function(){return"\ud842"!=="ð ®·".at(-2)}))},{at:function(e){var t=tF(Qz(this)),n=t.length,r=eF(e),i=r>=0?r:n+r;return i<0||i>=n?void 0:rF(t,i)}});var iF=new Ez,aF=new Ez,oF=new Ez,sF=new Ez,uF=new Ez,lF=new Ez,cF=new Ez,fF=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ez,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ez(0,0,-1);gA(this,e),this.origin=t,this.direction=n}return _A(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,iF)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=iF.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(iF.copy(this.direction).multiplyScalar(t).add(this.origin),iF.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){aF.copy(e).add(t).multiplyScalar(.5),oF.copy(t).sub(e).normalize(),sF.copy(this.origin).sub(aF);var i,a,o,s,u=.5*e.distanceTo(t),l=-this.direction.dot(oF),c=sF.dot(this.direction),f=-sF.dot(oF),h=sF.lengthSq(),d=Math.abs(1-l*l);if(d>0)if(a=l*c-f,s=u*d,(i=l*f-c)>=0)if(a>=-s)if(a<=s){var p=1/d;o=(i*=p)*(i+l*(a*=p)+2*c)+a*(l*i+a+2*f)+h}else a=u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*f)+h;else a=-u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*f)+h;else a<=-s?o=-(i=Math.max(0,-(-l*u+c)))*i+(a=i>0?-u:Math.min(Math.max(-u,-f),u))*(a+2*f)+h:a<=s?(i=0,o=(a=Math.min(Math.max(-u,-f),u))*(a+2*f)+h):o=-(i=Math.max(0,-(l*u+c)))*i+(a=i>0?u:Math.min(Math.max(-u,-f),u))*(a+2*f)+h;else a=l>0?-u:u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*f)+h;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(oF).multiplyScalar(a).add(aF),o}},{key:"intersectSphere",value:function(e,t){iF.subVectors(e.center,this.origin);var n=iF.dot(this.direction),r=iF.dot(iF)-n*n,i=e.radius*e.radius;if(r>i)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,i,a,o,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,f=this.origin;return u>=0?(n=(e.min.x-f.x)*u,r=(e.max.x-f.x)*u):(n=(e.max.x-f.x)*u,r=(e.min.x-f.x)*u),l>=0?(i=(e.min.y-f.y)*l,a=(e.max.y-f.y)*l):(i=(e.max.y-f.y)*l,a=(e.min.y-f.y)*l),n>a||i>r?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),c>=0?(o=(e.min.z-f.z)*c,s=(e.max.z-f.z)*c):(o=(e.max.z-f.z)*c,s=(e.min.z-f.z)*c),n>s||o>r?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,iF)}},{key:"intersectTriangle",value:function(e,t,n,r,i){uF.subVectors(t,e),lF.subVectors(n,e),cF.crossVectors(uF,lF);var a,o=this.direction.dot(cF);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}sF.subVectors(this.origin,e);var s=a*this.direction.dot(lF.crossVectors(sF,lF));if(s<0)return null;var u=a*this.direction.dot(uF.cross(sF));if(u<0)return null;if(s+u>o)return null;var l=-a*sF.dot(cF);return l<0?null:this.at(l/o,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),hF=function(){function e(){gA(this,e),e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return _A(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u,l,c,f,h,d,p,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=i,m[5]=a,m[9]=o,m[13]=s,m[2]=u,m[6]=l,m[10]=c,m[14]=f,m[3]=h,m[7]=d,m[11]=p,m[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/dF.setFromMatrixColumn(e,0).length(),i=1/dF.setFromMatrixColumn(e,1).length(),a=1/dF.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var f=a*l,h=a*c,d=o*l,p=o*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=h+d*u,t[5]=f-p*u,t[9]=-o*s,t[2]=p-f*u,t[6]=d+h*u,t[10]=a*s}else if("YXZ"===e.order){var v=s*l,m=s*c,g=u*l,y=u*c;t[0]=v+y*o,t[4]=g*o-m,t[8]=a*u,t[1]=a*c,t[5]=a*l,t[9]=-o,t[2]=m*o-g,t[6]=y+v*o,t[10]=a*s}else if("ZXY"===e.order){var _=s*l,b=s*c,x=u*l,w=u*c;t[0]=_-w*o,t[4]=-a*c,t[8]=x+b*o,t[1]=b+x*o,t[5]=a*l,t[9]=w-_*o,t[2]=-a*u,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var S=a*l,M=a*c,T=o*l,E=o*c;t[0]=s*l,t[4]=T*u-M,t[8]=S*u+E,t[1]=s*c,t[5]=E*u+S,t[9]=M*u-T,t[2]=-u,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var A=a*s,R=a*u,C=o*s,k=o*u;t[0]=s*l,t[4]=k-A*c,t[8]=C*c+R,t[1]=c,t[5]=a*l,t[9]=-o*l,t[2]=-u*l,t[6]=R*c+C,t[10]=A-k*c}else if("XZY"===e.order){var P=a*s,L=a*u,O=o*s,D=o*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=P*c+D,t[5]=a*l,t[9]=L*c-O,t[2]=O*c-L,t[6]=o*l,t[10]=D*c+P}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(vF,e,mF)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return _F.subVectors(e,t),0===_F.lengthSq()&&(_F.z=1),_F.normalize(),gF.crossVectors(n,_F),0===gF.lengthSq()&&(1===Math.abs(n.z)?_F.x+=1e-4:_F.z+=1e-4,_F.normalize(),gF.crossVectors(n,_F)),gF.normalize(),yF.crossVectors(_F,gF),r[0]=gF.x,r[4]=yF.x,r[8]=_F.x,r[1]=gF.y,r[5]=yF.y,r[9]=_F.y,r[2]=gF.z,r[6]=yF.z,r[10]=_F.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],l=n[1],c=n[5],f=n[9],h=n[13],d=n[2],p=n[6],v=n[10],m=n[14],g=n[3],y=n[7],_=n[11],b=n[15],x=r[0],w=r[4],S=r[8],M=r[12],T=r[1],E=r[5],A=r[9],R=r[13],C=r[2],k=r[6],P=r[10],L=r[14],O=r[3],D=r[7],N=r[11],I=r[15];return i[0]=a*x+o*T+s*C+u*O,i[4]=a*w+o*E+s*k+u*D,i[8]=a*S+o*A+s*P+u*N,i[12]=a*M+o*R+s*L+u*I,i[1]=l*x+c*T+f*C+h*O,i[5]=l*w+c*E+f*k+h*D,i[9]=l*S+c*A+f*P+h*N,i[13]=l*M+c*R+f*L+h*I,i[2]=d*x+p*T+v*C+m*O,i[6]=d*w+p*E+v*k+m*D,i[10]=d*S+p*A+v*P+m*N,i[14]=d*M+p*R+v*L+m*I,i[3]=g*x+y*T+_*C+b*O,i[7]=g*w+y*E+_*k+b*D,i[11]=g*S+y*A+_*P+b*N,i[15]=g*M+y*R+_*L+b*I,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],u=e[13],l=e[2],c=e[6],f=e[10],h=e[14];return e[3]*(+i*s*c-r*u*c-i*o*f+n*u*f+r*o*h-n*s*h)+e[7]*(+t*s*h-t*u*f+i*a*f-r*a*h+r*u*l-i*s*l)+e[11]*(+t*u*c-t*o*h-i*a*c+n*a*h+i*o*l-n*u*l)+e[15]*(-r*o*l-t*s*c+t*o*f+r*a*c-n*a*f+n*s*l)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],h=e[11],d=e[12],p=e[13],v=e[14],m=e[15],g=c*v*u-p*f*u+p*s*h-o*v*h-c*s*m+o*f*m,y=d*f*u-l*v*u-d*s*h+a*v*h+l*s*m-a*f*m,_=l*p*u-d*c*u+d*o*h-a*p*h-l*o*m+a*c*m,b=d*c*s-l*p*s-d*o*f+a*p*f+l*o*v-a*c*v,x=t*g+n*y+r*_+i*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var w=1/x;return e[0]=g*w,e[1]=(p*f*i-c*v*i-p*r*h+n*v*h+c*r*m-n*f*m)*w,e[2]=(o*v*i-p*s*i+p*r*u-n*v*u-o*r*m+n*s*m)*w,e[3]=(c*s*i-o*f*i-c*r*u+n*f*u+o*r*h-n*s*h)*w,e[4]=y*w,e[5]=(l*v*i-d*f*i+d*r*h-t*v*h-l*r*m+t*f*m)*w,e[6]=(d*s*i-a*v*i-d*r*u+t*v*u+a*r*m-t*s*m)*w,e[7]=(a*f*i-l*s*i+l*r*u-t*f*u-a*r*h+t*s*h)*w,e[8]=_*w,e[9]=(d*c*i-l*p*i-d*n*h+t*p*h+l*n*m-t*c*m)*w,e[10]=(a*p*i-d*o*i+d*n*u-t*p*u-a*n*m+t*o*m)*w,e[11]=(l*o*i-a*c*i-l*n*u+t*c*u+a*n*h-t*o*h)*w,e[12]=b*w,e[13]=(l*p*r-d*c*r+d*n*f-t*p*f-l*n*v+t*c*v)*w,e[14]=(d*o*r-a*p*r-d*n*s+t*p*s+a*n*v-t*o*v)*w,e[15]=(a*c*r-l*o*r+l*n*s-t*c*s-a*n*f+t*o*f)*w,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,u=i*a,l=i*o;return this.set(u*a+n,u*o-r*s,u*s+r*o,0,u*o+r*s,l*o+n,l*s-r*a,0,u*s-r*o,l*s+r*a,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,u=i+i,l=a+a,c=o+o,f=i*u,h=i*l,d=i*c,p=a*l,v=a*c,m=o*c,g=s*u,y=s*l,_=s*c,b=n.x,x=n.y,w=n.z;return r[0]=(1-(p+m))*b,r[1]=(h+_)*b,r[2]=(d-y)*b,r[3]=0,r[4]=(h-_)*x,r[5]=(1-(f+m))*x,r[6]=(v+g)*x,r[7]=0,r[8]=(d+y)*w,r[9]=(v-g)*w,r[10]=(1-(f+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=dF.set(r[0],r[1],r[2]).length(),a=dF.set(r[4],r[5],r[6]).length(),o=dF.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],pF.copy(this);var s=1/i,u=1/a,l=1/o;return pF.elements[0]*=s,pF.elements[1]*=s,pF.elements[2]*=s,pF.elements[4]*=u,pF.elements[5]*=u,pF.elements[6]*=u,pF.elements[8]*=l,pF.elements[9]*=l,pF.elements[10]*=l,t.setFromRotationMatrix(pF),n.x=i,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,i,a){var o=this.elements,s=2*i/(t-e),u=2*i/(n-r),l=(t+e)/(t-e),c=(n+r)/(n-r),f=-(a+i)/(a-i),h=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=u,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=f,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,a){var o=this.elements,s=1/(t-e),u=1/(n-r),l=1/(a-i),c=(t+e)*s,f=(n+r)*u,h=(a+i)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-f,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}(),dF=new Ez,pF=new hF,vF=new Ez(0,0,0),mF=new Ez(1,1,1),gF=new Ez,yF=new Ez,_F=new Ez,bF=new hF,xF=new Tz,wF=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DEFAULT_ORDER;gA(this,t),this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}return _A(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],u=r[5],l=r[9],c=r[2],f=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(rU(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,h),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-rU(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(rU(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-c,h),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-rU(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(rU(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-rU(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-l,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return bF.makeRotationFromQuaternion(e),this.setFromRotationMatrix(bF,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return xF.setFromEuler(this),this.setFromQuaternion(xF,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:gU.mark((function e(){return gU.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}}),e,this)}))}]),t}();wF.DEFAULT_ORDER="XYZ";var SF=function(){function e(){gA(this,e),this.mask=1}return _A(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!=(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!=(this.mask&(1<<e|0))}}]),e}();function MF(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var TF=0,EF=new Ez,AF=new Tz,RF=new hF,CF=new Ez,kF=new Ez,PF=new Ez,LF=new Tz,OF=new Ez(1,0,0),DF=new Ez(0,1,0),NF=new Ez(0,0,1),IF={type:"added"},UF={type:"removed"},zF=function(e){yk(n,e);var t=MF(n);function n(){var e;gA(this,n),(e=t.call(this)).isObject3D=!0,Object.defineProperty(_k(e),"id",{value:TF++}),e.uuid=nU(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DEFAULT_UP.clone();var r=new Ez,i=new wF,a=new Tz,o=new Ez(1,1,1);return i._onChange((function(){a.setFromEuler(i,!1)})),a._onChange((function(){i.setFromQuaternion(a,void 0,!1)})),Object.defineProperties(_k(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new hF},normalMatrix:{value:new _U}}),e.matrix=new hF,e.matrixWorld=new hF,e.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,e.matrixWorldNeedsUpdate=!1,e.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,e.layers=new SF,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return _A(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return AF.setFromAxisAngle(e,t),this.quaternion.multiply(AF),this}},{key:"rotateOnWorldAxis",value:function(e,t){return AF.setFromAxisAngle(e,t),this.quaternion.premultiply(AF),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(OF,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(DF,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(NF,e)}},{key:"translateOnAxis",value:function(e,t){return EF.copy(e).applyQuaternion(this.quaternion),this.position.add(EF.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(OF,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(DF,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(NF,e)}},{key:"localToWorld",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(RF.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?CF.copy(e):CF.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),kF.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?RF.lookAt(kF,CF,this.up):RF.lookAt(CF,kF,this.up),this.quaternion.setFromRotationMatrix(RF),r&&(RF.extractRotation(r.matrixWorld),AF.setFromRotationMatrix(RF),this.quaternion.premultiply(AF.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(IF)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(UF)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(UF)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),RF.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),RF.multiply(e.parent.matrixWorld)),e.applyMatrix4(RF),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}},{key:"getObjectsByProperty",value:function(e,t){var n=[];this[e]===t&&n.push(this);for(var r=0,i=this.children.length;r<i;r++){var a=this.children[r].getObjectsByProperty(e,t);a.length>0&&(n=n.concat(a))}return n}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kF,e,PF),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kF,LF,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++){var i=t[n];!0!==i.matrixWorldAutoUpdate&&!0!==e||i.updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++){var o=r[i];!0===o.matrixWorldAutoUpdate&&o.updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,u=o.length;s<u;s++){var l=o[s];i(e.shapes,l)}else i(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],f=0,h=this.material.length;f<h;f++)c.push(i(e.materials,this.material[f]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var d=0;d<this.children.length;d++)r.children.push(this.children[d].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var v=this.animations[p];r.animations.push(i(e.animations,v))}}if(t){var m=M(e.geometries),g=M(e.materials),y=M(e.textures),_=M(e.images),b=M(e.shapes),x=M(e.skeletons),w=M(e.animations),S=M(e.nodes);m.length>0&&(n.geometries=m),g.length>0&&(n.materials=g),y.length>0&&(n.textures=y),_.length>0&&(n.images=_),b.length>0&&(n.shapes=b),x.length>0&&(n.skeletons=x),w.length>0&&(n.animations=w),S.length>0&&(n.nodes=S)}return n.object=r,n;function M(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}(wk);zF.DEFAULT_UP=new Ez(0,1,0),zF.DEFAULT_MATRIX_AUTO_UPDATE=!0,zF.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var FF=new Ez,BF=new Ez,HF=new Ez,jF=new Ez,GF=new Ez,VF=new Ez,WF=new Ez,qF=new Ez,XF=new Ez,YF=new Ez,ZF=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ez,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ez,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ez;gA(this,e),this.a=t,this.b=n,this.c=r}return _A(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return FF.subVectors(this.c,this.b),BF.subVectors(this.a,this.b),.5*FF.cross(BF).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,i,a){return e.getUV(t,this.a,this.b,this.c,n,r,i,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,i=this.a,a=this.b,o=this.c;GF.subVectors(a,i),VF.subVectors(o,i),qF.subVectors(e,i);var s=GF.dot(qF),u=VF.dot(qF);if(s<=0&&u<=0)return t.copy(i);XF.subVectors(e,a);var l=GF.dot(XF),c=VF.dot(XF);if(l>=0&&c<=l)return t.copy(a);var f=s*c-l*u;if(f<=0&&s>=0&&l<=0)return n=s/(s-l),t.copy(i).addScaledVector(GF,n);YF.subVectors(e,o);var h=GF.dot(YF),d=VF.dot(YF);if(d>=0&&h<=d)return t.copy(o);var p=h*u-s*d;if(p<=0&&u>=0&&d<=0)return r=u/(u-d),t.copy(i).addScaledVector(VF,r);var v=l*d-h*c;if(v<=0&&c-l>=0&&h-d>=0)return WF.subVectors(o,a),r=(c-l)/(c-l+(h-d)),t.copy(a).addScaledVector(WF,r);var m=1/(v+p+f);return n=p*m,r=f*m,t.copy(i).addScaledVector(GF,n).addScaledVector(VF,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),FF.subVectors(e,t),r.cross(FF);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){FF.subVectors(r,t),BF.subVectors(n,t),HF.subVectors(e,t);var a=FF.dot(FF),o=FF.dot(BF),s=FF.dot(HF),u=BF.dot(BF),l=BF.dot(HF),c=a*u-o*o;if(0===c)return i.set(-2,-1,-1);var f=1/c,h=(u*s-o*l)*f,d=(a*l-o*s)*f;return i.set(1-h-d,d,h)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,jF),jF.x>=0&&jF.y>=0&&jF.x+jF.y<=1}},{key:"getUV",value:function(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,jF),s.set(0,0),s.addScaledVector(i,jF.x),s.addScaledVector(a,jF.y),s.addScaledVector(o,jF.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return FF.subVectors(n,t),BF.subVectors(e,t),FF.cross(BF).dot(r)<0}}]),e}();function KF(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var $F=0,JF=function(e){yk(n,e);var t=KF(n);function n(){var e;return gA(this,n),(e=t.call(this)).isMaterial=!0,Object.defineProperty(_k(e),"id",{value:$F++}),e.uuid=nU(),e.name="",e.type="Material",e.blending=OA,e.side=CA,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=XA,e.blendDst=YA,e.blendEquation=zA,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=rR,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=zC,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=UC,e.stencilZFail=UC,e.stencilZPass=UC,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.forceSinglePass=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return _A(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==OA&&(n.blending=this.blending),this.side!==CA&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(wk);function QF(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var eB=function(e){yk(n,e);var t=QF(n);function n(e){var r;return gA(this,n),(r=t.call(this)).isMeshBasicMaterial=!0,r.type="MeshBasicMaterial",r.color=new rz(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=uR,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(e),r}return _A(n,[{key:"copy",value:function(e){return Mz(xk(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(JF);function tB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var nB=new Ez,rB=new yU,iB=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(gA(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=r,this.usage=FC,this.updateRange={offset:0,count:-1},this.version=0}return _A(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)rB.fromBufferAttribute(this,t),rB.applyMatrix3(e),this.setXY(t,rB.x,rB.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)nB.fromBufferAttribute(this,r),nB.applyMatrix3(e),this.setXYZ(r,nB.x,nB.y,nB.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)nB.fromBufferAttribute(this,t),nB.applyMatrix4(e),this.setXYZ(t,nB.x,nB.y,nB.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)nB.fromBufferAttribute(this,t),nB.applyNormalMatrix(e),this.setXYZ(t,nB.x,nB.y,nB.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)nB.fromBufferAttribute(this,t),nB.transformDirection(e),this.setXYZ(t,nB.x,nB.y,nB.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){var t=this.array[e*this.itemSize];return this.normalized&&(t=sU(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=uU(t,this.array)),this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){var t=this.array[e*this.itemSize+1];return this.normalized&&(t=sU(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=uU(t,this.array)),this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){var t=this.array[e*this.itemSize+2];return this.normalized&&(t=sU(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=uU(t,this.array)),this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){var t=this.array[e*this.itemSize+3];return this.normalized&&(t=sU(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=uU(t,this.array)),this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=uU(t,this.array),n=uU(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=uU(t,this.array),n=uU(n,this.array),r=uU(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=uU(t,this.array),n=uU(n,this.array),r=uU(r,this.array),i=uU(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==FC&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}},{key:"copyColorsArray",value:function(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}},{key:"copyVector2sArray",value:function(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}},{key:"copyVector3sArray",value:function(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}},{key:"copyVector4sArray",value:function(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}]),e}(),aB=function(e){yk(n,e);var t=tB(n);function n(e,r,i){return gA(this,n),t.call(this,new Uint16Array(e),r,i)}return _A(n)}(iB),oB=function(e){yk(n,e);var t=tB(n);function n(e,r,i){return gA(this,n),t.call(this,new Uint32Array(e),r,i)}return _A(n)}(iB),sB=function(e){yk(n,e);var t=tB(n);function n(e,r,i){return gA(this,n),t.call(this,new Float32Array(e),r,i)}return _A(n)}(iB);function uB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var lB=0,cB=new hF,fB=new zF,hB=new Ez,dB=new Cz,pB=new Cz,vB=new Ez,mB=function(e){yk(n,e);var t=uB(n);function n(){var e;return gA(this,n),(e=t.call(this)).isBufferGeometry=!0,Object.defineProperty(_k(e),"id",{value:lB++}),e.uuid=nU(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return _A(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(xU(e)?oB:aB)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new _U).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return cB.makeRotationFromQuaternion(e),this.applyMatrix4(cB),this}},{key:"rotateX",value:function(e){return cB.makeRotationX(e),this.applyMatrix4(cB),this}},{key:"rotateY",value:function(e){return cB.makeRotationY(e),this.applyMatrix4(cB),this}},{key:"rotateZ",value:function(e){return cB.makeRotationZ(e),this.applyMatrix4(cB),this}},{key:"translate",value:function(e,t,n){return cB.makeTranslation(e,t,n),this.applyMatrix4(cB),this}},{key:"scale",value:function(e,t,n){return cB.makeScale(e,t,n),this.applyMatrix4(cB),this}},{key:"lookAt",value:function(e){return fB.lookAt(e),fB.updateMatrix(),this.applyMatrix4(fB.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(hB).negate(),this.translate(hB.x,hB.y,hB.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new sB(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Cz);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Ez(-1/0,-1/0,-1/0),new Ez(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];dB.setFromBufferAttribute(i),this.morphTargetsRelative?(vB.addVectors(this.boundingBox.min,dB.min),this.boundingBox.expandByPoint(vB),vB.addVectors(this.boundingBox.max,dB.max),this.boundingBox.expandByPoint(vB)):(this.boundingBox.expandByPoint(dB.min),this.boundingBox.expandByPoint(dB.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new Xz);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Ez,1/0);if(e){var n=this.boundingSphere.center;if(dB.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var a=t[r];pB.setFromBufferAttribute(a),this.morphTargetsRelative?(vB.addVectors(dB.min,pB.min),dB.expandByPoint(vB),vB.addVectors(dB.max,pB.max),dB.expandByPoint(vB)):(dB.expandByPoint(pB.min),dB.expandByPoint(pB.max))}dB.getCenter(n);for(var o=0,s=0,u=e.count;s<u;s++)vB.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(vB));if(t)for(var l=0,c=t.length;l<c;l++)for(var f=t[l],h=this.morphTargetsRelative,d=0,p=f.count;d<p;d++)vB.fromBufferAttribute(f,d),h&&(hB.fromBufferAttribute(e,d),vB.add(hB)),o=Math.max(o,n.distanceToSquared(vB));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,o=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new iB(new Float32Array(4*o),4));for(var s=this.getAttribute("tangent").array,u=[],l=[],c=0;c<o;c++)u[c]=new Ez,l[c]=new Ez;var f=new Ez,h=new Ez,d=new Ez,p=new yU,v=new yU,m=new yU,g=new Ez,y=new Ez,_=this.groups;0===_.length&&(_=[{start:0,count:n.length}]);for(var b=0,x=_.length;b<x;++b)for(var w=_[b],S=w.start,M=S,T=S+w.count;M<T;M+=3)I(n[M+0],n[M+1],n[M+2]);for(var E=new Ez,A=new Ez,R=new Ez,C=new Ez,k=0,P=_.length;k<P;++k)for(var L=_[k],O=L.start,D=O,N=O+L.count;D<N;D+=3)U(n[D+0]),U(n[D+1]),U(n[D+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function I(e,t,n){f.fromArray(r,3*e),h.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(a,2*e),v.fromArray(a,2*t),m.fromArray(a,2*n),h.sub(f),d.sub(f),v.sub(p),m.sub(p);var i=1/(v.x*m.y-m.x*v.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-v.y).multiplyScalar(i),y.copy(d).multiplyScalar(v.x).addScaledVector(h,-m.x).multiplyScalar(i),u[e].add(g),u[t].add(g),u[n].add(g),l[e].add(y),l[t].add(y),l[n].add(y))}function U(e){R.fromArray(i,3*e),C.copy(R);var t=u[e];E.copy(t),E.sub(R.multiplyScalar(R.dot(t))).normalize(),A.crossVectors(C,t);var n=A.dot(l[e])<0?-1:1;s[4*e]=E.x,s[4*e+1]=E.y,s[4*e+2]=E.z,s[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new iB(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new Ez,o=new Ez,s=new Ez,u=new Ez,l=new Ez,c=new Ez,f=new Ez,h=new Ez;if(e)for(var d=0,p=e.count;d<p;d+=3){var v=e.getX(d+0),m=e.getX(d+1),g=e.getX(d+2);a.fromBufferAttribute(t,v),o.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),f.subVectors(s,o),h.subVectors(a,o),f.cross(h),u.fromBufferAttribute(n,v),l.fromBufferAttribute(n,m),c.fromBufferAttribute(n,g),u.add(f),l.add(f),c.add(f),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(g,c.x,c.y,c.z)}else for(var y=0,_=t.count;y<_;y+=3)a.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),f.subVectors(s,o),h.subVectors(a,o),f.cross(h),n.setXYZ(y+0,f.x,f.y,f.z),n.setXYZ(y+1,f.x,f.y,f.z),n.setXYZ(y+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)vB.fromBufferAttribute(e,t),vB.normalize(),e.setXYZ(t,vB.x,vB.y,vB.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),o=0,s=0,u=0,l=t.length;u<l;u++){o=e.isInterleavedBufferAttribute?t[u]*e.data.stride+e.offset:t[u]*r;for(var c=0;c<r;c++)a[s++]=n[o++]}return new iB(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,i=this.attributes;for(var a in i){var o=e(i[a],r);t.setAttribute(a,o)}var s=this.morphAttributes;for(var u in s){for(var l=[],c=s[u],f=0,h=c.length;f<h;f++){var d=e(c[f],r);l.push(d)}t.morphAttributes[u]=l}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,v=0,m=p.length;v<m;v++){var g=p[v];t.addGroup(g.start,g.count,g.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var a in i){var o=i[a];e.data.attributes[a]=o.toJSON(e.data)}var s={},u=!1;for(var l in this.morphAttributes){for(var c=this.morphAttributes[l],f=[],h=0,d=c.length;h<d;h++){var p=c[h];f.push(p.toJSON(e.data))}f.length>0&&(s[l]=f,u=!0)}u&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;v.length>0&&(e.data.groups=JSON.parse(JSON.stringify(v)));var m=this.boundingSphere;return null!==m&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r){var a=r[i];this.setAttribute(i,a.clone(t))}var o=e.morphAttributes;for(var s in o){for(var u=[],l=o[s],c=0,f=l.length;c<f;c++)u.push(l[c].clone(t));this.morphAttributes[s]=u}this.morphTargetsRelative=e.morphTargetsRelative;for(var h=e.groups,d=0,p=h.length;d<p;d++){var v=h[d];this.addGroup(v.start,v.count,v.materialIndex)}var m=e.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(wk);function gB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var yB=new hF,_B=new fF,bB=new Xz,xB=new Ez,wB=new Ez,SB=new Ez,MB=new Ez,TB=new Ez,EB=new yU,AB=new yU,RB=new yU,CB=new Ez,kB=new Ez,PB=function(e){yk(n,e);var t=gB(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mB,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new eB;return gA(this,n),(e=t.call(this)).isMesh=!0,e.type="Mesh",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return _A(n,[{key:"copy",value:function(e,t){return Mz(xk(n.prototype),"copy",this).call(this,e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}},{key:"getVertexPosition",value:function(e,t){var n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);var o=this.morphTargetInfluences;if(i&&o){TB.set(0,0,0);for(var s=0,u=i.length;s<u;s++){var l=o[s],c=i[s];0!==l&&(MB.fromBufferAttribute(c,e),a?TB.addScaledVector(MB,l):TB.addScaledVector(MB.sub(t),l))}t.add(TB)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r&&(null===n.boundingSphere&&n.computeBoundingSphere(),bB.copy(n.boundingSphere),bB.applyMatrix4(i),!1!==e.ray.intersectsSphere(bB)&&(yB.copy(i).invert(),_B.copy(e.ray).applyMatrix4(yB),null===n.boundingBox||!1!==_B.intersectsBox(n.boundingBox)))){var a,o=n.index,s=n.attributes.position,u=n.attributes.uv,l=n.attributes.uv2,c=n.groups,f=n.drawRange;if(null!==o)if(Array.isArray(r))for(var h=0,d=c.length;h<d;h++)for(var p=c[h],v=r[p.materialIndex],m=Math.max(p.start,f.start),g=Math.min(o.count,Math.min(p.start+p.count,f.start+f.count));m<g;m+=3){var y=o.getX(m),_=o.getX(m+1),b=o.getX(m+2);(a=LB(this,v,e,_B,u,l,y,_,b))&&(a.faceIndex=Math.floor(m/3),a.face.materialIndex=p.materialIndex,t.push(a))}else for(var x=Math.max(0,f.start),w=Math.min(o.count,f.start+f.count);x<w;x+=3){var S=o.getX(x),M=o.getX(x+1),T=o.getX(x+2);(a=LB(this,r,e,_B,u,l,S,M,T))&&(a.faceIndex=Math.floor(x/3),t.push(a))}else if(void 0!==s)if(Array.isArray(r))for(var E=0,A=c.length;E<A;E++)for(var R=c[E],C=r[R.materialIndex],k=Math.max(R.start,f.start),P=Math.min(s.count,Math.min(R.start+R.count,f.start+f.count));k<P;k+=3){(a=LB(this,C,e,_B,u,l,k,k+1,k+2))&&(a.faceIndex=Math.floor(k/3),a.face.materialIndex=R.materialIndex,t.push(a))}else for(var L=Math.max(0,f.start),O=Math.min(s.count,f.start+f.count);L<O;L+=3){(a=LB(this,r,e,_B,u,l,L,L+1,L+2))&&(a.faceIndex=Math.floor(L/3),t.push(a))}}}}]),n}(zF);function LB(e,t,n,r,i,a,o,s,u){e.getVertexPosition(o,xB),e.getVertexPosition(s,wB),e.getVertexPosition(u,SB);var l=function(e,t,n,r,i,a,o,s){if(null===(t.side===kA?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side===CA,s)))return null;kB.copy(s),kB.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(kB);return u<n.near||u>n.far?null:{distance:u,point:kB.clone(),object:e}}(e,t,n,r,xB,wB,SB,CB);if(l){i&&(EB.fromBufferAttribute(i,o),AB.fromBufferAttribute(i,s),RB.fromBufferAttribute(i,u),l.uv=ZF.getUV(CB,xB,wB,SB,EB,AB,RB,new yU)),a&&(EB.fromBufferAttribute(a,o),AB.fromBufferAttribute(a,s),RB.fromBufferAttribute(a,u),l.uv2=ZF.getUV(CB,xB,wB,SB,EB,AB,RB,new yU));var c={a:o,b:s,c:u,normal:new Ez,materialIndex:0};ZF.getNormal(xB,wB,SB,c.normal),l.face=c}return l}function OB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var DB=function(e){yk(n,e);var t=OB(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;gA(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:r,height:i,depth:a,widthSegments:o,heightSegments:s,depthSegments:u};var l=_k(e);o=Math.floor(o),s=Math.floor(s),u=Math.floor(u);var c=[],f=[],h=[],d=[],p=0,v=0;function m(e,t,n,r,i,a,o,s,u,m,g){for(var y=a/u,_=o/m,b=a/2,x=o/2,w=s/2,S=u+1,M=m+1,T=0,E=0,A=new Ez,R=0;R<M;R++)for(var C=R*_-x,k=0;k<S;k++){var P=k*y-b;A[e]=P*r,A[t]=C*i,A[n]=w,f.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=s>0?1:-1,h.push(A.x,A.y,A.z),d.push(k/u),d.push(1-R/m),T+=1}for(var L=0;L<m;L++)for(var O=0;O<u;O++){var D=p+O+S*L,N=p+O+S*(L+1),I=p+(O+1)+S*(L+1),U=p+(O+1)+S*L;c.push(D,N,U),c.push(N,I,U),E+=6}l.addGroup(v,E,g),v+=E,p+=T}return m("z","y","x",-1,-1,a,i,r,u,s,0),m("z","y","x",1,-1,a,i,-r,u,s,1),m("x","z","y",1,1,r,a,i,o,u,2),m("x","z","y",1,-1,r,a,-i,o,u,3),m("x","y","z",1,-1,r,i,a,o,s,4),m("x","y","z",-1,-1,r,i,-a,o,s,5),e.setIndex(c),e.setAttribute("position",new sB(f,3)),e.setAttribute("normal",new sB(h,3)),e.setAttribute("uv",new sB(d,2)),e}return _A(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(mB);function NB(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function IB(e){for(var t={},n=0;n<e.length;n++){var r=NB(e[n]);for(var i in r)t[i]=r[i]}return t}function UB(e){return null===e.getRenderTarget()&&e.outputEncoding===kC?NC:IC}var zB={clone:NB,merge:IB},FB="void main(){gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}",BB="void main(){gl_FragColor=vec4(1.0,0.0,0.0,1.0);}";function HB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var jB=function(e){yk(n,e);var t=HB(n);function n(e){var r;return gA(this,n),(r=t.call(this)).isShaderMaterial=!0,r.type="ShaderMaterial",r.defines={},r.uniforms={},r.uniformsGroups=[],r.vertexShader=FB,r.fragmentShader=BB,r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&r.setValues(e),r}return _A(n,[{key:"copy",value:function(e){return Mz(xk(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=NB(e.uniforms),this.uniformsGroups=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=Mz(xk(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}]),n}(JF);function GB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var VB=function(e){yk(n,e);var t=GB(n);function n(){var e;return gA(this,n),(e=t.call(this)).isCamera=!0,e.type="Camera",e.matrixWorldInverse=new hF,e.projectionMatrix=new hF,e.projectionMatrixInverse=new hF,e}return _A(n,[{key:"copy",value:function(e,t){return Mz(xk(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){Mz(xk(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){Mz(xk(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(zF);function WB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var qB=function(e){yk(n,e);var t=WB(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return gA(this,n),(e=t.call(this)).isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=a,e.far=o,e.focus=10,e.aspect=i,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return _A(n,[{key:"copy",value:function(e,t){return Mz(xk(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*tU*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*eU*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*tU*Math.atan(Math.tan(.5*eU*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*eU*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=Mz(xk(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(VB);function XB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var YB=-90,ZB=1,KB=function(e){yk(n,e);var t=XB(n);function n(e,r,i){var a;gA(this,n),(a=t.call(this)).type="CubeCamera",a.renderTarget=i;var o=new qB(YB,ZB,e,r);o.layers=a.layers,o.up.set(0,1,0),o.lookAt(1,0,0),a.add(o);var s=new qB(YB,ZB,e,r);s.layers=a.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),a.add(s);var u=new qB(YB,ZB,e,r);u.layers=a.layers,u.up.set(0,0,-1),u.lookAt(0,1,0),a.add(u);var l=new qB(YB,ZB,e,r);l.layers=a.layers,l.up.set(0,0,1),l.lookAt(0,-1,0),a.add(l);var c=new qB(YB,ZB,e,r);c.layers=a.layers,c.up.set(0,1,0),c.lookAt(0,0,1),a.add(c);var f=new qB(YB,ZB,e,r);return f.layers=a.layers,f.up.set(0,1,0),f.lookAt(0,0,-1),a.add(f),a}return _A(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=rT(this.children,6),i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],l=r[5],c=e.getRenderTarget(),f=e.toneMapping,h=e.xr.enabled;e.toneMapping=fR,e.xr.enabled=!1;var d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=f,e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}]),n}(zF);function $B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var JB=function(e){yk(n,e);var t=$B(n);function n(e,r,i,a,o,s,u,l,c,f){var h;return gA(this,n),e=void 0!==e?e:[],r=void 0!==r?r:gR,(h=t.call(this,e,r,i,a,o,s,u,l,c,f)).isCubeTexture=!0,h.flipY=!1,h}return _A(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(lz);function QB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var eH=function(e){yk(n,e);var t=QB(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};gA(this,n),(e=t.call(this,r,r,i)).isWebGLCubeRenderTarget=!0;var a={width:r,height:r,depth:1},o=[a,a,a,a,a,a];return e.texture=new JB(o,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),e.texture.isRenderTargetTexture=!0,e.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,e.texture.minFilter=void 0!==i.minFilter?i.minFilter:RR,e}return _A(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},r="varying vec3 vWorldDirection;vec3 transformDirection(in vec3 dir,in mat4 matrix){return normalize((matrix*vec4(dir,0.0)).xyz);}void main(){vWorldDirection=transformDirection(position,modelMatrix);\n#include <begin_vertex>\n#include <project_vertex>\n}",i="uniform sampler2D tEquirect;varying vec3 vWorldDirection;\n#include <common>\nvoid main(){vec3 direction=normalize(vWorldDirection);vec2 sampleUV=equirectUv(direction);gl_FragColor=texture2D(tEquirect,sampleUV);}",a=new DB(5,5,5),o=new jB({name:"CubemapFromEquirect",uniforms:NB(n),vertexShader:r,fragmentShader:i,side:kA,blending:LA});o.uniforms.tEquirect.value=t;var s=new PB(a,o),u=t.minFilter;return t.minFilter===kR&&(t.minFilter=RR),new KB(1,10,this).update(e,s),t.minFilter=u,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var i=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}]),n}(hz),tH=new Ez,nH=new Ez,rH=new _U,iH=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ez(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;gA(this,e),this.isPlane=!0,this.normal=t,this.constant=n}return _A(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=tH.subVectors(n,t).cross(nH.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta(tH),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||rH.getNormalMatrix(e),r=this.coplanarPoint(tH).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),aH=new Xz,oH=new Ez,sH=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new iH,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new iH,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new iH,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new iH,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new iH,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new iH;gA(this,e),this.planes=[t,n,r,i,a,o]}return _A(e,[{key:"set",value:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],l=n[6],c=n[7],f=n[8],h=n[9],d=n[10],p=n[11],v=n[12],m=n[13],g=n[14],y=n[15];return t[0].setComponents(o-r,c-s,p-f,y-v).normalize(),t[1].setComponents(o+r,c+s,p+f,y+v).normalize(),t[2].setComponents(o+i,c+u,p+h,y+m).normalize(),t[3].setComponents(o-i,c-u,p-h,y-m).normalize(),t[4].setComponents(o-a,c-l,p-d,y-g).normalize(),t[5].setComponents(o+a,c+l,p+d,y+g).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),aH.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(aH)}},{key:"intersectsSprite",value:function(e){return aH.center.set(0,0,0),aH.radius=.7071067811865476,aH.applyMatrix4(e.matrixWorld),this.intersectsSphere(aH)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(oH.x=r.normal.x>0?e.max.x:e.min.x,oH.y=r.normal.y>0?e.max.y:e.min.y,oH.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(oH)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function uH(){var e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}var lH=x,cH=dd,fH=Lf.getWeakData,hH=Bh,dH=Ot,pH=P,vH=V,mH=Uh,gH=He,yH=kn.set,_H=kn.getterFor,bH=ro.find,xH=ro.findIndex,wH=lH([].splice),SH=0,MH=function(e){return e.frozen||(e.frozen=new TH)},TH=function(){this.entries=[]},EH=function(e,t){return bH(e.entries,(function(e){return e[0]===t}))};TH.prototype={get:function(e){var t=EH(this,e);if(t)return t[1]},has:function(e){return!!EH(this,e)},set:function(e,t){var n=EH(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=xH(this.entries,(function(t){return t[0]===e}));return~t&&wH(this.entries,t,1),!!~t}};var AH,RH={getConstructor:function(e,t,n,r){var i=e((function(e,i){hH(e,a),yH(e,{type:t,id:SH++,frozen:void 0}),pH(i)||mH(i,e[r],{that:e,AS_ENTRIES:n})})),a=i.prototype,o=_H(t),s=function(e,t,n){var r=o(e),i=fH(dH(t),!0);return!0===i?MH(r).set(t,n):i[r.id]=n,e};return cH(a,{delete:function(e){var t=o(this);if(!vH(e))return!1;var n=fH(e);return!0===n?MH(t).delete(e):n&&gH(n,t.id)&&delete n[t.id]},has:function(e){var t=o(this);if(!vH(e))return!1;var n=fH(e);return!0===n?MH(t).has(e):n&&gH(n,t.id)}}),cH(a,n?{get:function(e){var t=o(this);if(vH(e)){var n=fH(e);return!0===n?MH(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return s(this,e,t)}}:{add:function(e){return s(this,e,!0)}}),i}},CH=Hf,kH=n,PH=x,LH=dd,OH=Lf,DH=fd,NH=RH,IH=V,UH=kn.enforce,zH=i,FH=hn,BH=Object,HH=Array.isArray,jH=BH.isExtensible,GH=BH.isFrozen,VH=BH.isSealed,WH=BH.freeze,qH=BH.seal,XH={},YH={},ZH=!kH.ActiveXObject&&"ActiveXObject"in kH,KH=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},$H=DH("WeakMap",KH,NH),JH=$H.prototype,QH=PH(JH.set);if(FH)if(ZH){AH=NH.getConstructor(KH,"WeakMap",!0),OH.enable();var ej=PH(JH.delete),tj=PH(JH.has),nj=PH(JH.get);LH(JH,{delete:function(e){if(IH(e)&&!jH(e)){var t=UH(this);return t.frozen||(t.frozen=new AH),ej(this,e)||t.frozen.delete(e)}return ej(this,e)},has:function(e){if(IH(e)&&!jH(e)){var t=UH(this);return t.frozen||(t.frozen=new AH),tj(this,e)||t.frozen.has(e)}return tj(this,e)},get:function(e){if(IH(e)&&!jH(e)){var t=UH(this);return t.frozen||(t.frozen=new AH),tj(this,e)?nj(this,e):t.frozen.get(e)}return nj(this,e)},set:function(e,t){if(IH(e)&&!jH(e)){var n=UH(this);n.frozen||(n.frozen=new AH),tj(this,e)?QH(this,e,t):n.frozen.set(e,t)}else QH(this,e,t);return this}})}else CH&&zH((function(){var e=WH([]);return QH(new $H,e,1),!GH(e)}))&&LH(JH,{set:function(e,t){var n;return HH(e)&&(GH(e)?n=XH:VH(e)&&(n=YH)),QH(this,e,t),n==XH&&WH(e),n==YH&&qH(e),this}});function rj(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){var a=r.get(t);(!a||a.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var o=r.get(t);void 0===o?r.set(t,function(t,r){var i,a=t.array,o=t.usage,s=e.createBuffer();if(e.bindBuffer(r,s),e.bufferData(r,a,o),t.onUploadCallback(),a instanceof Float32Array)i=5126;else if(a instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");i=5131}else i=5123;else if(a instanceof Int16Array)i=5122;else if(a instanceof Uint32Array)i=5125;else if(a instanceof Int32Array)i=5124;else if(a instanceof Int8Array)i=5120;else if(a instanceof Uint8Array)i=5121;else{if(!(a instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);i=5121}return{buffer:s,type:i,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(!function(t,r,i){var a=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,a):(n?e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1),r.onUploadCallback()}(o.buffer,t,i),o.version=t.version)}}}}var ij=ze,aj=dr,oj=rf,sj=df,uj=of;function lj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}ni({target:"Array",proto:!0,arity:1,forced:1!==[].unshift(0)||!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}}()},{unshift:function(e){var t=ij(this),n=aj(t),r=arguments.length;if(r){uj(n+r);for(var i=n;i--;){var a=i+r;i in t?t[a]=t[i]:sj(t,a)}for(var o=0;o<r;o++)t[o]=arguments[o]}return oj(t,n+r)}});var cj=function(e){yk(n,e);var t=lj(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;gA(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:r,height:i,widthSegments:a,heightSegments:o};for(var s=r/2,u=i/2,l=Math.floor(a),c=Math.floor(o),f=l+1,h=c+1,d=r/l,p=i/c,v=[],m=[],g=[],y=[],_=0;_<h;_++)for(var b=_*p-u,x=0;x<f;x++){var w=x*d-s;m.push(w,-b,0),g.push(0,0,1),y.push(x/l),y.push(1-_/c)}for(var S=0;S<c;S++)for(var M=0;M<l;M++){var T=M+f*S,E=M+f*(S+1),A=M+1+f*(S+1),R=M+1+f*S;v.push(T,E,R),v.push(E,A,R)}return e.setIndex(v),e.setAttribute("position",new sB(m,3)),e.setAttribute("normal",new sB(g,3)),e.setAttribute("uv",new sB(y,2)),e}return _A(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(mB),fj={alphamap_fragment:"#ifdef USE_ALPHAMAP\ndiffuseColor.a*=texture2D(alphaMap,vUv).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\nuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\nif(diffuseColor.a<alphaTest)discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\nuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\nfloat ambientOcclusion=(texture2D(aoMap,vUv2).r-1.0)*aoMapIntensity+1.0;reflectedLight.indirectDiffuse*=ambientOcclusion;\n#if defined(USE_ENVMAP)&&defined(STANDARD)\nfloat dotNV=saturate(dot(geometry.normal,geometry.viewDir));reflectedLight.indirectSpecular*=computeSpecularOcclusion(dotNV,ambientOcclusion,material.roughness);\n#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\nuniform sampler2D aoMap;uniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed=vec3(position);",beginnormal_vertex:"vec3 objectNormal=vec3(normal);\n#ifdef USE_TANGENT\nvec3 objectTangent=vec3(tangent.xyz);\n#endif",bsdfs:"vec3 BRDF_Lambert(const in vec3 diffuseColor){return RECIPROCAL_PI*diffuseColor;}vec3 F_Schlick(const in vec3 f0,const in float f90,const in float dotVH){float fresnel=exp2((-5.55473*dotVH-6.98316)*dotVH);return f0*(1.0-fresnel)+(f90*fresnel);}float F_Schlick(const in float f0,const in float f90,const in float dotVH){float fresnel=exp2((-5.55473*dotVH-6.98316)*dotVH);return f0*(1.0-fresnel)+(f90*fresnel);}vec3 Schlick_to_F0(const in vec3 f,const in float f90,const in float dotVH){float x=clamp(1.0-dotVH,0.0,1.0);float x2=x*x;float x5=clamp(x*x2*x2,0.0,0.9999);return(f-vec3(f90)*x5)/(1.0-x5);}float V_GGX_SmithCorrelated(const in float alpha,const in float dotNL,const in float dotNV){float a2=pow2(alpha);float gv=dotNL*sqrt(a2+(1.0-a2)*pow2(dotNV));float gl=dotNV*sqrt(a2+(1.0-a2)*pow2(dotNL));return 0.5/max(gv+gl,EPSILON);}float D_GGX(const in float alpha,const in float dotNH){float a2=pow2(alpha);float denom=pow2(dotNH)*(a2-1.0)+1.0;return RECIPROCAL_PI*a2/pow2(denom);}vec3 BRDF_GGX(const in vec3 lightDir,const in vec3 viewDir,const in vec3 normal,const in vec3 f0,const in float f90,const in float roughness){float alpha=pow2(roughness);vec3 halfDir=normalize(lightDir+viewDir);float dotNL=saturate(dot(normal,lightDir));float dotNV=saturate(dot(normal,viewDir));float dotNH=saturate(dot(normal,halfDir));float dotVH=saturate(dot(viewDir,halfDir));vec3 F=F_Schlick(f0,f90,dotVH);float V=V_GGX_SmithCorrelated(alpha,dotNL,dotNV);float D=D_GGX(alpha,dotNH);return F*(V*D);}\n#ifdef USE_IRIDESCENCE\nvec3 BRDF_GGX_Iridescence(const in vec3 lightDir,const in vec3 viewDir,const in vec3 normal,const in vec3 f0,const in float f90,const in float iridescence,const in vec3 iridescenceFresnel,const in float roughness){float alpha=pow2(roughness);vec3 halfDir=normalize(lightDir+viewDir);float dotNL=saturate(dot(normal,lightDir));float dotNV=saturate(dot(normal,viewDir));float dotNH=saturate(dot(normal,halfDir));float dotVH=saturate(dot(viewDir,halfDir));vec3 F=mix(F_Schlick(f0,f90,dotVH),iridescenceFresnel,iridescence);float V=V_GGX_SmithCorrelated(alpha,dotNL,dotNV);float D=D_GGX(alpha,dotNH);return F*(V*D);}\n#endif\nvec2 LTC_Uv(const in vec3 N,const in vec3 V,const in float roughness){const float LUT_SIZE=64.0;const float LUT_SCALE=(LUT_SIZE-1.0)/LUT_SIZE;const float LUT_BIAS=0.5/LUT_SIZE;float dotNV=saturate(dot(N,V));vec2 uv=vec2(roughness,sqrt(1.0-dotNV));uv=uv*LUT_SCALE+LUT_BIAS;return uv;}float LTC_ClippedSphereFormFactor(const in vec3 f){float l=length(f);return max((l*l+f.z)/(l+1.0),0.0);}vec3 LTC_EdgeVectorFormFactor(const in vec3 v1,const in vec3 v2){float x=dot(v1,v2);float y=abs(x);float a=0.8543985+(0.4965155+0.0145206*y)*y;float b=3.4175940+(4.1616724+y)*y;float v=a/b;float theta_sintheta=(x>0.0)?v:0.5*inversesqrt(max(1.0-x*x,1e-7))-v;return cross(v1,v2)*theta_sintheta;}vec3 LTC_Evaluate(const in vec3 N,const in vec3 V,const in vec3 P,const in mat3 mInv,const in vec3 rectCoords[4]){vec3 v1=rectCoords[1]-rectCoords[0];vec3 v2=rectCoords[3]-rectCoords[0];vec3 lightNormal=cross(v1,v2);if(dot(lightNormal,P-rectCoords[0])<0.0)return vec3(0.0);vec3 T1,T2;T1=normalize(V-N*dot(V,N));T2=-cross(N,T1);mat3 mat=mInv*transposeMat3(mat3(T1,T2,N));vec3 coords[4];coords[0]=mat*(rectCoords[0]-P);coords[1]=mat*(rectCoords[1]-P);coords[2]=mat*(rectCoords[2]-P);coords[3]=mat*(rectCoords[3]-P);coords[0]=normalize(coords[0]);coords[1]=normalize(coords[1]);coords[2]=normalize(coords[2]);coords[3]=normalize(coords[3]);vec3 vectorFormFactor=vec3(0.0);vectorFormFactor+=LTC_EdgeVectorFormFactor(coords[0],coords[1]);vectorFormFactor+=LTC_EdgeVectorFormFactor(coords[1],coords[2]);vectorFormFactor+=LTC_EdgeVectorFormFactor(coords[2],coords[3]);vectorFormFactor+=LTC_EdgeVectorFormFactor(coords[3],coords[0]);float result=LTC_ClippedSphereFormFactor(vectorFormFactor);return vec3(result);}float G_BlinnPhong_Implicit(){return 0.25;}float D_BlinnPhong(const in float shininess,const in float dotNH){return RECIPROCAL_PI*(shininess*0.5+1.0)*pow(dotNH,shininess);}vec3 BRDF_BlinnPhong(const in vec3 lightDir,const in vec3 viewDir,const in vec3 normal,const in vec3 specularColor,const in float shininess){vec3 halfDir=normalize(lightDir+viewDir);float dotNH=saturate(dot(normal,halfDir));float dotVH=saturate(dot(viewDir,halfDir));vec3 F=F_Schlick(specularColor,1.0,dotVH);float G=G_BlinnPhong_Implicit();float D=D_BlinnPhong(shininess,dotNH);return F*(G*D);}\n#if defined(USE_SHEEN)\nfloat D_Charlie(float roughness,float dotNH){float alpha=pow2(roughness);float invAlpha=1.0/alpha;float cos2h=dotNH*dotNH;float sin2h=max(1.0-cos2h,0.0078125);return(2.0+invAlpha)*pow(sin2h,invAlpha*0.5)/(2.0*PI);}float V_Neubelt(float dotNV,float dotNL){return saturate(1.0/(4.0*(dotNL+dotNV-dotNL*dotNV)));}vec3 BRDF_Sheen(const in vec3 lightDir,const in vec3 viewDir,const in vec3 normal,vec3 sheenColor,const in float sheenRoughness){vec3 halfDir=normalize(lightDir+viewDir);float dotNL=saturate(dot(normal,lightDir));float dotNV=saturate(dot(normal,viewDir));float dotNH=saturate(dot(normal,halfDir));float D=D_Charlie(sheenRoughness,dotNH);float V=V_Neubelt(dotNV,dotNL);return sheenColor*(D*V);}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\nconst mat3 XYZ_TO_REC709=mat3(3.2404542,-0.9692660,0.0556434,-1.5371385,1.8760108,-0.2040259,-0.4985314,0.0415560,1.0572252);vec3 Fresnel0ToIor(vec3 fresnel0){vec3 sqrtF0=sqrt(fresnel0);return(vec3(1.0)+sqrtF0)/(vec3(1.0)-sqrtF0);}vec3 IorToFresnel0(vec3 transmittedIor,float incidentIor){return pow2((transmittedIor-vec3(incidentIor))/(transmittedIor+vec3(incidentIor)));}float IorToFresnel0(float transmittedIor,float incidentIor){return pow2((transmittedIor-incidentIor)/(transmittedIor+incidentIor));}vec3 evalSensitivity(float OPD,vec3 shift){float phase=2.0*PI*OPD*1.0e-9;vec3 val=vec3(5.4856e-13,4.4201e-13,5.2481e-13);vec3 pos=vec3(1.6810e+06,1.7953e+06,2.2084e+06);vec3 var=vec3(4.3278e+09,9.3046e+09,6.6121e+09);vec3 xyz=val*sqrt(2.0*PI*var)*cos(pos*phase+shift)*exp(-pow2(phase)*var);xyz.x+=9.7470e-14*sqrt(2.0*PI*4.5282e+09)*cos(2.2399e+06*phase+shift[0])*exp(-4.5282e+09*pow2(phase));xyz/=1.0685e-7;vec3 rgb=XYZ_TO_REC709*xyz;return rgb;}vec3 evalIridescence(float outsideIOR,float eta2,float cosTheta1,float thinFilmThickness,vec3 baseF0){vec3 I;float iridescenceIOR=mix(outsideIOR,eta2,smoothstep(0.0,0.03,thinFilmThickness));float sinTheta2Sq=pow2(outsideIOR/iridescenceIOR)*(1.0-pow2(cosTheta1));float cosTheta2Sq=1.0-sinTheta2Sq;if(cosTheta2Sq<0.0){return vec3(1.0);}float cosTheta2=sqrt(cosTheta2Sq);float R0=IorToFresnel0(iridescenceIOR,outsideIOR);float R12=F_Schlick(R0,1.0,cosTheta1);float R21=R12;float T121=1.0-R12;float phi12=0.0;if(iridescenceIOR<outsideIOR)phi12=PI;float phi21=PI-phi12;vec3 baseIOR=Fresnel0ToIor(clamp(baseF0,0.0,0.9999));vec3 R1=IorToFresnel0(baseIOR,iridescenceIOR);vec3 R23=F_Schlick(R1,1.0,cosTheta2);vec3 phi23=vec3(0.0);if(baseIOR[0]<iridescenceIOR)phi23[0]=PI;if(baseIOR[1]<iridescenceIOR)phi23[1]=PI;if(baseIOR[2]<iridescenceIOR)phi23[2]=PI;float OPD=2.0*iridescenceIOR*thinFilmThickness*cosTheta2;vec3 phi=vec3(phi21)+phi23;vec3 R123=clamp(R12*R23,1e-5,0.9999);vec3 r123=sqrt(R123);vec3 Rs=pow2(T121)*R23/(vec3(1.0)-R123);vec3 C0=R12+Rs;I=C0;vec3 Cm=Rs-T121;for(int m=1;m<=2;++m){Cm*=r123;vec3 Sm=2.0*evalSensitivity(float(m)*OPD,float(m)*phi);I+=Cm*Sm;}return max(I,vec3(0.0));}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\nuniform sampler2D bumpMap;uniform float bumpScale;vec2 dHdxy_fwd(){vec2 dSTdx=dFdx(vUv);vec2 dSTdy=dFdy(vUv);float Hll=bumpScale*texture2D(bumpMap,vUv).x;float dBx=bumpScale*texture2D(bumpMap,vUv+dSTdx).x-Hll;float dBy=bumpScale*texture2D(bumpMap,vUv+dSTdy).x-Hll;return vec2(dBx,dBy);}vec3 perturbNormalArb(vec3 surf_pos,vec3 surf_norm,vec2 dHdxy,float faceDirection){vec3 vSigmaX=dFdx(surf_pos.xyz);vec3 vSigmaY=dFdy(surf_pos.xyz);vec3 vN=surf_norm;vec3 R1=cross(vSigmaY,vN);vec3 R2=cross(vN,vSigmaX);float fDet=dot(vSigmaX,R1)*faceDirection;vec3 vGrad=sign(fDet)*(dHdxy.x*R1+dHdxy.y*R2);return normalize(abs(fDet)*surf_norm-vGrad);}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES>0\nvec4 plane;\n#pragma unroll_loop_start\nfor(int i=0;i<UNION_CLIPPING_PLANES;i++){plane=clippingPlanes[i];if(dot(vClipPosition,plane.xyz)>plane.w)discard;}\n#pragma unroll_loop_end\n#if UNION_CLIPPING_PLANES<NUM_CLIPPING_PLANES\nbool clipped=true;\n#pragma unroll_loop_start\nfor(int i=UNION_CLIPPING_PLANES;i<NUM_CLIPPING_PLANES;i++){plane=clippingPlanes[i];clipped=(dot(vClipPosition,plane.xyz)>plane.w)&&clipped;}\n#pragma unroll_loop_end\nif(clipped)discard;\n#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES>0\nvarying vec3 vClipPosition;uniform vec4 clippingPlanes[NUM_CLIPPING_PLANES];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES>0\nvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES>0\nvClipPosition=-mvPosition.xyz;\n#endif",color_fragment:"#if defined(USE_COLOR_ALPHA)\ndiffuseColor*=vColor;\n#elif defined(USE_COLOR)\ndiffuseColor.rgb*=vColor;\n#endif",color_pars_fragment:"#if defined(USE_COLOR_ALPHA)\nvarying vec4 vColor;\n#elif defined(USE_COLOR)\nvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined(USE_COLOR_ALPHA)\nvarying vec4 vColor;\n#elif defined(USE_COLOR)||defined(USE_INSTANCING_COLOR)\nvarying vec3 vColor;\n#endif",color_vertex:"#if defined(USE_COLOR_ALPHA)\nvColor=vec4(1.0);\n#elif defined(USE_COLOR)||defined(USE_INSTANCING_COLOR)\nvColor=vec3(1.0);\n#endif\n#ifdef USE_COLOR\nvColor*=color;\n#endif\n#ifdef USE_INSTANCING_COLOR\nvColor.xyz*=instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a)clamp(a,0.0,1.0)\n#endif\n#define whiteComplement(a)(1.0-saturate(a))\nfloat pow2(const in float x){return x*x;}vec3 pow2(const in vec3 x){return x*x;}float pow3(const in float x){return x*x*x;}float pow4(const in float x){float x2=x*x;return x2*x2;}float max3(const in vec3 v){return max(max(v.x,v.y),v.z);}float average(const in vec3 v){return dot(v,vec3(0.3333333));}highp float rand(const in vec2 uv){const highp float a=12.9898,b=78.233,c=43758.5453;highp float dt=dot(uv.xy,vec2(a,b)),sn=mod(dt,PI);return fract(sin(sn)*c);}\n#ifdef HIGH_PRECISION\nfloat precisionSafeLength(vec3 v){return length(v);}\n#else\nfloat precisionSafeLength(vec3 v){float maxComponent=max3(abs(v));return length(v/maxComponent)*maxComponent;}\n#endif\nstruct IncidentLight{vec3 color;vec3 direction;bool visible;};struct ReflectedLight{vec3 directDiffuse;vec3 directSpecular;vec3 indirectDiffuse;vec3 indirectSpecular;};struct GeometricContext{vec3 position;vec3 normal;vec3 viewDir;\n#ifdef USE_CLEARCOAT\nvec3 clearcoatNormal;\n#endif\n};vec3 transformDirection(in vec3 dir,in mat4 matrix){return normalize((matrix*vec4(dir,0.0)).xyz);}vec3 inverseTransformDirection(in vec3 dir,in mat4 matrix){return normalize((vec4(dir,0.0)*matrix).xyz);}mat3 transposeMat3(const in mat3 m){mat3 tmp;tmp[0]=vec3(m[0].x,m[1].x,m[2].x);tmp[1]=vec3(m[0].y,m[1].y,m[2].y);tmp[2]=vec3(m[0].z,m[1].z,m[2].z);return tmp;}float luminance(const in vec3 rgb){const vec3 weights=vec3(0.2126729,0.7151522,0.0721750);return dot(weights,rgb);}bool isPerspectiveMatrix(mat4 m){return m[2][3]==-1.0;}vec2 equirectUv(in vec3 dir){float u=atan(dir.z,dir.x)*RECIPROCAL_PI2+0.5;float v=asin(clamp(dir.y,-1.0,1.0))*RECIPROCAL_PI+0.5;return vec2(u,v);}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction){vec3 absDirection=abs(direction);float face=-1.0;if(absDirection.x>absDirection.z){if(absDirection.x>absDirection.y)face=direction.x>0.0?0.0:3.0;else face=direction.y>0.0?1.0:4.0;}else{if(absDirection.z>absDirection.y)face=direction.z>0.0?2.0:5.0;else face=direction.y>0.0?1.0:4.0;}return face;}vec2 getUV(vec3 direction,float face){vec2 uv;if(face==0.0){uv=vec2(direction.z,direction.y)/abs(direction.x);}else if(face==1.0){uv=vec2(-direction.x,-direction.z)/abs(direction.y);}else if(face==2.0){uv=vec2(-direction.x,direction.y)/abs(direction.z);}else if(face==3.0){uv=vec2(-direction.z,direction.y)/abs(direction.x);}else if(face==4.0){uv=vec2(-direction.x,direction.z)/abs(direction.y);}else{uv=vec2(direction.x,direction.y)/abs(direction.z);}return 0.5*(uv+1.0);}vec3 bilinearCubeUV(sampler2D envMap,vec3 direction,float mipInt){float face=getFace(direction);float filterInt=max(cubeUV_minMipLevel-mipInt,0.0);mipInt=max(mipInt,cubeUV_minMipLevel);float faceSize=exp2(mipInt);highp vec2 uv=getUV(direction,face)*(faceSize-2.0)+1.0;if(face>2.0){uv.y+=faceSize;face-=3.0;}uv.x+=face*faceSize;uv.x+=filterInt*3.0*cubeUV_minTileSize;uv.y+=4.0*(exp2(CUBEUV_MAX_MIP)-faceSize);uv.x*=CUBEUV_TEXEL_WIDTH;uv.y*=CUBEUV_TEXEL_HEIGHT;\n#ifdef texture2DGradEXT\nreturn texture2DGradEXT(envMap,uv,vec2(0.0),vec2(0.0)).rgb;\n#else\nreturn texture2D(envMap,uv).rgb;\n#endif\n}\n#define cubeUV_r0 1.0\n#define cubeUV_v0 0.339\n#define cubeUV_m0-2.0\n#define cubeUV_r1 0.8\n#define cubeUV_v1 0.276\n#define cubeUV_m1-1.0\n#define cubeUV_r4 0.4\n#define cubeUV_v4 0.046\n#define cubeUV_m4 2.0\n#define cubeUV_r5 0.305\n#define cubeUV_v5 0.016\n#define cubeUV_m5 3.0\n#define cubeUV_r6 0.21\n#define cubeUV_v6 0.0038\n#define cubeUV_m6 4.0\nfloat roughnessToMip(float roughness){float mip=0.0;if(roughness>=cubeUV_r1){mip=(cubeUV_r0-roughness)*(cubeUV_m1-cubeUV_m0)/(cubeUV_r0-cubeUV_r1)+cubeUV_m0;}else if(roughness>=cubeUV_r4){mip=(cubeUV_r1-roughness)*(cubeUV_m4-cubeUV_m1)/(cubeUV_r1-cubeUV_r4)+cubeUV_m1;}else if(roughness>=cubeUV_r5){mip=(cubeUV_r4-roughness)*(cubeUV_m5-cubeUV_m4)/(cubeUV_r4-cubeUV_r5)+cubeUV_m4;}else if(roughness>=cubeUV_r6){mip=(cubeUV_r5-roughness)*(cubeUV_m6-cubeUV_m5)/(cubeUV_r5-cubeUV_r6)+cubeUV_m5;}else{mip=-2.0*log2(1.16*roughness);}return mip;}vec4 textureCubeUV(sampler2D envMap,vec3 sampleDir,float roughness){float mip=clamp(roughnessToMip(roughness),cubeUV_m0,CUBEUV_MAX_MIP);float mipF=fract(mip);float mipInt=floor(mip);vec3 color0=bilinearCubeUV(envMap,sampleDir,mipInt);if(mipF==0.0){return vec4(color0,1.0);}else{vec3 color1=bilinearCubeUV(envMap,sampleDir,mipInt+1.0);return vec4(mix(color0,color1,mipF),1.0);}}\n#endif",defaultnormal_vertex:"vec3 transformedNormal=objectNormal;\n#ifdef USE_INSTANCING\nmat3 m=mat3(instanceMatrix);transformedNormal/=vec3(dot(m[0],m[0]),dot(m[1],m[1]),dot(m[2],m[2]));transformedNormal=m*transformedNormal;\n#endif\ntransformedNormal=normalMatrix*transformedNormal;\n#ifdef FLIP_SIDED\ntransformedNormal=-transformedNormal;\n#endif\n#ifdef USE_TANGENT\nvec3 transformedTangent=(modelViewMatrix*vec4(objectTangent,0.0)).xyz;\n#ifdef FLIP_SIDED\ntransformedTangent=-transformedTangent;\n#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\nuniform sampler2D displacementMap;uniform float displacementScale;uniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\ntransformed+=normalize(objectNormal)*(texture2D(displacementMap,vUv).x*displacementScale+displacementBias);\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\nvec4 emissiveColor=texture2D(emissiveMap,vUv);totalEmissiveRadiance*=emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\nuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor=linearToOutputTexel(gl_FragColor);",encodings_pars_fragment:"vec4 LinearToLinear(in vec4 value){return value;}vec4 LinearTosRGB(in vec4 value){return vec4(mix(pow(value.rgb,vec3(0.41666))*1.055-vec3(0.055),value.rgb*12.92,vec3(lessThanEqual(value.rgb,vec3(0.0031308)))),value.a);}",envmap_fragment:"#ifdef USE_ENVMAP\n#ifdef ENV_WORLDPOS\nvec3 cameraToFrag;if(isOrthographic){cameraToFrag=normalize(vec3(-viewMatrix[0][2],-viewMatrix[1][2],-viewMatrix[2][2]));}else{cameraToFrag=normalize(vWorldPosition-cameraPosition);}vec3 worldNormal=inverseTransformDirection(normal,viewMatrix);\n#ifdef ENVMAP_MODE_REFLECTION\nvec3 reflectVec=reflect(cameraToFrag,worldNormal);\n#else\nvec3 reflectVec=refract(cameraToFrag,worldNormal,refractionRatio);\n#endif\n#else\nvec3 reflectVec=vReflect;\n#endif\n#ifdef ENVMAP_TYPE_CUBE\nvec4 envColor=textureCube(envMap,vec3(flipEnvMap*reflectVec.x,reflectVec.yz));\n#else\nvec4 envColor=vec4(0.0);\n#endif\n#ifdef ENVMAP_BLENDING_MULTIPLY\noutgoingLight=mix(outgoingLight,outgoingLight*envColor.xyz,specularStrength*reflectivity);\n#elif defined(ENVMAP_BLENDING_MIX)\noutgoingLight=mix(outgoingLight,envColor.xyz,specularStrength*reflectivity);\n#elif defined(ENVMAP_BLENDING_ADD)\noutgoingLight+=envColor.xyz*specularStrength*reflectivity;\n#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\nuniform float envMapIntensity;uniform float flipEnvMap;\n#ifdef ENVMAP_TYPE_CUBE\nuniform samplerCube envMap;\n#else\nuniform sampler2D envMap;\n#endif\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\nuniform float reflectivity;\n#if defined(USE_BUMPMAP)||defined(USE_NORMALMAP)||defined(PHONG)||defined(LAMBERT)\n#define ENV_WORLDPOS\n#endif\n#ifdef ENV_WORLDPOS\nvarying vec3 vWorldPosition;uniform float refractionRatio;\n#else\nvarying vec3 vReflect;\n#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n#if defined(USE_BUMPMAP)||defined(USE_NORMALMAP)||defined(PHONG)||defined(LAMBERT)\n#define ENV_WORLDPOS\n#endif\n#ifdef ENV_WORLDPOS\nvarying vec3 vWorldPosition;\n#else\nvarying vec3 vReflect;uniform float refractionRatio;\n#endif\n#endif",envmap_physical_pars_fragment:"#if defined(USE_ENVMAP)\nvec3 getIBLIrradiance(const in vec3 normal){\n#if defined(ENVMAP_TYPE_CUBE_UV)\nvec3 worldNormal=inverseTransformDirection(normal,viewMatrix);vec4 envMapColor=textureCubeUV(envMap,worldNormal,1.0);return PI*envMapColor.rgb*envMapIntensity;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 getIBLRadiance(const in vec3 viewDir,const in vec3 normal,const in float roughness){\n#if defined(ENVMAP_TYPE_CUBE_UV)\nvec3 reflectVec=reflect(-viewDir,normal);reflectVec=normalize(mix(reflectVec,normal,roughness*roughness));reflectVec=inverseTransformDirection(reflectVec,viewMatrix);vec4 envMapColor=textureCubeUV(envMap,reflectVec,roughness);return envMapColor.rgb*envMapIntensity;\n#else\nreturn vec3(0.0);\n#endif\n}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n#ifdef ENV_WORLDPOS\nvWorldPosition=worldPosition.xyz;\n#else\nvec3 cameraToVertex;if(isOrthographic){cameraToVertex=normalize(vec3(-viewMatrix[0][2],-viewMatrix[1][2],-viewMatrix[2][2]));}else{cameraToVertex=normalize(worldPosition.xyz-cameraPosition);}vec3 worldNormal=inverseTransformDirection(transformedNormal,viewMatrix);\n#ifdef ENVMAP_MODE_REFLECTION\nvReflect=reflect(cameraToVertex,worldNormal);\n#else\nvReflect=refract(cameraToVertex,worldNormal,refractionRatio);\n#endif\n#endif\n#endif",fog_vertex:"#ifdef USE_FOG\nvFogDepth=-mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\nvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n#ifdef FOG_EXP2\nfloat fogFactor=1.0-exp(-fogDensity*fogDensity*vFogDepth*vFogDepth);\n#else\nfloat fogFactor=smoothstep(fogNear,fogFar,vFogDepth);\n#endif\ngl_FragColor.rgb=mix(gl_FragColor.rgb,fogColor,fogFactor);\n#endif",fog_pars_fragment:"#ifdef USE_FOG\nuniform vec3 fogColor;varying float vFogDepth;\n#ifdef FOG_EXP2\nuniform float fogDensity;\n#else\nuniform float fogNear;uniform float fogFar;\n#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\nuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance(vec3 normal,vec3 lightDirection){float dotNL=dot(normal,lightDirection);vec2 coord=vec2(dotNL*0.5+0.5,0.0);\n#ifdef USE_GRADIENTMAP\nreturn vec3(texture2D(gradientMap,coord).r);\n#else\nvec2 fw=fwidth(coord)*0.5;return mix(vec3(0.7),vec3(1.0),smoothstep(0.7-fw.x,0.7+fw.x,coord.x));\n#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\nvec4 lightMapTexel=texture2D(lightMap,vUv2);vec3 lightMapIrradiance=lightMapTexel.rgb*lightMapIntensity;reflectedLight.indirectDiffuse+=lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\nuniform sampler2D lightMap;uniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;material.diffuseColor=diffuseColor.rgb;material.specularStrength=specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;struct LambertMaterial{vec3 diffuseColor;float specularStrength;};void RE_Direct_Lambert(const in IncidentLight directLight,const in GeometricContext geometry,const in LambertMaterial material,inout ReflectedLight reflectedLight){float dotNL=saturate(dot(geometry.normal,directLight.direction));vec3 irradiance=dotNL*directLight.color;reflectedLight.directDiffuse+=irradiance*BRDF_Lambert(material.diffuseColor);}void RE_IndirectDiffuse_Lambert(const in vec3 irradiance,const in GeometricContext geometry,const in LambertMaterial material,inout ReflectedLight reflectedLight){reflectedLight.indirectDiffuse+=irradiance*BRDF_Lambert(material.diffuseColor);}\n#define RE_Direct RE_Direct_Lambert\n#define RE_IndirectDiffuse RE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;uniform vec3 ambientLightColor;uniform vec3 lightProbe[9];vec3 shGetIrradianceAt(in vec3 normal,in vec3 shCoefficients[9]){float x=normal.x,y=normal.y,z=normal.z;vec3 result=shCoefficients[0]*0.886227;result+=shCoefficients[1]*2.0*0.511664*y;result+=shCoefficients[2]*2.0*0.511664*z;result+=shCoefficients[3]*2.0*0.511664*x;result+=shCoefficients[4]*2.0*0.429043*x*y;result+=shCoefficients[5]*2.0*0.429043*y*z;result+=shCoefficients[6]*(0.743125*z*z-0.247708);result+=shCoefficients[7]*2.0*0.429043*x*z;result+=shCoefficients[8]*0.429043*(x*x-y*y);return result;}vec3 getLightProbeIrradiance(const in vec3 lightProbe[9],const in vec3 normal){vec3 worldNormal=inverseTransformDirection(normal,viewMatrix);vec3 irradiance=shGetIrradianceAt(worldNormal,lightProbe);return irradiance;}vec3 getAmbientLightIrradiance(const in vec3 ambientLightColor){vec3 irradiance=ambientLightColor;return irradiance;}float getDistanceAttenuation(const in float lightDistance,const in float cutoffDistance,const in float decayExponent){\n#if defined(PHYSICALLY_CORRECT_LIGHTS)\nfloat distanceFalloff=1.0/max(pow(lightDistance,decayExponent),0.01);if(cutoffDistance>0.0){distanceFalloff*=pow2(saturate(1.0-pow4(lightDistance/cutoffDistance)));}return distanceFalloff;\n#else\nif(cutoffDistance>0.0&&decayExponent>0.0){return pow(saturate(-lightDistance/cutoffDistance+1.0),decayExponent);}return 1.0;\n#endif\n}float getSpotAttenuation(const in float coneCosine,const in float penumbraCosine,const in float angleCosine){return smoothstep(coneCosine,penumbraCosine,angleCosine);}\n#if NUM_DIR_LIGHTS>0\nstruct DirectionalLight{vec3 direction;vec3 color;};uniform DirectionalLight directionalLights[NUM_DIR_LIGHTS];void getDirectionalLightInfo(const in DirectionalLight directionalLight,const in GeometricContext geometry,out IncidentLight light){light.color=directionalLight.color;light.direction=directionalLight.direction;light.visible=true;}\n#endif\n#if NUM_POINT_LIGHTS>0\nstruct PointLight{vec3 position;vec3 color;float distance;float decay;};uniform PointLight pointLights[NUM_POINT_LIGHTS];void getPointLightInfo(const in PointLight pointLight,const in GeometricContext geometry,out IncidentLight light){vec3 lVector=pointLight.position-geometry.position;light.direction=normalize(lVector);float lightDistance=length(lVector);light.color=pointLight.color;light.color*=getDistanceAttenuation(lightDistance,pointLight.distance,pointLight.decay);light.visible=(light.color!=vec3(0.0));}\n#endif\n#if NUM_SPOT_LIGHTS>0\nstruct SpotLight{vec3 position;vec3 direction;vec3 color;float distance;float decay;float coneCos;float penumbraCos;};uniform SpotLight spotLights[NUM_SPOT_LIGHTS];void getSpotLightInfo(const in SpotLight spotLight,const in GeometricContext geometry,out IncidentLight light){vec3 lVector=spotLight.position-geometry.position;light.direction=normalize(lVector);float angleCos=dot(light.direction,spotLight.direction);float spotAttenuation=getSpotAttenuation(spotLight.coneCos,spotLight.penumbraCos,angleCos);if(spotAttenuation>0.0){float lightDistance=length(lVector);light.color=spotLight.color*spotAttenuation;light.color*=getDistanceAttenuation(lightDistance,spotLight.distance,spotLight.decay);light.visible=(light.color!=vec3(0.0));}else{light.color=vec3(0.0);light.visible=false;}}\n#endif\n#if NUM_RECT_AREA_LIGHTS>0\nstruct RectAreaLight{vec3 color;vec3 position;vec3 halfWidth;vec3 halfHeight;};uniform sampler2D ltc_1;uniform sampler2D ltc_2;uniform RectAreaLight rectAreaLights[NUM_RECT_AREA_LIGHTS];\n#endif\n#if NUM_HEMI_LIGHTS>0\nstruct HemisphereLight{vec3 direction;vec3 skyColor;vec3 groundColor;};uniform HemisphereLight hemisphereLights[NUM_HEMI_LIGHTS];vec3 getHemisphereLightIrradiance(const in HemisphereLight hemiLight,const in vec3 normal){float dotNL=dot(normal,hemiLight.direction);float hemiDiffuseWeight=0.5*dotNL+0.5;vec3 irradiance=mix(hemiLight.groundColor,hemiLight.skyColor,hemiDiffuseWeight);return irradiance;}\n#endif",lights_toon_fragment:"ToonMaterial material;material.diffuseColor=diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;struct ToonMaterial{vec3 diffuseColor;};void RE_Direct_Toon(const in IncidentLight directLight,const in GeometricContext geometry,const in ToonMaterial material,inout ReflectedLight reflectedLight){vec3 irradiance=getGradientIrradiance(geometry.normal,directLight.direction)*directLight.color;reflectedLight.directDiffuse+=irradiance*BRDF_Lambert(material.diffuseColor);}void RE_IndirectDiffuse_Toon(const in vec3 irradiance,const in GeometricContext geometry,const in ToonMaterial material,inout ReflectedLight reflectedLight){reflectedLight.indirectDiffuse+=irradiance*BRDF_Lambert(material.diffuseColor);}\n#define RE_Direct RE_Direct_Toon\n#define RE_IndirectDiffuse RE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;material.diffuseColor=diffuseColor.rgb;material.specularColor=specular;material.specularShininess=shininess;material.specularStrength=specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;struct BlinnPhongMaterial{vec3 diffuseColor;vec3 specularColor;float specularShininess;float specularStrength;};void RE_Direct_BlinnPhong(const in IncidentLight directLight,const in GeometricContext geometry,const in BlinnPhongMaterial material,inout ReflectedLight reflectedLight){float dotNL=saturate(dot(geometry.normal,directLight.direction));vec3 irradiance=dotNL*directLight.color;reflectedLight.directDiffuse+=irradiance*BRDF_Lambert(material.diffuseColor);reflectedLight.directSpecular+=irradiance*BRDF_BlinnPhong(directLight.direction,geometry.viewDir,geometry.normal,material.specularColor,material.specularShininess)*material.specularStrength;}void RE_IndirectDiffuse_BlinnPhong(const in vec3 irradiance,const in GeometricContext geometry,const in BlinnPhongMaterial material,inout ReflectedLight reflectedLight){reflectedLight.indirectDiffuse+=irradiance*BRDF_Lambert(material.diffuseColor);}\n#define RE_Direct RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse RE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;material.diffuseColor=diffuseColor.rgb*(1.0-metalnessFactor);vec3 dxy=max(abs(dFdx(geometryNormal)),abs(dFdy(geometryNormal)));float geometryRoughness=max(max(dxy.x,dxy.y),dxy.z);material.roughness=max(roughnessFactor,0.0525);material.roughness+=geometryRoughness;material.roughness=min(material.roughness,1.0);\n#ifdef IOR\nmaterial.ior=ior;\n#ifdef SPECULAR\nfloat specularIntensityFactor=specularIntensity;vec3 specularColorFactor=specularColor;\n#ifdef USE_SPECULARINTENSITYMAP\nspecularIntensityFactor*=texture2D(specularIntensityMap,vUv).a;\n#endif\n#ifdef USE_SPECULARCOLORMAP\nspecularColorFactor*=texture2D(specularColorMap,vUv).rgb;\n#endif\nmaterial.specularF90=mix(specularIntensityFactor,1.0,metalnessFactor);\n#else\nfloat specularIntensityFactor=1.0;vec3 specularColorFactor=vec3(1.0);material.specularF90=1.0;\n#endif\nmaterial.specularColor=mix(min(pow2((material.ior-1.0)/(material.ior+1.0))*specularColorFactor,vec3(1.0))*specularIntensityFactor,diffuseColor.rgb,metalnessFactor);\n#else\nmaterial.specularColor=mix(vec3(0.04),diffuseColor.rgb,metalnessFactor);material.specularF90=1.0;\n#endif\n#ifdef USE_CLEARCOAT\nmaterial.clearcoat=clearcoat;material.clearcoatRoughness=clearcoatRoughness;material.clearcoatF0=vec3(0.04);material.clearcoatF90=1.0;\n#ifdef USE_CLEARCOATMAP\nmaterial.clearcoat*=texture2D(clearcoatMap,vUv).x;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\nmaterial.clearcoatRoughness*=texture2D(clearcoatRoughnessMap,vUv).y;\n#endif\nmaterial.clearcoat=saturate(material.clearcoat);material.clearcoatRoughness=max(material.clearcoatRoughness,0.0525);material.clearcoatRoughness+=geometryRoughness;material.clearcoatRoughness=min(material.clearcoatRoughness,1.0);\n#endif\n#ifdef USE_IRIDESCENCE\nmaterial.iridescence=iridescence;material.iridescenceIOR=iridescenceIOR;\n#ifdef USE_IRIDESCENCEMAP\nmaterial.iridescence*=texture2D(iridescenceMap,vUv).r;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\nmaterial.iridescenceThickness=(iridescenceThicknessMaximum-iridescenceThicknessMinimum)*texture2D(iridescenceThicknessMap,vUv).g+iridescenceThicknessMinimum;\n#else\nmaterial.iridescenceThickness=iridescenceThicknessMaximum;\n#endif\n#endif\n#ifdef USE_SHEEN\nmaterial.sheenColor=sheenColor;\n#ifdef USE_SHEENCOLORMAP\nmaterial.sheenColor*=texture2D(sheenColorMap,vUv).rgb;\n#endif\nmaterial.sheenRoughness=clamp(sheenRoughness,0.07,1.0);\n#ifdef USE_SHEENROUGHNESSMAP\nmaterial.sheenRoughness*=texture2D(sheenRoughnessMap,vUv).a;\n#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial{vec3 diffuseColor;float roughness;vec3 specularColor;float specularF90;\n#ifdef USE_CLEARCOAT\nfloat clearcoat;float clearcoatRoughness;vec3 clearcoatF0;float clearcoatF90;\n#endif\n#ifdef USE_IRIDESCENCE\nfloat iridescence;float iridescenceIOR;float iridescenceThickness;vec3 iridescenceFresnel;vec3 iridescenceF0;\n#endif\n#ifdef USE_SHEEN\nvec3 sheenColor;float sheenRoughness;\n#endif\n#ifdef IOR\nfloat ior;\n#endif\n#ifdef USE_TRANSMISSION\nfloat transmission;float transmissionAlpha;float thickness;float attenuationDistance;vec3 attenuationColor;\n#endif\n};vec3 clearcoatSpecular=vec3(0.0);vec3 sheenSpecular=vec3(0.0);float IBLSheenBRDF(const in vec3 normal,const in vec3 viewDir,const in float roughness){float dotNV=saturate(dot(normal,viewDir));float r2=roughness*roughness;float a=roughness<0.25?-339.2*r2+161.4*roughness-25.9:-8.48*r2+14.3*roughness-9.95;float b=roughness<0.25?44.0*r2-23.7*roughness+3.26:1.97*r2-3.27*roughness+0.72;float DG=exp(a*dotNV+b)+(roughness<0.25?0.0:0.1*(roughness-0.25));return saturate(DG*RECIPROCAL_PI);}vec2 DFGApprox(const in vec3 normal,const in vec3 viewDir,const in float roughness){float dotNV=saturate(dot(normal,viewDir));const vec4 c0=vec4(-1,-0.0275,-0.572,0.022);const vec4 c1=vec4(1,0.0425,1.04,-0.04);vec4 r=roughness*c0+c1;float a004=min(r.x*r.x,exp2(-9.28*dotNV))*r.x+r.y;vec2 fab=vec2(-1.04,1.04)*a004+r.zw;return fab;}vec3 EnvironmentBRDF(const in vec3 normal,const in vec3 viewDir,const in vec3 specularColor,const in float specularF90,const in float roughness){vec2 fab=DFGApprox(normal,viewDir,roughness);return specularColor*fab.x+specularF90*fab.y;}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence(const in vec3 normal,const in vec3 viewDir,const in vec3 specularColor,const in float specularF90,const in float iridescence,const in vec3 iridescenceF0,const in float roughness,inout vec3 singleScatter,inout vec3 multiScatter){\n#else\nvoid computeMultiscattering(const in vec3 normal,const in vec3 viewDir,const in vec3 specularColor,const in float specularF90,const in float roughness,inout vec3 singleScatter,inout vec3 multiScatter){\n#endif\nvec2 fab=DFGApprox(normal,viewDir,roughness);\n#ifdef USE_IRIDESCENCE\nvec3 Fr=mix(specularColor,iridescenceF0,iridescence);\n#else\nvec3 Fr=specularColor;\n#endif\nvec3 FssEss=Fr*fab.x+specularF90*fab.y;float Ess=fab.x+fab.y;float Ems=1.0-Ess;vec3 Favg=Fr+(1.0-Fr)*0.047619;vec3 Fms=FssEss*Favg/(1.0-Ems*Favg);singleScatter+=FssEss;multiScatter+=Fms*Ems;}\n#if NUM_RECT_AREA_LIGHTS>0\nvoid RE_Direct_RectArea_Physical(const in RectAreaLight rectAreaLight,const in GeometricContext geometry,const in PhysicalMaterial material,inout ReflectedLight reflectedLight){vec3 normal=geometry.normal;vec3 viewDir=geometry.viewDir;vec3 position=geometry.position;vec3 lightPos=rectAreaLight.position;vec3 halfWidth=rectAreaLight.halfWidth;vec3 halfHeight=rectAreaLight.halfHeight;vec3 lightColor=rectAreaLight.color;float roughness=material.roughness;vec3 rectCoords[4];rectCoords[0]=lightPos+halfWidth-halfHeight;rectCoords[1]=lightPos-halfWidth-halfHeight;rectCoords[2]=lightPos-halfWidth+halfHeight;rectCoords[3]=lightPos+halfWidth+halfHeight;vec2 uv=LTC_Uv(normal,viewDir,roughness);vec4 t1=texture2D(ltc_1,uv);vec4 t2=texture2D(ltc_2,uv);mat3 mInv=mat3(vec3(t1.x,0,t1.y),vec3(0,1,0),vec3(t1.z,0,t1.w));vec3 fresnel=(material.specularColor*t2.x+(vec3(1.0)-material.specularColor)*t2.y);reflectedLight.directSpecular+=lightColor*fresnel*LTC_Evaluate(normal,viewDir,position,mInv,rectCoords);reflectedLight.directDiffuse+=lightColor*material.diffuseColor*LTC_Evaluate(normal,viewDir,position,mat3(1.0),rectCoords);}\n#endif\nvoid RE_Direct_Physical(const in IncidentLight directLight,const in GeometricContext geometry,const in PhysicalMaterial material,inout ReflectedLight reflectedLight){float dotNL=saturate(dot(geometry.normal,directLight.direction));vec3 irradiance=dotNL*directLight.color;\n#ifdef USE_CLEARCOAT\nfloat dotNLcc=saturate(dot(geometry.clearcoatNormal,directLight.direction));vec3 ccIrradiance=dotNLcc*directLight.color;clearcoatSpecular+=ccIrradiance*BRDF_GGX(directLight.direction,geometry.viewDir,geometry.clearcoatNormal,material.clearcoatF0,material.clearcoatF90,material.clearcoatRoughness);\n#endif\n#ifdef USE_SHEEN\nsheenSpecular+=irradiance*BRDF_Sheen(directLight.direction,geometry.viewDir,geometry.normal,material.sheenColor,material.sheenRoughness);\n#endif\n#ifdef USE_IRIDESCENCE\nreflectedLight.directSpecular+=irradiance*BRDF_GGX_Iridescence(directLight.direction,geometry.viewDir,geometry.normal,material.specularColor,material.specularF90,material.iridescence,material.iridescenceFresnel,material.roughness);\n#else\nreflectedLight.directSpecular+=irradiance*BRDF_GGX(directLight.direction,geometry.viewDir,geometry.normal,material.specularColor,material.specularF90,material.roughness);\n#endif\nreflectedLight.directDiffuse+=irradiance*BRDF_Lambert(material.diffuseColor);}void RE_IndirectDiffuse_Physical(const in vec3 irradiance,const in GeometricContext geometry,const in PhysicalMaterial material,inout ReflectedLight reflectedLight){reflectedLight.indirectDiffuse+=irradiance*BRDF_Lambert(material.diffuseColor);}void RE_IndirectSpecular_Physical(const in vec3 radiance,const in vec3 irradiance,const in vec3 clearcoatRadiance,const in GeometricContext geometry,const in PhysicalMaterial material,inout ReflectedLight reflectedLight){\n#ifdef USE_CLEARCOAT\nclearcoatSpecular+=clearcoatRadiance*EnvironmentBRDF(geometry.clearcoatNormal,geometry.viewDir,material.clearcoatF0,material.clearcoatF90,material.clearcoatRoughness);\n#endif\n#ifdef USE_SHEEN\nsheenSpecular+=irradiance*material.sheenColor*IBLSheenBRDF(geometry.normal,geometry.viewDir,material.sheenRoughness);\n#endif\nvec3 singleScattering=vec3(0.0);vec3 multiScattering=vec3(0.0);vec3 cosineWeightedIrradiance=irradiance*RECIPROCAL_PI;\n#ifdef USE_IRIDESCENCE\ncomputeMultiscatteringIridescence(geometry.normal,geometry.viewDir,material.specularColor,material.specularF90,material.iridescence,material.iridescenceFresnel,material.roughness,singleScattering,multiScattering);\n#else\ncomputeMultiscattering(geometry.normal,geometry.viewDir,material.specularColor,material.specularF90,material.roughness,singleScattering,multiScattering);\n#endif\nvec3 totalScattering=singleScattering+multiScattering;vec3 diffuse=material.diffuseColor*(1.0-max(max(totalScattering.r,totalScattering.g),totalScattering.b));reflectedLight.indirectSpecular+=radiance*singleScattering;reflectedLight.indirectSpecular+=multiScattering*cosineWeightedIrradiance;reflectedLight.indirectDiffuse+=diffuse*cosineWeightedIrradiance;}\n#define RE_Direct RE_Direct_Physical\n#define RE_Direct_RectArea RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular RE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion(const in float dotNV,const in float ambientOcclusion,const in float roughness){return saturate(pow(dotNV+ambientOcclusion,exp2(-16.0*roughness-1.0))-1.0+ambientOcclusion);}",lights_fragment_begin:"GeometricContext geometry;geometry.position=-vViewPosition;geometry.normal=normal;geometry.viewDir=(isOrthographic)?vec3(0,0,1):normalize(vViewPosition);\n#ifdef USE_CLEARCOAT\ngeometry.clearcoatNormal=clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\nfloat dotNVi=saturate(dot(normal,geometry.viewDir));if(material.iridescenceThickness==0.0){material.iridescence=0.0;}else{material.iridescence=saturate(material.iridescence);}if(material.iridescence>0.0){material.iridescenceFresnel=evalIridescence(1.0,material.iridescenceIOR,dotNVi,material.iridescenceThickness,material.specularColor);material.iridescenceF0=Schlick_to_F0(material.iridescenceFresnel,1.0,dotNVi);}\n#endif\nIncidentLight directLight;\n#if (NUM_POINT_LIGHTS>0)&&defined(RE_Direct)\nPointLight pointLight;\n#if defined(USE_SHADOWMAP)&&NUM_POINT_LIGHT_SHADOWS>0\nPointLightShadow pointLightShadow;\n#endif\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_POINT_LIGHTS;i++){pointLight=pointLights[i];getPointLightInfo(pointLight,geometry,directLight);\n#if defined(USE_SHADOWMAP)&&(UNROLLED_LOOP_INDEX<NUM_POINT_LIGHT_SHADOWS)\npointLightShadow=pointLightShadows[i];directLight.color*=(directLight.visible&&receiveShadow)?getPointShadow(pointShadowMap[i],pointLightShadow.shadowMapSize,pointLightShadow.shadowBias,pointLightShadow.shadowRadius,vPointShadowCoord[i],pointLightShadow.shadowCameraNear,pointLightShadow.shadowCameraFar):1.0;\n#endif\nRE_Direct(directLight,geometry,material,reflectedLight);}\n#pragma unroll_loop_end\n#endif\n#if (NUM_SPOT_LIGHTS>0)&&defined(RE_Direct)\nSpotLight spotLight;vec4 spotColor;vec3 spotLightCoord;bool inSpotLightMap;\n#if defined(USE_SHADOWMAP)&&NUM_SPOT_LIGHT_SHADOWS>0\nSpotLightShadow spotLightShadow;\n#endif\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_SPOT_LIGHTS;i++){spotLight=spotLights[i];getSpotLightInfo(spotLight,geometry,directLight);\n#if (UNROLLED_LOOP_INDEX<NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS)\n#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n#elif (UNROLLED_LOOP_INDEX<NUM_SPOT_LIGHT_SHADOWS)\n#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n#else\n#define SPOT_LIGHT_MAP_INDEX(UNROLLED_LOOP_INDEX-NUM_SPOT_LIGHT_SHADOWS+NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS)\n#endif\n#if (SPOT_LIGHT_MAP_INDEX<NUM_SPOT_LIGHT_MAPS)\nspotLightCoord=vSpotLightCoord[i].xyz/vSpotLightCoord[i].w;inSpotLightMap=all(lessThan(abs(spotLightCoord*2.-1.),vec3(1.0)));spotColor=texture2D(spotLightMap[SPOT_LIGHT_MAP_INDEX],spotLightCoord.xy);directLight.color=inSpotLightMap?directLight.color*spotColor.rgb:directLight.color;\n#endif\n#undef SPOT_LIGHT_MAP_INDEX\n#if defined(USE_SHADOWMAP)&&(UNROLLED_LOOP_INDEX<NUM_SPOT_LIGHT_SHADOWS)\nspotLightShadow=spotLightShadows[i];directLight.color*=(directLight.visible&&receiveShadow)?getShadow(spotShadowMap[i],spotLightShadow.shadowMapSize,spotLightShadow.shadowBias,spotLightShadow.shadowRadius,vSpotLightCoord[i]):1.0;\n#endif\nRE_Direct(directLight,geometry,material,reflectedLight);}\n#pragma unroll_loop_end\n#endif\n#if (NUM_DIR_LIGHTS>0)&&defined(RE_Direct)\nDirectionalLight directionalLight;\n#if defined(USE_SHADOWMAP)&&NUM_DIR_LIGHT_SHADOWS>0\nDirectionalLightShadow directionalLightShadow;\n#endif\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_DIR_LIGHTS;i++){directionalLight=directionalLights[i];getDirectionalLightInfo(directionalLight,geometry,directLight);\n#if defined(USE_SHADOWMAP)&&(UNROLLED_LOOP_INDEX<NUM_DIR_LIGHT_SHADOWS)\ndirectionalLightShadow=directionalLightShadows[i];directLight.color*=(directLight.visible&&receiveShadow)?getShadow(directionalShadowMap[i],directionalLightShadow.shadowMapSize,directionalLightShadow.shadowBias,directionalLightShadow.shadowRadius,vDirectionalShadowCoord[i]):1.0;\n#endif\nRE_Direct(directLight,geometry,material,reflectedLight);}\n#pragma unroll_loop_end\n#endif\n#if (NUM_RECT_AREA_LIGHTS>0)&&defined(RE_Direct_RectArea)\nRectAreaLight rectAreaLight;\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_RECT_AREA_LIGHTS;i++){rectAreaLight=rectAreaLights[i];RE_Direct_RectArea(rectAreaLight,geometry,material,reflectedLight);}\n#pragma unroll_loop_end\n#endif\n#if defined(RE_IndirectDiffuse)\nvec3 iblIrradiance=vec3(0.0);vec3 irradiance=getAmbientLightIrradiance(ambientLightColor);irradiance+=getLightProbeIrradiance(lightProbe,geometry.normal);\n#if (NUM_HEMI_LIGHTS>0)\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_HEMI_LIGHTS;i++){irradiance+=getHemisphereLightIrradiance(hemisphereLights[i],geometry.normal);}\n#pragma unroll_loop_end\n#endif\n#endif\n#if defined(RE_IndirectSpecular)\nvec3 radiance=vec3(0.0);vec3 clearcoatRadiance=vec3(0.0);\n#endif",lights_fragment_maps:"#if defined(RE_IndirectDiffuse)\n#ifdef USE_LIGHTMAP\nvec4 lightMapTexel=texture2D(lightMap,vUv2);vec3 lightMapIrradiance=lightMapTexel.rgb*lightMapIntensity;irradiance+=lightMapIrradiance;\n#endif\n#if defined(USE_ENVMAP)&&defined(STANDARD)&&defined(ENVMAP_TYPE_CUBE_UV)\niblIrradiance+=getIBLIrradiance(geometry.normal);\n#endif\n#endif\n#if defined(USE_ENVMAP)&&defined(RE_IndirectSpecular)\nradiance+=getIBLRadiance(geometry.viewDir,geometry.normal,material.roughness);\n#ifdef USE_CLEARCOAT\nclearcoatRadiance+=getIBLRadiance(geometry.viewDir,geometry.clearcoatNormal,material.clearcoatRoughness);\n#endif\n#endif",lights_fragment_end:"#if defined(RE_IndirectDiffuse)\nRE_IndirectDiffuse(irradiance,geometry,material,reflectedLight);\n#endif\n#if defined(RE_IndirectSpecular)\nRE_IndirectSpecular(radiance,iblIrradiance,clearcoatRadiance,geometry,material,reflectedLight);\n#endif",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF)&&defined(USE_LOGDEPTHBUF_EXT)\ngl_FragDepthEXT=vIsPerspective==0.0?gl_FragCoord.z:log2(vFragDepth)*logDepthBufFC*0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined(USE_LOGDEPTHBUF)&&defined(USE_LOGDEPTHBUF_EXT)\nuniform float logDepthBufFC;varying float vFragDepth;varying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n#ifdef USE_LOGDEPTHBUF_EXT\nvarying float vFragDepth;varying float vIsPerspective;\n#else\nuniform float logDepthBufFC;\n#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n#ifdef USE_LOGDEPTHBUF_EXT\nvFragDepth=1.0+gl_Position.w;vIsPerspective=float(isPerspectiveMatrix(projectionMatrix));\n#else\nif(isPerspectiveMatrix(projectionMatrix)){gl_Position.z=log2(max(EPSILON,gl_Position.w+1.0))*logDepthBufFC-1.0;gl_Position.z*=gl_Position.w;}\n#endif\n#endif",map_fragment:"#ifdef USE_MAP\nvec4 sampledDiffuseColor=texture2D(map,vUv);\n#ifdef DECODE_VIDEO_TEXTURE\nsampledDiffuseColor=vec4(mix(pow(sampledDiffuseColor.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),sampledDiffuseColor.rgb*0.0773993808,vec3(lessThanEqual(sampledDiffuseColor.rgb,vec3(0.04045)))),sampledDiffuseColor.w);\n#endif\ndiffuseColor*=sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\nuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined(USE_MAP)||defined(USE_ALPHAMAP)\nvec2 uv=(uvTransform*vec3(gl_PointCoord.x,1.0-gl_PointCoord.y,1)).xy;\n#endif\n#ifdef USE_MAP\ndiffuseColor*=texture2D(map,uv);\n#endif\n#ifdef USE_ALPHAMAP\ndiffuseColor.a*=texture2D(alphaMap,uv).g;\n#endif",map_particle_pars_fragment:"#if defined(USE_MAP)||defined(USE_ALPHAMAP)\nuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\nuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\nuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor=metalness;\n#ifdef USE_METALNESSMAP\nvec4 texelMetalness=texture2D(metalnessMap,vUv);metalnessFactor*=texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\nuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined(USE_MORPHCOLORS)&&defined(MORPHTARGETS_TEXTURE)\nvColor*=morphTargetBaseInfluence;for(int i=0;i<MORPHTARGETS_COUNT;i++){\n#if defined(USE_COLOR_ALPHA)\nif(morphTargetInfluences[i]!=0.0)vColor+=getMorph(gl_VertexID,i,2)*morphTargetInfluences[i];\n#elif defined(USE_COLOR)\nif(morphTargetInfluences[i]!=0.0)vColor+=getMorph(gl_VertexID,i,2).rgb*morphTargetInfluences[i];\n#endif\n}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\nobjectNormal*=morphTargetBaseInfluence;\n#ifdef MORPHTARGETS_TEXTURE\nfor(int i=0;i<MORPHTARGETS_COUNT;i++){if(morphTargetInfluences[i]!=0.0)objectNormal+=getMorph(gl_VertexID,i,1).xyz*morphTargetInfluences[i];}\n#else\nobjectNormal+=morphNormal0*morphTargetInfluences[0];objectNormal+=morphNormal1*morphTargetInfluences[1];objectNormal+=morphNormal2*morphTargetInfluences[2];objectNormal+=morphNormal3*morphTargetInfluences[3];\n#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\nuniform float morphTargetBaseInfluence;\n#ifdef MORPHTARGETS_TEXTURE\nuniform float morphTargetInfluences[MORPHTARGETS_COUNT];uniform sampler2DArray morphTargetsTexture;uniform ivec2 morphTargetsTextureSize;vec4 getMorph(const in int vertexIndex,const in int morphTargetIndex,const in int offset){int texelIndex=vertexIndex*MORPHTARGETS_TEXTURE_STRIDE+offset;int y=texelIndex/morphTargetsTextureSize.x;int x=texelIndex-y*morphTargetsTextureSize.x;ivec3 morphUV=ivec3(x,y,morphTargetIndex);return texelFetch(morphTargetsTexture,morphUV,0);}\n#else\n#ifndef USE_MORPHNORMALS\nuniform float morphTargetInfluences[8];\n#else\nuniform float morphTargetInfluences[4];\n#endif\n#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\ntransformed*=morphTargetBaseInfluence;\n#ifdef MORPHTARGETS_TEXTURE\nfor(int i=0;i<MORPHTARGETS_COUNT;i++){if(morphTargetInfluences[i]!=0.0)transformed+=getMorph(gl_VertexID,i,0).xyz*morphTargetInfluences[i];}\n#else\ntransformed+=morphTarget0*morphTargetInfluences[0];transformed+=morphTarget1*morphTargetInfluences[1];transformed+=morphTarget2*morphTargetInfluences[2];transformed+=morphTarget3*morphTargetInfluences[3];\n#ifndef USE_MORPHNORMALS\ntransformed+=morphTarget4*morphTargetInfluences[4];transformed+=morphTarget5*morphTargetInfluences[5];transformed+=morphTarget6*morphTargetInfluences[6];transformed+=morphTarget7*morphTargetInfluences[7];\n#endif\n#endif\n#endif",normal_fragment_begin:"float faceDirection=gl_FrontFacing?1.0:-1.0;\n#ifdef FLAT_SHADED\nvec3 fdx=dFdx(vViewPosition);vec3 fdy=dFdy(vViewPosition);vec3 normal=normalize(cross(fdx,fdy));\n#else\nvec3 normal=normalize(vNormal);\n#ifdef DOUBLE_SIDED\nnormal=normal*faceDirection;\n#endif\n#ifdef USE_TANGENT\nvec3 tangent=normalize(vTangent);vec3 bitangent=normalize(vBitangent);\n#ifdef DOUBLE_SIDED\ntangent=tangent*faceDirection;bitangent=bitangent*faceDirection;\n#endif\n#if defined(TANGENTSPACE_NORMALMAP)||defined(USE_CLEARCOAT_NORMALMAP)\nmat3 vTBN=mat3(tangent,bitangent,normal);\n#endif\n#endif\n#endif\nvec3 geometryNormal=normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\nnormal=texture2D(normalMap,vUv).xyz*2.0-1.0;\n#ifdef FLIP_SIDED\nnormal=-normal;\n#endif\n#ifdef DOUBLE_SIDED\nnormal=normal*faceDirection;\n#endif\nnormal=normalize(normalMatrix*normal);\n#elif defined(TANGENTSPACE_NORMALMAP)\nvec3 mapN=texture2D(normalMap,vUv).xyz*2.0-1.0;mapN.xy*=normalScale;\n#ifdef USE_TANGENT\nnormal=normalize(vTBN*mapN);\n#else\nnormal=perturbNormal2Arb(-vViewPosition,normal,mapN,faceDirection);\n#endif\n#elif defined(USE_BUMPMAP)\nnormal=perturbNormalArb(-vViewPosition,normal,dHdxy_fwd(),faceDirection);\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\nvarying vec3 vNormal;\n#ifdef USE_TANGENT\nvarying vec3 vTangent;varying vec3 vBitangent;\n#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\nvarying vec3 vNormal;\n#ifdef USE_TANGENT\nvarying vec3 vTangent;varying vec3 vBitangent;\n#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\nvNormal=normalize(transformedNormal);\n#ifdef USE_TANGENT\nvTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);\n#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\nuniform sampler2D normalMap;uniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\nuniform mat3 normalMatrix;\n#endif\n#if !defined(USE_TANGENT)&&(defined(TANGENTSPACE_NORMALMAP)||defined(USE_CLEARCOAT_NORMALMAP))\nvec3 perturbNormal2Arb(vec3 eye_pos,vec3 surf_norm,vec3 mapN,float faceDirection){vec3 q0=dFdx(eye_pos.xyz);vec3 q1=dFdy(eye_pos.xyz);vec2 st0=dFdx(vUv.st);vec2 st1=dFdy(vUv.st);vec3 N=surf_norm;vec3 q1perp=cross(q1,N);vec3 q0perp=cross(N,q0);vec3 T=q1perp*st0.x+q0perp*st1.x;vec3 B=q1perp*st0.y+q0perp*st1.y;float det=max(dot(T,T),dot(B,B));float scale=(det==0.0)?0.0:faceDirection*inversesqrt(det);return normalize(T*(mapN.x*scale)+B*(mapN.y*scale)+N*mapN.z);}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\nvec3 clearcoatNormal=geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\nvec3 clearcoatMapN=texture2D(clearcoatNormalMap,vUv).xyz*2.0-1.0;clearcoatMapN.xy*=clearcoatNormalScale;\n#ifdef USE_TANGENT\nclearcoatNormal=normalize(vTBN*clearcoatMapN);\n#else\nclearcoatNormal=perturbNormal2Arb(-vViewPosition,clearcoatNormal,clearcoatMapN,faceDirection);\n#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\nuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\nuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\nuniform sampler2D clearcoatNormalMap;uniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\nuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\nuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a=1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a*=material.transmissionAlpha+0.1;\n#endif\ngl_FragColor=vec4(outgoingLight,diffuseColor.a);",packing:"vec3 packNormalToRGB(const in vec3 normal){return normalize(normal)*0.5+0.5;}vec3 unpackRGBToNormal(const in vec3 rgb){return 2.0*rgb.xyz-1.0;}const float PackUpscale=256./255.;const float UnpackDownscale=255./256.;const vec3 PackFactors=vec3(256.*256.*256.,256.*256.,256.);const vec4 UnpackFactors=UnpackDownscale/vec4(PackFactors,1.);const float ShiftRight8=1./256.;vec4 packDepthToRGBA(const in float v){vec4 r=vec4(fract(v*PackFactors),v);r.yzw-=r.xyz*ShiftRight8;return r*PackUpscale;}float unpackRGBAToDepth(const in vec4 v){return dot(v,UnpackFactors);}vec2 packDepthToRG(in highp float v){return packDepthToRGBA(v).yx;}float unpackRGToDepth(const in highp vec2 v){return unpackRGBAToDepth(vec4(v.xy,0.0,0.0));}vec4 pack2HalfToRGBA(vec2 v){vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}vec2 unpackRGBATo2Half(vec4 v){return vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));}float viewZToOrthographicDepth(const in float viewZ,const in float near,const in float far){return(viewZ+near)/(near-far);}float orthographicDepthToViewZ(const in float linearClipZ,const in float near,const in float far){return linearClipZ*(near-far)-near;}float viewZToPerspectiveDepth(const in float viewZ,const in float near,const in float far){return((near+viewZ)*far)/((far-near)*viewZ);}float perspectiveDepthToViewZ(const in float invClipZ,const in float near,const in float far){return(near*far)/((far-near)*invClipZ-far);}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\ngl_FragColor.rgb*=gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition=vec4(transformed,1.0);\n#ifdef USE_INSTANCING\nmvPosition=instanceMatrix*mvPosition;\n#endif\nmvPosition=modelViewMatrix*mvPosition;gl_Position=projectionMatrix*mvPosition;",dithering_fragment:"#ifdef DITHERING\ngl_FragColor.rgb=dithering(gl_FragColor.rgb);\n#endif",dithering_pars_fragment:"#ifdef DITHERING\nvec3 dithering(vec3 color){float grid_position=rand(gl_FragCoord.xy);vec3 dither_shift_RGB=vec3(0.25/255.0,-0.25/255.0,0.25/255.0);dither_shift_RGB=mix(2.0*dither_shift_RGB,-2.0*dither_shift_RGB,grid_position);return color+dither_shift_RGB;}\n#endif",roughnessmap_fragment:"float roughnessFactor=roughness;\n#ifdef USE_ROUGHNESSMAP\nvec4 texelRoughness=texture2D(roughnessMap,vUv);roughnessFactor*=texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\nuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS>0\nvarying vec4 vSpotLightCoord[NUM_SPOT_LIGHT_COORDS];\n#endif\n#if NUM_SPOT_LIGHT_MAPS>0\nuniform sampler2D spotLightMap[NUM_SPOT_LIGHT_MAPS];\n#endif\n#ifdef USE_SHADOWMAP\n#if NUM_DIR_LIGHT_SHADOWS>0\nuniform sampler2D directionalShadowMap[NUM_DIR_LIGHT_SHADOWS];varying vec4 vDirectionalShadowCoord[NUM_DIR_LIGHT_SHADOWS];struct DirectionalLightShadow{float shadowBias;float shadowNormalBias;float shadowRadius;vec2 shadowMapSize;};uniform DirectionalLightShadow directionalLightShadows[NUM_DIR_LIGHT_SHADOWS];\n#endif\n#if NUM_SPOT_LIGHT_SHADOWS>0\nuniform sampler2D spotShadowMap[NUM_SPOT_LIGHT_SHADOWS];struct SpotLightShadow{float shadowBias;float shadowNormalBias;float shadowRadius;vec2 shadowMapSize;};uniform SpotLightShadow spotLightShadows[NUM_SPOT_LIGHT_SHADOWS];\n#endif\n#if NUM_POINT_LIGHT_SHADOWS>0\nuniform sampler2D pointShadowMap[NUM_POINT_LIGHT_SHADOWS];varying vec4 vPointShadowCoord[NUM_POINT_LIGHT_SHADOWS];struct PointLightShadow{float shadowBias;float shadowNormalBias;float shadowRadius;vec2 shadowMapSize;float shadowCameraNear;float shadowCameraFar;};uniform PointLightShadow pointLightShadows[NUM_POINT_LIGHT_SHADOWS];\n#endif\nfloat texture2DCompare(sampler2D depths,vec2 uv,float compare){return step(compare,unpackRGBAToDepth(texture2D(depths,uv)));}vec2 texture2DDistribution(sampler2D shadow,vec2 uv){return unpackRGBATo2Half(texture2D(shadow,uv));}float VSMShadow(sampler2D shadow,vec2 uv,float compare){float occlusion=1.0;vec2 distribution=texture2DDistribution(shadow,uv);float hard_shadow=step(compare,distribution.x);if(hard_shadow!=1.0){float distance=compare-distribution.x;float variance=max(0.00000,distribution.y*distribution.y);float softness_probability=variance/(variance+distance*distance);softness_probability=clamp((softness_probability-0.3)/(0.95-0.3),0.0,1.0);occlusion=clamp(max(hard_shadow,softness_probability),0.0,1.0);}return occlusion;}float getShadow(sampler2D shadowMap,vec2 shadowMapSize,float shadowBias,float shadowRadius,vec4 shadowCoord){float shadow=1.0;shadowCoord.xyz/=shadowCoord.w;shadowCoord.z+=shadowBias;bool inFrustum=shadowCoord.x>=0.0&&shadowCoord.x<=1.0&&shadowCoord.y>=0.0&&shadowCoord.y<=1.0;bool frustumTest=inFrustum&&shadowCoord.z<=1.0;if(frustumTest){\n#if defined(SHADOWMAP_TYPE_PCF)\nvec2 texelSize=vec2(1.0)/shadowMapSize;float dx0=-texelSize.x*shadowRadius;float dy0=-texelSize.y*shadowRadius;float dx1=+texelSize.x*shadowRadius;float dy1=+texelSize.y*shadowRadius;float dx2=dx0/2.0;float dy2=dy0/2.0;float dx3=dx1/2.0;float dy3=dy1/2.0;shadow=(texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx0,dy0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(0.0,dy0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx1,dy0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx2,dy2),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(0.0,dy2),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx3,dy2),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx0,0.0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx2,0.0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy,shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx3,0.0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx1,0.0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx2,dy3),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(0.0,dy3),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx3,dy3),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx0,dy1),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(0.0,dy1),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx1,dy1),shadowCoord.z))*(1.0/17.0);\n#elif defined(SHADOWMAP_TYPE_PCF_SOFT)\nvec2 texelSize=vec2(1.0)/shadowMapSize;float dx=texelSize.x;float dy=texelSize.y;vec2 uv=shadowCoord.xy;vec2 f=fract(uv*shadowMapSize+0.5);uv-=f*texelSize;shadow=(texture2DCompare(shadowMap,uv,shadowCoord.z)+texture2DCompare(shadowMap,uv+vec2(dx,0.0),shadowCoord.z)+texture2DCompare(shadowMap,uv+vec2(0.0,dy),shadowCoord.z)+texture2DCompare(shadowMap,uv+texelSize,shadowCoord.z)+mix(texture2DCompare(shadowMap,uv+vec2(-dx,0.0),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(2.0*dx,0.0),shadowCoord.z),f.x)+mix(texture2DCompare(shadowMap,uv+vec2(-dx,dy),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(2.0*dx,dy),shadowCoord.z),f.x)+mix(texture2DCompare(shadowMap,uv+vec2(0.0,-dy),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(0.0,2.0*dy),shadowCoord.z),f.y)+mix(texture2DCompare(shadowMap,uv+vec2(dx,-dy),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(dx,2.0*dy),shadowCoord.z),f.y)+mix(mix(texture2DCompare(shadowMap,uv+vec2(-dx,-dy),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(2.0*dx,-dy),shadowCoord.z),f.x),mix(texture2DCompare(shadowMap,uv+vec2(-dx,2.0*dy),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(2.0*dx,2.0*dy),shadowCoord.z),f.x),f.y))*(1.0/9.0);\n#elif defined(SHADOWMAP_TYPE_VSM)\nshadow=VSMShadow(shadowMap,shadowCoord.xy,shadowCoord.z);\n#else\nshadow=texture2DCompare(shadowMap,shadowCoord.xy,shadowCoord.z);\n#endif\n}return shadow;}vec2 cubeToUV(vec3 v,float texelSizeY){vec3 absV=abs(v);float scaleToCube=1.0/max(absV.x,max(absV.y,absV.z));absV*=scaleToCube;v*=scaleToCube*(1.0-2.0*texelSizeY);vec2 planar=v.xy;float almostATexel=1.5*texelSizeY;float almostOne=1.0-almostATexel;if(absV.z>=almostOne){if(v.z>0.0)planar.x=4.0-v.x;}else if(absV.x>=almostOne){float signX=sign(v.x);planar.x=v.z*signX+2.0*signX;}else if(absV.y>=almostOne){float signY=sign(v.y);planar.x=v.x+2.0*signY+2.0;planar.y=v.z*signY-2.0;}return vec2(0.125,0.25)*planar+vec2(0.375,0.75);}float getPointShadow(sampler2D shadowMap,vec2 shadowMapSize,float shadowBias,float shadowRadius,vec4 shadowCoord,float shadowCameraNear,float shadowCameraFar){vec2 texelSize=vec2(1.0)/(shadowMapSize*vec2(4.0,2.0));vec3 lightToPosition=shadowCoord.xyz;float dp=(length(lightToPosition)-shadowCameraNear)/(shadowCameraFar-shadowCameraNear);dp+=shadowBias;vec3 bd3D=normalize(lightToPosition);\n#if defined(SHADOWMAP_TYPE_PCF)||defined(SHADOWMAP_TYPE_PCF_SOFT)||defined(SHADOWMAP_TYPE_VSM)\nvec2 offset=vec2(-1,1)*shadowRadius*texelSize.y;return(texture2DCompare(shadowMap,cubeToUV(bd3D+offset.xyy,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.yyy,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.xyx,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.yyx,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.xxy,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.yxy,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.xxx,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.yxx,texelSize.y),dp))*(1.0/9.0);\n#else\nreturn texture2DCompare(shadowMap,cubeToUV(bd3D,texelSize.y),dp);\n#endif\n}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS>0\nuniform mat4 spotLightMatrix[NUM_SPOT_LIGHT_COORDS];varying vec4 vSpotLightCoord[NUM_SPOT_LIGHT_COORDS];\n#endif\n#ifdef USE_SHADOWMAP\n#if NUM_DIR_LIGHT_SHADOWS>0\nuniform mat4 directionalShadowMatrix[NUM_DIR_LIGHT_SHADOWS];varying vec4 vDirectionalShadowCoord[NUM_DIR_LIGHT_SHADOWS];struct DirectionalLightShadow{float shadowBias;float shadowNormalBias;float shadowRadius;vec2 shadowMapSize;};uniform DirectionalLightShadow directionalLightShadows[NUM_DIR_LIGHT_SHADOWS];\n#endif\n#if NUM_SPOT_LIGHT_SHADOWS>0\nstruct SpotLightShadow{float shadowBias;float shadowNormalBias;float shadowRadius;vec2 shadowMapSize;};uniform SpotLightShadow spotLightShadows[NUM_SPOT_LIGHT_SHADOWS];\n#endif\n#if NUM_POINT_LIGHT_SHADOWS>0\nuniform mat4 pointShadowMatrix[NUM_POINT_LIGHT_SHADOWS];varying vec4 vPointShadowCoord[NUM_POINT_LIGHT_SHADOWS];struct PointLightShadow{float shadowBias;float shadowNormalBias;float shadowRadius;vec2 shadowMapSize;float shadowCameraNear;float shadowCameraFar;};uniform PointLightShadow pointLightShadows[NUM_POINT_LIGHT_SHADOWS];\n#endif\n#endif",shadowmap_vertex:"#if (defined(USE_SHADOWMAP)&&(NUM_DIR_LIGHT_SHADOWS>0||NUM_POINT_LIGHT_SHADOWS>0))||(NUM_SPOT_LIGHT_COORDS>0)\nvec3 shadowWorldNormal=inverseTransformDirection(transformedNormal,viewMatrix);vec4 shadowWorldPosition;\n#endif\n#if defined(USE_SHADOWMAP)\n#if NUM_DIR_LIGHT_SHADOWS>0\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_DIR_LIGHT_SHADOWS;i++){shadowWorldPosition=worldPosition+vec4(shadowWorldNormal*directionalLightShadows[i].shadowNormalBias,0);vDirectionalShadowCoord[i]=directionalShadowMatrix[i]*shadowWorldPosition;}\n#pragma unroll_loop_end\n#endif\n#if NUM_POINT_LIGHT_SHADOWS>0\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_POINT_LIGHT_SHADOWS;i++){shadowWorldPosition=worldPosition+vec4(shadowWorldNormal*pointLightShadows[i].shadowNormalBias,0);vPointShadowCoord[i]=pointShadowMatrix[i]*shadowWorldPosition;}\n#pragma unroll_loop_end\n#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS>0\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_SPOT_LIGHT_COORDS;i++){shadowWorldPosition=worldPosition;\n#if (defined(USE_SHADOWMAP)&&UNROLLED_LOOP_INDEX<NUM_SPOT_LIGHT_SHADOWS)\nshadowWorldPosition.xyz+=shadowWorldNormal*spotLightShadows[i].shadowNormalBias;\n#endif\nvSpotLightCoord[i]=spotLightMatrix[i]*shadowWorldPosition;}\n#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask(){float shadow=1.0;\n#ifdef USE_SHADOWMAP\n#if NUM_DIR_LIGHT_SHADOWS>0\nDirectionalLightShadow directionalLight;\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_DIR_LIGHT_SHADOWS;i++){directionalLight=directionalLightShadows[i];shadow*=receiveShadow?getShadow(directionalShadowMap[i],directionalLight.shadowMapSize,directionalLight.shadowBias,directionalLight.shadowRadius,vDirectionalShadowCoord[i]):1.0;}\n#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHT_SHADOWS>0\nSpotLightShadow spotLight;\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_SPOT_LIGHT_SHADOWS;i++){spotLight=spotLightShadows[i];shadow*=receiveShadow?getShadow(spotShadowMap[i],spotLight.shadowMapSize,spotLight.shadowBias,spotLight.shadowRadius,vSpotLightCoord[i]):1.0;}\n#pragma unroll_loop_end\n#endif\n#if NUM_POINT_LIGHT_SHADOWS>0\nPointLightShadow pointLight;\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_POINT_LIGHT_SHADOWS;i++){pointLight=pointLightShadows[i];shadow*=receiveShadow?getPointShadow(pointShadowMap[i],pointLight.shadowMapSize,pointLight.shadowBias,pointLight.shadowRadius,vPointShadowCoord[i],pointLight.shadowCameraNear,pointLight.shadowCameraFar):1.0;}\n#pragma unroll_loop_end\n#endif\n#endif\nreturn shadow;}",skinbase_vertex:"#ifdef USE_SKINNING\nmat4 boneMatX=getBoneMatrix(skinIndex.x);mat4 boneMatY=getBoneMatrix(skinIndex.y);mat4 boneMatZ=getBoneMatrix(skinIndex.z);mat4 boneMatW=getBoneMatrix(skinIndex.w);\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\nuniform mat4 bindMatrix;uniform mat4 bindMatrixInverse;uniform highp sampler2D boneTexture;uniform int boneTextureSize;mat4 getBoneMatrix(const in float i){float j=i*4.0;float x=mod(j,float(boneTextureSize));float y=floor(j/float(boneTextureSize));float dx=1.0/float(boneTextureSize);float dy=1.0/float(boneTextureSize);y=dy*(y+0.5);vec4 v1=texture2D(boneTexture,vec2(dx*(x+0.5),y));vec4 v2=texture2D(boneTexture,vec2(dx*(x+1.5),y));vec4 v3=texture2D(boneTexture,vec2(dx*(x+2.5),y));vec4 v4=texture2D(boneTexture,vec2(dx*(x+3.5),y));mat4 bone=mat4(v1,v2,v3,v4);return bone;}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\nvec4 skinVertex=bindMatrix*vec4(transformed,1.0);vec4 skinned=vec4(0.0);skinned+=boneMatX*skinVertex*skinWeight.x;skinned+=boneMatY*skinVertex*skinWeight.y;skinned+=boneMatZ*skinVertex*skinWeight.z;skinned+=boneMatW*skinVertex*skinWeight.w;transformed=(bindMatrixInverse*skinned).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\nmat4 skinMatrix=mat4(0.0);skinMatrix+=skinWeight.x*boneMatX;skinMatrix+=skinWeight.y*boneMatY;skinMatrix+=skinWeight.z*boneMatZ;skinMatrix+=skinWeight.w*boneMatW;skinMatrix=bindMatrixInverse*skinMatrix*bindMatrix;objectNormal=vec4(skinMatrix*vec4(objectNormal,0.0)).xyz;\n#ifdef USE_TANGENT\nobjectTangent=vec4(skinMatrix*vec4(objectTangent,0.0)).xyz;\n#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\nvec4 texelSpecular=texture2D(specularMap,vUv);specularStrength=texelSpecular.r;\n#else\nspecularStrength=1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\nuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined(TONE_MAPPING)\ngl_FragColor.rgb=toneMapping(gl_FragColor.rgb);\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a)clamp(a,0.0,1.0)\n#endif\nuniform float toneMappingExposure;vec3 LinearToneMapping(vec3 color){return toneMappingExposure*color;}vec3 ReinhardToneMapping(vec3 color){color*=toneMappingExposure;return saturate(color/(vec3(1.0)+color));}vec3 OptimizedCineonToneMapping(vec3 color){color*=toneMappingExposure;color=max(vec3(0.0),color-0.004);return pow((color*(6.2*color+0.5))/(color*(6.2*color+1.7)+0.06),vec3(2.2));}vec3 RRTAndODTFit(vec3 v){vec3 a=v*(v+0.0245786)-0.000090537;vec3 b=v*(0.983729*v+0.4329510)+0.238081;return a/b;}vec3 ACESFilmicToneMapping(vec3 color){const mat3 ACESInputMat=mat3(vec3(0.59719,0.07600,0.02840),vec3(0.35458,0.90834,0.13383),vec3(0.04823,0.01566,0.83777));const mat3 ACESOutputMat=mat3(vec3(1.60475,-0.10208,-0.00327),vec3(-0.53108,1.10813,-0.07276),vec3(-0.07367,-0.00605,1.07602));color*=toneMappingExposure/0.6;color=ACESInputMat*color;color=RRTAndODTFit(color);color=ACESOutputMat*color;return saturate(color);}vec3 CustomToneMapping(vec3 color){return color;}",transmission_fragment:"#ifdef USE_TRANSMISSION\nmaterial.transmission=transmission;material.transmissionAlpha=1.0;material.thickness=thickness;material.attenuationDistance=attenuationDistance;material.attenuationColor=attenuationColor;\n#ifdef USE_TRANSMISSIONMAP\nmaterial.transmission*=texture2D(transmissionMap,vUv).r;\n#endif\n#ifdef USE_THICKNESSMAP\nmaterial.thickness*=texture2D(thicknessMap,vUv).g;\n#endif\nvec3 pos=vWorldPosition;vec3 v=normalize(cameraPosition-pos);vec3 n=inverseTransformDirection(normal,viewMatrix);vec4 transmission=getIBLVolumeRefraction(n,v,material.roughness,material.diffuseColor,material.specularColor,material.specularF90,pos,modelMatrix,viewMatrix,projectionMatrix,material.ior,material.thickness,material.attenuationColor,material.attenuationDistance);material.transmissionAlpha=mix(material.transmissionAlpha,transmission.a,material.transmission);totalDiffuse=mix(totalDiffuse,transmission.rgb,material.transmission);\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\nuniform float transmission;uniform float thickness;uniform float attenuationDistance;uniform vec3 attenuationColor;\n#ifdef USE_TRANSMISSIONMAP\nuniform sampler2D transmissionMap;\n#endif\n#ifdef USE_THICKNESSMAP\nuniform sampler2D thicknessMap;\n#endif\nuniform vec2 transmissionSamplerSize;uniform sampler2D transmissionSamplerMap;uniform mat4 modelMatrix;uniform mat4 projectionMatrix;varying vec3 vWorldPosition;vec3 getVolumeTransmissionRay(const in vec3 n,const in vec3 v,const in float thickness,const in float ior,const in mat4 modelMatrix){vec3 refractionVector=refract(-v,normalize(n),1.0/ior);vec3 modelScale;modelScale.x=length(vec3(modelMatrix[0].xyz));modelScale.y=length(vec3(modelMatrix[1].xyz));modelScale.z=length(vec3(modelMatrix[2].xyz));return normalize(refractionVector)*thickness*modelScale;}float applyIorToRoughness(const in float roughness,const in float ior){return roughness*clamp(ior*2.0-2.0,0.0,1.0);}vec4 getTransmissionSample(const in vec2 fragCoord,const in float roughness,const in float ior){float framebufferLod=log2(transmissionSamplerSize.x)*applyIorToRoughness(roughness,ior);\n#ifdef texture2DLodEXT\nreturn texture2DLodEXT(transmissionSamplerMap,fragCoord.xy,framebufferLod);\n#else\nreturn texture2D(transmissionSamplerMap,fragCoord.xy,framebufferLod);\n#endif\n}vec3 applyVolumeAttenuation(const in vec3 radiance,const in float transmissionDistance,const in vec3 attenuationColor,const in float attenuationDistance){if(isinf(attenuationDistance)){return radiance;}else{vec3 attenuationCoefficient=-log(attenuationColor)/attenuationDistance;vec3 transmittance=exp(-attenuationCoefficient*transmissionDistance);return transmittance*radiance;}}vec4 getIBLVolumeRefraction(const in vec3 n,const in vec3 v,const in float roughness,const in vec3 diffuseColor,const in vec3 specularColor,const in float specularF90,const in vec3 position,const in mat4 modelMatrix,const in mat4 viewMatrix,const in mat4 projMatrix,const in float ior,const in float thickness,const in vec3 attenuationColor,const in float attenuationDistance){vec3 transmissionRay=getVolumeTransmissionRay(n,v,thickness,ior,modelMatrix);vec3 refractedRayExit=position+transmissionRay;vec4 ndcPos=projMatrix*viewMatrix*vec4(refractedRayExit,1.0);vec2 refractionCoords=ndcPos.xy/ndcPos.w;refractionCoords+=1.0;refractionCoords/=2.0;vec4 transmittedLight=getTransmissionSample(refractionCoords,roughness,ior);vec3 attenuatedColor=applyVolumeAttenuation(transmittedLight.rgb,length(transmissionRay),attenuationColor,attenuationDistance);vec3 F=EnvironmentBRDF(n,v,specularColor,specularF90,roughness);return vec4((1.0-F)*attenuatedColor*diffuseColor,transmittedLight.a);}\n#endif",uv_pars_fragment:"#if (defined(USE_UV)&&!defined(UVS_VERTEX_ONLY))\nvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n#ifdef UVS_VERTEX_ONLY\nvec2 vUv;\n#else\nvarying vec2 vUv;\n#endif\nuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\nvUv=(uvTransform*vec3(uv,1)).xy;\n#endif",uv2_pars_fragment:"#if defined(USE_LIGHTMAP)||defined(USE_AOMAP)\nvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined(USE_LIGHTMAP)||defined(USE_AOMAP)\nattribute vec2 uv2;varying vec2 vUv2;uniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined(USE_LIGHTMAP)||defined(USE_AOMAP)\nvUv2=(uv2Transform*vec3(uv2,1)).xy;\n#endif",worldpos_vertex:"#if defined(USE_ENVMAP)||defined(DISTANCE)||defined(USE_SHADOWMAP)||defined(USE_TRANSMISSION)||NUM_SPOT_LIGHT_COORDS>0\nvec4 worldPosition=vec4(transformed,1.0);\n#ifdef USE_INSTANCING\nworldPosition=instanceMatrix*worldPosition;\n#endif\nworldPosition=modelMatrix*worldPosition;\n#endif",background_vert:"varying vec2 vUv;uniform mat3 uvTransform;void main(){vUv=(uvTransform*vec3(uv,1)).xy;gl_Position=vec4(position.xy,1.0,1.0);}",background_frag:"uniform sampler2D t2D;uniform float backgroundIntensity;varying vec2 vUv;void main(){vec4 texColor=texture2D(t2D,vUv);\n#ifdef DECODE_VIDEO_TEXTURE\ntexColor=vec4(mix(pow(texColor.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),texColor.rgb*0.0773993808,vec3(lessThanEqual(texColor.rgb,vec3(0.04045)))),texColor.w);\n#endif\ntexColor.rgb*=backgroundIntensity;gl_FragColor=texColor;\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main(){vWorldDirection=transformDirection(position,modelMatrix);\n#include <begin_vertex>\n#include <project_vertex>\ngl_Position.z=gl_Position.w;}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\nuniform samplerCube envMap;\n#elif defined(ENVMAP_TYPE_CUBE_UV)\nuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;uniform float backgroundBlurriness;uniform float backgroundIntensity;varying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main(){\n#ifdef ENVMAP_TYPE_CUBE\nvec4 texColor=textureCube(envMap,vec3(flipEnvMap*vWorldDirection.x,vWorldDirection.yz));\n#elif defined(ENVMAP_TYPE_CUBE_UV)\nvec4 texColor=textureCubeUV(envMap,vWorldDirection,backgroundBlurriness);\n#else\nvec4 texColor=vec4(0.0,0.0,0.0,1.0);\n#endif\ntexColor.rgb*=backgroundIntensity;gl_FragColor=texColor;\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main(){vWorldDirection=transformDirection(position,modelMatrix);\n#include <begin_vertex>\n#include <project_vertex>\ngl_Position.z=gl_Position.w;}",cube_frag:"uniform samplerCube tCube;uniform float tFlip;uniform float opacity;varying vec3 vWorldDirection;void main(){vec4 texColor=textureCube(tCube,vec3(tFlip*vWorldDirection.x,vWorldDirection.yz));gl_FragColor=texColor;gl_FragColor.a*=opacity;\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;void main(){\n#include <uv_vertex>\n#include <skinbase_vertex>\n#ifdef USE_DISPLACEMENTMAP\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinnormal_vertex>\n#endif\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\nvHighPrecisionZW=gl_Position.zw;}",depth_frag:"#if DEPTH_PACKING==3200\nuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;void main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(1.0);\n#if DEPTH_PACKING==3200\ndiffuseColor.a=opacity;\n#endif\n#include <map_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <logdepthbuf_fragment>\nfloat fragCoordZ=0.5*vHighPrecisionZW[0]/vHighPrecisionZW[1]+0.5;\n#if DEPTH_PACKING==3200\ngl_FragColor=vec4(vec3(1.0-fragCoordZ),opacity);\n#elif DEPTH_PACKING==3201\ngl_FragColor=packDepthToRGBA(fragCoordZ);\n#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <skinbase_vertex>\n#ifdef USE_DISPLACEMENTMAP\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinnormal_vertex>\n#endif\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <worldpos_vertex>\n#include <clipping_planes_vertex>\nvWorldPosition=worldPosition.xyz;}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;uniform float nearDistance;uniform float farDistance;varying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(1.0);\n#include <map_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\nfloat dist=length(vWorldPosition-referencePosition);dist=(dist-nearDistance)/(farDistance-nearDistance);dist=saturate(dist);gl_FragColor=packDepthToRGBA(dist);}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main(){vWorldDirection=transformDirection(position,modelMatrix);\n#include <begin_vertex>\n#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;varying vec3 vWorldDirection;\n#include <common>\nvoid main(){vec3 direction=normalize(vWorldDirection);vec2 sampleUV=equirectUv(direction);gl_FragColor=texture2D(tEquirect,sampleUV);\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;attribute float lineDistance;varying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){vLineDistance=scale*lineDistance;\n#include <color_vertex>\n#include <morphcolor_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\n#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;uniform float opacity;uniform float dashSize;uniform float totalSize;varying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nif(mod(vLineDistance,totalSize)>dashSize){discard;}vec3 outgoingLight=vec3(0.0);vec4 diffuseColor=vec4(diffuse,opacity);\n#include <logdepthbuf_fragment>\n#include <color_fragment>\noutgoingLight=diffuseColor.rgb;\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <uv2_vertex>\n#include <color_vertex>\n#include <morphcolor_vertex>\n#if defined(USE_ENVMAP)||defined(USE_SKINNING)\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#endif\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\n#include <worldpos_vertex>\n#include <envmap_vertex>\n#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;uniform float opacity;\n#ifndef FLAT_SHADED\nvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(diffuse,opacity);\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <specularmap_fragment>\nReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));\n#ifdef USE_LIGHTMAP\nvec4 lightMapTexel=texture2D(lightMap,vUv2);reflectedLight.indirectDiffuse+=lightMapTexel.rgb*lightMapIntensity*RECIPROCAL_PI;\n#else\nreflectedLight.indirectDiffuse+=vec3(1.0);\n#endif\n#include <aomap_fragment>\nreflectedLight.indirectDiffuse*=diffuseColor.rgb;vec3 outgoingLight=reflectedLight.indirectDiffuse;\n#include <envmap_fragment>\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <uv2_vertex>\n#include <color_vertex>\n#include <morphcolor_vertex>\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <normal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\nvViewPosition=-mvPosition.xyz;\n#include <worldpos_vertex>\n#include <envmap_vertex>\n#include <shadowmap_vertex>\n#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;uniform vec3 emissive;uniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(diffuse,opacity);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <specularmap_fragment>\n#include <normal_fragment_begin>\n#include <normal_fragment_maps>\n#include <emissivemap_fragment>\n#include <lights_lambert_fragment>\n#include <lights_fragment_begin>\n#include <lights_fragment_maps>\n#include <lights_fragment_end>\n#include <aomap_fragment>\nvec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+totalEmissiveRadiance;\n#include <envmap_fragment>\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <color_vertex>\n#include <morphcolor_vertex>\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <normal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\n#include <fog_vertex>\nvViewPosition=-mvPosition.xyz;}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;uniform float opacity;uniform sampler2D matcap;varying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(diffuse,opacity);\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <normal_fragment_begin>\n#include <normal_fragment_maps>\nvec3 viewDir=normalize(vViewPosition);vec3 x=normalize(vec3(viewDir.z,0.0,-viewDir.x));vec3 y=cross(viewDir,x);vec2 uv=vec2(dot(x,normal),dot(y,normal))*0.495+0.5;\n#ifdef USE_MATCAP\nvec4 matcapColor=texture2D(matcap,uv);\n#else\nvec4 matcapColor=vec4(vec3(mix(0.2,0.8,uv.y)),1.0);\n#endif\nvec3 outgoingLight=diffuseColor.rgb*matcapColor.rgb;\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined(FLAT_SHADED)||defined(USE_BUMPMAP)||defined(TANGENTSPACE_NORMALMAP)\nvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <normal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\n#if defined(FLAT_SHADED)||defined(USE_BUMPMAP)||defined(TANGENTSPACE_NORMALMAP)\nvViewPosition=-mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined(FLAT_SHADED)||defined(USE_BUMPMAP)||defined(TANGENTSPACE_NORMALMAP)\nvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\n#include <logdepthbuf_fragment>\n#include <normal_fragment_begin>\n#include <normal_fragment_maps>\ngl_FragColor=vec4(packNormalToRGB(normal),opacity);\n#ifdef OPAQUE\ngl_FragColor.a=1.0;\n#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <uv2_vertex>\n#include <color_vertex>\n#include <morphcolor_vertex>\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <normal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\nvViewPosition=-mvPosition.xyz;\n#include <worldpos_vertex>\n#include <envmap_vertex>\n#include <shadowmap_vertex>\n#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;uniform vec3 emissive;uniform vec3 specular;uniform float shininess;uniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(diffuse,opacity);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <specularmap_fragment>\n#include <normal_fragment_begin>\n#include <normal_fragment_maps>\n#include <emissivemap_fragment>\n#include <lights_phong_fragment>\n#include <lights_fragment_begin>\n#include <lights_fragment_maps>\n#include <lights_fragment_end>\n#include <aomap_fragment>\nvec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular+totalEmissiveRadiance;\n#include <envmap_fragment>\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\nvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <uv2_vertex>\n#include <color_vertex>\n#include <morphcolor_vertex>\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <normal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\nvViewPosition=-mvPosition.xyz;\n#include <worldpos_vertex>\n#include <shadowmap_vertex>\n#include <fog_vertex>\n#ifdef USE_TRANSMISSION\nvWorldPosition=worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n#define IOR\n#define SPECULAR\n#endif\nuniform vec3 diffuse;uniform vec3 emissive;uniform float roughness;uniform float metalness;uniform float opacity;\n#ifdef IOR\nuniform float ior;\n#endif\n#ifdef SPECULAR\nuniform float specularIntensity;uniform vec3 specularColor;\n#ifdef USE_SPECULARINTENSITYMAP\nuniform sampler2D specularIntensityMap;\n#endif\n#ifdef USE_SPECULARCOLORMAP\nuniform sampler2D specularColorMap;\n#endif\n#endif\n#ifdef USE_CLEARCOAT\nuniform float clearcoat;uniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\nuniform float iridescence;uniform float iridescenceIOR;uniform float iridescenceThicknessMinimum;uniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\nuniform vec3 sheenColor;uniform float sheenRoughness;\n#ifdef USE_SHEENCOLORMAP\nuniform sampler2D sheenColorMap;\n#endif\n#ifdef USE_SHEENROUGHNESSMAP\nuniform sampler2D sheenRoughnessMap;\n#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(diffuse,opacity);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <roughnessmap_fragment>\n#include <metalnessmap_fragment>\n#include <normal_fragment_begin>\n#include <normal_fragment_maps>\n#include <clearcoat_normal_fragment_begin>\n#include <clearcoat_normal_fragment_maps>\n#include <emissivemap_fragment>\n#include <lights_physical_fragment>\n#include <lights_fragment_begin>\n#include <lights_fragment_maps>\n#include <lights_fragment_end>\n#include <aomap_fragment>\nvec3 totalDiffuse=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse;vec3 totalSpecular=reflectedLight.directSpecular+reflectedLight.indirectSpecular;\n#include <transmission_fragment>\nvec3 outgoingLight=totalDiffuse+totalSpecular+totalEmissiveRadiance;\n#ifdef USE_SHEEN\nfloat sheenEnergyComp=1.0-0.157*max3(material.sheenColor);outgoingLight=outgoingLight*sheenEnergyComp+sheenSpecular;\n#endif\n#ifdef USE_CLEARCOAT\nfloat dotNVcc=saturate(dot(geometry.clearcoatNormal,geometry.viewDir));vec3 Fcc=F_Schlick(material.clearcoatF0,material.clearcoatF90,dotNVcc);outgoingLight=outgoingLight*(1.0-material.clearcoat*Fcc)+clearcoatSpecular*material.clearcoat;\n#endif\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <uv2_vertex>\n#include <color_vertex>\n#include <morphcolor_vertex>\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <normal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\nvViewPosition=-mvPosition.xyz;\n#include <worldpos_vertex>\n#include <shadowmap_vertex>\n#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;uniform vec3 emissive;uniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(diffuse,opacity);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <normal_fragment_begin>\n#include <normal_fragment_maps>\n#include <emissivemap_fragment>\n#include <lights_toon_fragment>\n#include <lights_fragment_begin>\n#include <lights_fragment_maps>\n#include <lights_fragment_end>\n#include <aomap_fragment>\nvec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+totalEmissiveRadiance;\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",points_vert:"uniform float size;uniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <color_vertex>\n#include <morphcolor_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <project_vertex>\ngl_PointSize=size;\n#ifdef USE_SIZEATTENUATION\nbool isPerspective=isPerspectiveMatrix(projectionMatrix);if(isPerspective)gl_PointSize*=(scale/-mvPosition.z);\n#endif\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\n#include <worldpos_vertex>\n#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;uniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec3 outgoingLight=vec3(0.0);vec4 diffuseColor=vec4(diffuse,opacity);\n#include <logdepthbuf_fragment>\n#include <map_particle_fragment>\n#include <color_fragment>\n#include <alphatest_fragment>\noutgoingLight=diffuseColor.rgb;\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main(){\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <project_vertex>\n#include <worldpos_vertex>\n#include <shadowmap_vertex>\n#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;uniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main(){gl_FragColor=vec4(color,opacity*(1.0-getShadowMask()));\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;uniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\nvec4 mvPosition=modelViewMatrix*vec4(0.0,0.0,0.0,1.0);vec2 scale;scale.x=length(vec3(modelMatrix[0].x,modelMatrix[0].y,modelMatrix[0].z));scale.y=length(vec3(modelMatrix[1].x,modelMatrix[1].y,modelMatrix[1].z));\n#ifndef USE_SIZEATTENUATION\nbool isPerspective=isPerspectiveMatrix(projectionMatrix);if(isPerspective)scale*=-mvPosition.z;\n#endif\nvec2 alignedPosition=(position.xy-(center-vec2(0.5)))*scale;vec2 rotatedPosition;rotatedPosition.x=cos(rotation)*alignedPosition.x-sin(rotation)*alignedPosition.y;rotatedPosition.y=sin(rotation)*alignedPosition.x+cos(rotation)*alignedPosition.y;mvPosition.xy+=rotatedPosition;gl_Position=projectionMatrix*mvPosition;\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\n#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;uniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec3 outgoingLight=vec3(0.0);vec4 diffuseColor=vec4(diffuse,opacity);\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\noutgoingLight=diffuseColor.rgb;\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n}"},hj={common:{diffuse:{value:new rz(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new _U},uv2Transform:{value:new _U},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new yU(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new rz(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new rz(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new _U}},sprite:{diffuse:{value:new rz(16777215)},opacity:{value:1},center:{value:new yU(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new _U}}},dj={basic:{uniforms:IB([hj.common,hj.specularmap,hj.envmap,hj.aomap,hj.lightmap,hj.fog]),vertexShader:fj.meshbasic_vert,fragmentShader:fj.meshbasic_frag},lambert:{uniforms:IB([hj.common,hj.specularmap,hj.envmap,hj.aomap,hj.lightmap,hj.emissivemap,hj.bumpmap,hj.normalmap,hj.displacementmap,hj.fog,hj.lights,{emissive:{value:new rz(0)}}]),vertexShader:fj.meshlambert_vert,fragmentShader:fj.meshlambert_frag},phong:{uniforms:IB([hj.common,hj.specularmap,hj.envmap,hj.aomap,hj.lightmap,hj.emissivemap,hj.bumpmap,hj.normalmap,hj.displacementmap,hj.fog,hj.lights,{emissive:{value:new rz(0)},specular:{value:new rz(1118481)},shininess:{value:30}}]),vertexShader:fj.meshphong_vert,fragmentShader:fj.meshphong_frag},standard:{uniforms:IB([hj.common,hj.envmap,hj.aomap,hj.lightmap,hj.emissivemap,hj.bumpmap,hj.normalmap,hj.displacementmap,hj.roughnessmap,hj.metalnessmap,hj.fog,hj.lights,{emissive:{value:new rz(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:fj.meshphysical_vert,fragmentShader:fj.meshphysical_frag},toon:{uniforms:IB([hj.common,hj.aomap,hj.lightmap,hj.emissivemap,hj.bumpmap,hj.normalmap,hj.displacementmap,hj.gradientmap,hj.fog,hj.lights,{emissive:{value:new rz(0)}}]),vertexShader:fj.meshtoon_vert,fragmentShader:fj.meshtoon_frag},matcap:{uniforms:IB([hj.common,hj.bumpmap,hj.normalmap,hj.displacementmap,hj.fog,{matcap:{value:null}}]),vertexShader:fj.meshmatcap_vert,fragmentShader:fj.meshmatcap_frag},points:{uniforms:IB([hj.points,hj.fog]),vertexShader:fj.points_vert,fragmentShader:fj.points_frag},dashed:{uniforms:IB([hj.common,hj.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fj.linedashed_vert,fragmentShader:fj.linedashed_frag},depth:{uniforms:IB([hj.common,hj.displacementmap]),vertexShader:fj.depth_vert,fragmentShader:fj.depth_frag},normal:{uniforms:IB([hj.common,hj.bumpmap,hj.normalmap,hj.displacementmap,{opacity:{value:1}}]),vertexShader:fj.meshnormal_vert,fragmentShader:fj.meshnormal_frag},sprite:{uniforms:IB([hj.sprite,hj.fog]),vertexShader:fj.sprite_vert,fragmentShader:fj.sprite_frag},background:{uniforms:{uvTransform:{value:new _U},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:fj.background_vert,fragmentShader:fj.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:fj.backgroundCube_vert,fragmentShader:fj.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fj.cube_vert,fragmentShader:fj.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fj.equirect_vert,fragmentShader:fj.equirect_frag},distanceRGBA:{uniforms:IB([hj.common,hj.displacementmap,{referencePosition:{value:new Ez},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:fj.distanceRGBA_vert,fragmentShader:fj.distanceRGBA_frag},shadow:{uniforms:IB([hj.lights,hj.fog,{color:{value:new rz(0)},opacity:{value:1}}]),vertexShader:fj.shadow_vert,fragmentShader:fj.shadow_frag}};dj.physical={uniforms:IB([dj.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new yU(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new rz(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new yU},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new rz(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new rz(1,1,1)},specularColorMap:{value:null}}]),vertexShader:fj.meshphysical_vert,fragmentShader:fj.meshphysical_frag};var pj={r:0,b:0,g:0};function vj(e,t,n,r,i,a,o){var s,u,l=new rz(0),c=!0===a?0:1,f=null,h=0,d=null;function p(t,n){t.getRGB(pj,UB(e)),r.buffers.color.setClear(pj.r,pj.g,pj.b,n,o)}return{getClearColor:function(){return l},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;l.set(e),p(l,c=t)},getClearAlpha:function(){return c},setClearAlpha:function(e){p(l,c=e)},render:function(r,a){var o=!1,v=!0===a.isScene?a.background:null;v&&v.isTexture&&(v=(a.backgroundBlurriness>0?n:t).get(v));var m=e.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(v=null),null===v?p(l,c):v&&v.isColor&&(p(v,1),o=!0),(e.autoClear||o)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===xR)?(void 0===u&&((u=new PB(new DB(1,1,1),new jB({name:"BackgroundCubeMaterial",uniforms:NB(dj.backgroundCube.uniforms),vertexShader:dj.backgroundCube.vertexShader,fragmentShader:dj.backgroundCube.fragmentShader,side:kA,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=v,u.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=a.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=a.backgroundIntensity,u.material.toneMapped=v.encoding!==kC,f===v&&h===v.version&&d===e.toneMapping||(u.material.needsUpdate=!0,f=v,h=v.version,d=e.toneMapping),u.layers.enableAll(),r.unshift(u,u.geometry,u.material,0,0,null)):v&&v.isTexture&&(void 0===s&&((s=new PB(new cj(2,2),new jB({name:"BackgroundMaterial",uniforms:NB(dj.background.uniforms),vertexShader:dj.background.vertexShader,fragmentShader:dj.background.fragmentShader,side:CA,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(s)),s.material.uniforms.t2D.value=v,s.material.uniforms.backgroundIntensity.value=a.backgroundIntensity,s.material.toneMapped=v.encoding!==kC,!0===v.matrixAutoUpdate&&v.updateMatrix(),s.material.uniforms.uvTransform.value.copy(v.matrix),f===v&&h===v.version&&d===e.toneMapping||(s.material.needsUpdate=!0,f=v,h=v.version,d=e.toneMapping),s.layers.enableAll(),r.unshift(s,s.geometry,s.material,0,0,null))}}}function mj(e,t,n,r){var i=e.getParameter(34921),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==a,s={},u=d(null),l=u,c=!1;function f(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function d(e){for(var t=[],n=[],r=[],a=0;a<i;a++)t[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){for(var e=l.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function v(e){m(e,0)}function m(n,i){var a=l.newAttributes,o=l.enabledAttributes,s=l.attributeDivisors;(a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==i)&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function g(){for(var t=l.newAttributes,n=l.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,i,a,o,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,a,o,s):e.vertexAttribIPointer(t,n,i,o,s)}function _(){b(),c=!0,l!==u&&f((l=u).object)}function b(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,h,_,b){var x=!1;if(o){var w=function(t,n,i){var o=!0===i.wireframe,u=s[t.id];void 0===u&&(u={},s[t.id]=u);var l=u[n.id];void 0===l&&(l={},u[n.id]=l);var c=l[o];void 0===c&&(c=d(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),l[o]=c);return c}(_,h,u);l!==w&&f((l=w).object),x=function(e,t,n,r){var i=l.attributes,a=t.attributes,o=0,s=n.getAttributes();for(var u in s){if(s[u].location>=0){var c=i[u],f=a[u];if(void 0===f&&("instanceMatrix"===u&&e.instanceMatrix&&(f=e.instanceMatrix),"instanceColor"===u&&e.instanceColor&&(f=e.instanceColor)),void 0===c)return!0;if(c.attribute!==f)return!0;if(f&&c.data!==f.data)return!0;o++}}return l.attributesNum!==o||l.index!==r}(i,_,h,b),x&&function(e,t,n,r){var i={},a=t.attributes,o=0,s=n.getAttributes();for(var u in s){if(s[u].location>=0){var c=a[u];void 0===c&&("instanceMatrix"===u&&e.instanceMatrix&&(c=e.instanceMatrix),"instanceColor"===u&&e.instanceColor&&(c=e.instanceColor));var f={};f.attribute=c,c&&c.data&&(f.data=c.data),i[u]=f,o++}}l.attributes=i,l.attributesNum=o,l.index=r}(i,_,h,b)}else{var S=!0===u.wireframe;l.geometry===_.id&&l.program===h.id&&l.wireframe===S||(l.geometry=_.id,l.program=h.id,l.wireframe=S,x=!0)}null!==b&&n.update(b,34963),(x||c)&&(c=!1,function(i,a,o,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();var u=s.attributes,l=o.getAttributes(),c=a.defaultAttributeValues;for(var f in l){var h=l[f];if(h.location>=0){var d=u[f];if(void 0===d&&("instanceMatrix"===f&&i.instanceMatrix&&(d=i.instanceMatrix),"instanceColor"===f&&i.instanceColor&&(d=i.instanceColor)),void 0!==d){var _=d.normalized,b=d.itemSize,x=n.get(d);if(void 0===x)continue;var w=x.buffer,S=x.type,M=x.bytesPerElement;if(d.isInterleavedBufferAttribute){var T=d.data,E=T.stride,A=d.offset;if(T.isInstancedInterleavedBuffer){for(var R=0;R<h.locationSize;R++)m(h.location+R,T.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=T.meshPerAttribute*T.count)}else for(var C=0;C<h.locationSize;C++)v(h.location+C);e.bindBuffer(34962,w);for(var k=0;k<h.locationSize;k++)y(h.location+k,b/h.locationSize,S,_,E*M,(A+b/h.locationSize*k)*M)}else{if(d.isInstancedBufferAttribute){for(var P=0;P<h.locationSize;P++)m(h.location+P,d.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=d.meshPerAttribute*d.count)}else for(var L=0;L<h.locationSize;L++)v(h.location+L);e.bindBuffer(34962,w);for(var O=0;O<h.locationSize;O++)y(h.location+O,b/h.locationSize,S,_,b*M,b/h.locationSize*O*M)}}else if(void 0!==c){var D=c[f];if(void 0!==D)switch(D.length){case 2:e.vertexAttrib2fv(h.location,D);break;case 3:e.vertexAttrib3fv(h.location,D);break;case 4:e.vertexAttrib4fv(h.location,D);break;default:e.vertexAttrib1fv(h.location,D)}}}}g()}(i,u,h,_),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:_,resetDefaultState:b,dispose:function(){for(var e in _(),s){var t=s[e];for(var n in t){var r=t[n];for(var i in r)h(r[i].object),delete r[i];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var i in r)h(r[i].object),delete r[i];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var i in r)h(r[i].object),delete r[i];delete n[e.id]}}},initAttributes:p,enableAttribute:v,disableUnusedAttributes:g}}function gj(e,t,n,r){var i,a=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,o,s){if(0!==s){var u,l;if(a)u=e,l="drawArraysInstanced";else if(l="drawArraysInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[l](i,r,o,s),n.update(o,i,s)}}}function yj(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,o=void 0!==n.precision?n.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var u=a||t.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),f=e.getParameter(35660),h=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),v=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),y=f>0,_=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:v,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:_,floatVertexTextures:y&&_,maxSamples:a?e.getParameter(36183):0}}function _j(e){var t=this,n=null,r=0,i=!1,a=!1,o=new iH,s=new _U,u={value:null,needsUpdate:!1};function l(e,n,r,i){var a=null!==e?e.length:0,l=null;if(0!==a){if(l=u.value,!0!==i||null===l){var c=r+4*a,f=n.matrixWorldInverse;s.getNormalMatrix(f),(null===l||l.length<c)&&(l=new Float32Array(c));for(var h=0,d=r;h!==a;++h,d+=4)o.copy(e[h]).applyMatrix4(f,s),o.normal.toArray(l,d),l[d+3]=o.constant}u.value=l,u.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){var n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){a=!0,l(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=l(e,t,0)},this.setState=function(o,s,c){var f=o.clippingPlanes,h=o.clipIntersection,d=o.clipShadows,p=e.get(o);if(!i||null===f||0===f.length||a&&!d)a?l(null):function(){u.value!==n&&(u.value=n,u.needsUpdate=r>0);t.numPlanes=r,t.numIntersection=0}();else{var v=a?0:r,m=4*v,g=p.clippingState||null;u.value=g,g=l(f,s,m,c);for(var y=0;y!==m;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=v}}}function bj(e){var t=new WeakMap;function n(e,t){return t===_R?e.mapping=gR:t===bR&&(e.mapping=yR),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var a=i.mapping;if(a===_R||a===bR){if(t.has(i))return n(t.get(i).texture,i.mapping);var o=i.image;if(o&&o.height>0){var s=new eH(o.height/2);return s.fromEquirectangularTexture(e,i),t.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}return i},dispose:function(){t=new WeakMap}}}var xj=ni,wj=Math.log,Sj=Math.LN2;function Mj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}xj({target:"Math",stat:!0},{log2:function(e){return wj(e)/Sj}});var Tj=function(e){yk(n,e);var t=Mj(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return gA(this,n),(e=t.call(this)).isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=i,e.top=a,e.bottom=o,e.near=s,e.far=u,e.updateProjectionMatrix(),e}return _A(n,[{key:"copy",value:function(e,t){return Mz(xk(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(i+=u*this.view.offsetX)+u*this.view.width,s=(o-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=Mz(xk(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(VB),Ej=4,Aj=[.125,.215,.35,.446,.526,.582],Rj=20,Cj=new Tj,kj=new rz,Pj=null,Lj=(1+Math.sqrt(5))/2,Oj=1/Lj,Dj=[new Ez(1,1,1),new Ez(-1,1,1),new Ez(1,1,-1),new Ez(-1,1,-1),new Ez(0,Lj,Oj),new Ez(0,Lj,-Oj),new Ez(Oj,0,Lj),new Ez(-Oj,0,Lj),new Ez(Lj,Oj,0),new Ez(-Lj,Oj,0)],Nj=function(){function e(t){gA(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return _A(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Pj=this._renderer.getRenderTarget(),this._setSize(256);var i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=Fj(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=zj(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(Pj),e.scissorTest=!1,Uj(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){e.mapping===gR||e.mapping===yR?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Pj=this._renderer.getRenderTarget();var n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:RR,minFilter:RR,generateMipmaps:!1,type:zR,format:GR,encoding:CC,depthBuffer:!1},r=Ij(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Ij(e,t,n);var i=this._lodMax,a=function(e){for(var t=[],n=[],r=[],i=e,a=e-Ej+1+Aj.length,o=0;o<a;o++){var s=Math.pow(2,i);n.push(s);var u=1/s;o>e-Ej?u=Aj[o-e+Ej-1]:0===o&&(u=0),r.push(u);for(var l=1/(s-2),c=-l,f=1+l,h=[c,c,f,c,f,f,c,c,f,f,c,f],d=6,p=6,v=3,m=2,g=1,y=new Float32Array(v*p*d),_=new Float32Array(m*p*d),b=new Float32Array(g*p*d),x=0;x<d;x++){var w=x%3*2/3-1,S=x>2?0:-1,M=[w,S,0,w+2/3,S,0,w+2/3,S+1,0,w,S,0,w+2/3,S+1,0,w,S+1,0];y.set(M,v*p*x),_.set(h,m*p*x);var T=[x,x,x,x,x,x];b.set(T,g*p*x)}var E=new mB;E.setAttribute("position",new iB(y,v)),E.setAttribute("uv",new iB(_,m)),E.setAttribute("faceIndex",new iB(b,g)),t.push(E),i>Ej&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(i);this._sizeLods=a.sizeLods,this._lodPlanes=a.lodPlanes,this._sigmas=a.sigmas,this._blurMaterial=function(e,t,n){var r=new Float32Array(Rj),i=new Ez(0,1,0),a=new jB({name:"SphericalGaussianBlur",defines:{n:Rj,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"precision mediump float;precision mediump int;attribute float faceIndex;varying vec3 vOutputDirection;vec3 getDirection(vec2 uv,float face){uv=2.0*uv-1.0;vec3 direction=vec3(uv,1.0);if(face==0.0){direction=direction.zyx;}else if(face==1.0){direction=direction.xzy;direction.xz*=-1.0;}else if(face==2.0){direction.x*=-1.0;}else if(face==3.0){direction=direction.zyx;direction.xz*=-1.0;}else if(face==4.0){direction=direction.xzy;direction.xy*=-1.0;}else if(face==5.0){direction.z*=-1.0;}return direction;}void main(){vOutputDirection=getDirection(uv,faceIndex);gl_Position=vec4(position,1.0);}",fragmentShader:"precision mediump float;precision mediump int;varying vec3 vOutputDirection;uniform sampler2D envMap;uniform int samples;uniform float weights[n];uniform bool latitudinal;uniform float dTheta;uniform float mipInt;uniform vec3 poleAxis;\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\nvec3 getSample(float theta,vec3 axis){float cosTheta=cos(theta);vec3 sampleDirection=vOutputDirection*cosTheta+cross(axis,vOutputDirection)*sin(theta)+axis*dot(axis,vOutputDirection)*(1.0-cosTheta);return bilinearCubeUV(envMap,sampleDirection,mipInt);}void main(){vec3 axis=latitudinal?poleAxis:cross(poleAxis,vOutputDirection);if(all(equal(axis,vec3(0.0)))){axis=vec3(vOutputDirection.z,0.0,-vOutputDirection.x);}axis=normalize(axis);gl_FragColor=vec4(0.0,0.0,0.0,1.0);gl_FragColor.rgb+=weights[0]*getSample(0.0,axis);for(int i=1;i<n;i++){if(i>=samples){break;}float theta=dTheta*float(i);gl_FragColor.rgb+=weights[i]*getSample(-1.0*theta,axis);gl_FragColor.rgb+=weights[i]*getSample(theta,axis);}}",blending:LA,depthTest:!1,depthWrite:!1});return a}(i,e,t)}return r}},{key:"_compileMaterial",value:function(e){var t=new PB(this._lodPlanes[0],e);this._renderer.compile(t,Cj)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var i=new qB(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,u=s.autoClear,l=s.toneMapping;s.getClearColor(kj),s.toneMapping=fR,s.autoClear=!1;var c=new eB({name:"PMREM.Background",side:kA,depthWrite:!1,depthTest:!1}),f=new PB(new DB,c),h=!1,d=e.background;d?d.isColor&&(c.color.copy(d),e.background=null,h=!0):(c.color.copy(kj),h=!0);for(var p=0;p<6;p++){var v=p%3;0===v?(i.up.set(0,a[p],0),i.lookAt(o[p],0,0)):1===v?(i.up.set(0,0,a[p]),i.lookAt(0,o[p],0)):(i.up.set(0,a[p],0),i.lookAt(0,0,o[p]));var m=this._cubeSize;Uj(r,v*m,p>2?m:0,m,m),s.setRenderTarget(r),h&&s.render(f,i),s.render(e,i)}f.geometry.dispose(),f.material.dispose(),s.toneMapping=l,s.autoClear=u,e.background=d}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,r=e.mapping===gR||e.mapping===yR;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Fj()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=zj());var i=r?this._cubemapMaterial:this._equirectMaterial,a=new PB(this._lodPlanes[0],i);i.uniforms.envMap.value=e;var o=this._cubeSize;Uj(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,Cj)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<this._lodPlanes.length;r++){var i=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=Dj[(r-1)%Dj.length];this._blur(e,r-1,r,i,a)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,i){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}},{key:"_halfBlur",value:function(e,t,n,r,i,a,o){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var l=new PB(this._lodPlanes[r],u),c=u.uniforms,f=this._sizeLods[n]-1,h=isFinite(i)?Math.PI/(2*f):2*Math.PI/(2*Rj-1),d=i/h,p=isFinite(i)?1+Math.floor(3*d):Rj;p>Rj&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(Rj));for(var v=[],m=0,g=0;g<Rj;++g){var y=g/d,_=Math.exp(-y*y/2);v.push(_),0===g?m+=_:g<p&&(m+=2*_)}for(var b=0;b<v.length;b++)v[b]=v[b]/m;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=v,c.latitudinal.value="latitudinal"===a,o&&(c.poleAxis.value=o);var x=this._lodMax;c.dTheta.value=h,c.mipInt.value=x-n;var w=this._sizeLods[r];Uj(t,3*w*(r>x-Ej?r-x+Ej:0),4*(this._cubeSize-w),3*w,2*w),s.setRenderTarget(t),s.render(l,Cj)}}]),e}();function Ij(e,t,n){var r=new hz(e,t,n);return r.texture.mapping=xR,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Uj(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function zj(){return new jB({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"precision mediump float;precision mediump int;attribute float faceIndex;varying vec3 vOutputDirection;vec3 getDirection(vec2 uv,float face){uv=2.0*uv-1.0;vec3 direction=vec3(uv,1.0);if(face==0.0){direction=direction.zyx;}else if(face==1.0){direction=direction.xzy;direction.xz*=-1.0;}else if(face==2.0){direction.x*=-1.0;}else if(face==3.0){direction=direction.zyx;direction.xz*=-1.0;}else if(face==4.0){direction=direction.xzy;direction.xy*=-1.0;}else if(face==5.0){direction.z*=-1.0;}return direction;}void main(){vOutputDirection=getDirection(uv,faceIndex);gl_Position=vec4(position,1.0);}",fragmentShader:"precision mediump float;precision mediump int;varying vec3 vOutputDirection;uniform sampler2D envMap;\n#include <common>\nvoid main(){vec3 outputDirection=normalize(vOutputDirection);vec2 uv=equirectUv(outputDirection);gl_FragColor=vec4(texture2D(envMap,uv).rgb,1.0);}",blending:LA,depthTest:!1,depthWrite:!1})}function Fj(){return new jB({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"precision mediump float;precision mediump int;attribute float faceIndex;varying vec3 vOutputDirection;vec3 getDirection(vec2 uv,float face){uv=2.0*uv-1.0;vec3 direction=vec3(uv,1.0);if(face==0.0){direction=direction.zyx;}else if(face==1.0){direction=direction.xzy;direction.xz*=-1.0;}else if(face==2.0){direction.x*=-1.0;}else if(face==3.0){direction=direction.zyx;direction.xz*=-1.0;}else if(face==4.0){direction=direction.xzy;direction.xy*=-1.0;}else if(face==5.0){direction.z*=-1.0;}return direction;}void main(){vOutputDirection=getDirection(uv,faceIndex);gl_Position=vec4(position,1.0);}",fragmentShader:"precision mediump float;precision mediump int;uniform float flipEnvMap;varying vec3 vOutputDirection;uniform samplerCube envMap;void main(){gl_FragColor=textureCube(envMap,vec3(flipEnvMap*vOutputDirection.x,vOutputDirection.yz));}",blending:LA,depthTest:!1,depthWrite:!1})}function Bj(e){var t=new WeakMap,n=null;function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){var a=i.mapping,o=a===_R||a===bR,s=a===gR||a===yR;if(o||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;var u=t.get(i);return null===n&&(n=new Nj(e)),u=o?n.fromEquirectangular(i,u):n.fromCubemap(i,u),t.set(i,u),u.texture}if(t.has(i))return t.get(i).texture;var l=i.image;if(o&&l&&l.height>0||s&&l&&function(e){for(var t=0,n=6,r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(l)){null===n&&(n=new Nj(e));var c=o?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,c),i.addEventListener("dispose",r),c.texture}return null}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Hj(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function jj(e,t,n,r){var i={},a=new WeakMap;function o(e){var s=e.target;for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);s.removeEventListener("dispose",o),delete i[s.id];var l=a.get(s);l&&(t.remove(l),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,i=e.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var u=0,l=s.length;u<l;u+=3){var c=s[u+0],f=s[u+1],h=s[u+2];n.push(c,f,f,h,h,c)}}else{var d=i.array;o=i.version;for(var p=0,v=d.length/3-1;p<v;p+=3){var m=p+0,g=p+1,y=p+2;n.push(m,g,g,y,y,m)}}var _=new(xU(n)?oB:aB)(n,1);_.version=o;var b=a.get(e);b&&t.remove(b),a.set(e,_)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var i=e.morphAttributes;for(var a in i)for(var o=i[a],s=0,u=o.length;s<u;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function Gj(e,t,n,r){var i,a,o,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,a,t*o),n.update(r,i,1)},this.renderInstances=function(r,u,l){if(0!==l){var c,f;if(s)c=e,f="drawElementsInstanced";else if(f="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[f](i,u,a,r*o,l),n.update(u,i,l)}}}function Vj(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Wj(e,t){return e[0]-t[0]}function qj(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Xj(e,t,n){for(var r={},i=new Float32Array(8),a=new WeakMap,o=new cz,s=[],u=0;u<8;u++)s[u]=[u,0];return{update:function(u,l,c,f){var h=u.morphTargetInfluences;if(!0===t.isWebGL2){var d=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,p=void 0!==d?d.length:0,v=a.get(l);if(void 0===v||v.count!==p){void 0!==v&&v.texture.dispose();var m=void 0!==l.morphAttributes.position,g=void 0!==l.morphAttributes.normal,y=void 0!==l.morphAttributes.color,_=l.morphAttributes.position||[],b=l.morphAttributes.normal||[],x=l.morphAttributes.color||[],w=0;!0===m&&(w=1),!0===g&&(w=2),!0===y&&(w=3);var S=l.attributes.position.count*w,M=1;S>t.maxTextureSize&&(M=Math.ceil(S/t.maxTextureSize),S=t.maxTextureSize);var T=new Float32Array(S*M*4*p),E=new pz(T,S,M,p);E.type=UR,E.needsUpdate=!0;for(var A=4*w,R=0;R<p;R++)for(var C=_[R],k=b[R],P=x[R],L=S*M*4*R,O=0;O<C.count;O++){var D=O*A;!0===m&&(o.fromBufferAttribute(C,O),T[L+D+0]=o.x,T[L+D+1]=o.y,T[L+D+2]=o.z,T[L+D+3]=0),!0===g&&(o.fromBufferAttribute(k,O),T[L+D+4]=o.x,T[L+D+5]=o.y,T[L+D+6]=o.z,T[L+D+7]=0),!0===y&&(o.fromBufferAttribute(P,O),T[L+D+8]=o.x,T[L+D+9]=o.y,T[L+D+10]=o.z,T[L+D+11]=4===P.itemSize?o.w:1)}v={count:p,texture:E,size:new yU(S,M)},a.set(l,v),l.addEventListener("dispose",(function e(){E.dispose(),a.delete(l),l.removeEventListener("dispose",e)}))}for(var N=0,I=0;I<h.length;I++)N+=h[I];var U=l.morphTargetsRelative?1:1-N;f.getUniforms().setValue(e,"morphTargetBaseInfluence",U),f.getUniforms().setValue(e,"morphTargetInfluences",h),f.getUniforms().setValue(e,"morphTargetsTexture",v.texture,n),f.getUniforms().setValue(e,"morphTargetsTextureSize",v.size)}else{var z=void 0===h?0:h.length,F=r[l.id];if(void 0===F||F.length!==z){F=[];for(var B=0;B<z;B++)F[B]=[B,0];r[l.id]=F}for(var H=0;H<z;H++){var j=F[H];j[0]=H,j[1]=h[H]}F.sort(qj);for(var G=0;G<8;G++)G<z&&F[G][1]?(s[G][0]=F[G][0],s[G][1]=F[G][1]):(s[G][0]=Number.MAX_SAFE_INTEGER,s[G][1]=0);s.sort(Wj);for(var V=l.morphAttributes.position,W=l.morphAttributes.normal,q=0,X=0;X<8;X++){var Y=s[X],Z=Y[0],K=Y[1];Z!==Number.MAX_SAFE_INTEGER&&K?(V&&l.getAttribute("morphTarget"+X)!==V[Z]&&l.setAttribute("morphTarget"+X,V[Z]),W&&l.getAttribute("morphNormal"+X)!==W[Z]&&l.setAttribute("morphNormal"+X,W[Z]),i[X]=K,q+=K):(V&&!0===l.hasAttribute("morphTarget"+X)&&l.deleteAttribute("morphTarget"+X),W&&!0===l.hasAttribute("morphNormal"+X)&&l.deleteAttribute("morphNormal"+X),i[X]=0)}var $=l.morphTargetsRelative?1:1-q;f.getUniforms().setValue(e,"morphTargetBaseInfluence",$),f.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function Yj(e,t,n,r){var i=new WeakMap;function a(e){var t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var o=r.render.frame,s=e.geometry,u=t.get(e,s);return i.get(u)!==o&&(t.update(u),i.set(u,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),u},dispose:function(){i=new WeakMap}}}ni({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991});var Zj=tn.PROPER,Kj=i,$j=HT,Jj=KT.trim;ni({target:"String",proto:!0,forced:function(e){return Kj((function(){return!!$j[e]()||"âÂá "!=="âÂá "[e]()||Zj&&$j[e].name!==e}))}("trim")},{trim:function(){return Jj(this)}});var Qj=new lz,eG=new pz,tG=new mz,nG=new JB,rG=[],iG=[],aG=new Float32Array(16),oG=new Float32Array(9),sG=new Float32Array(4);function uG(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=rG[i];if(void 0===a&&(a=new Float32Array(i),rG[i]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function lG(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function cG(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function fG(e,t){var n=iG[t];void 0===n&&(n=new Int32Array(t),iG[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function hG(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function dG(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(lG(n,t))return;e.uniform2fv(this.addr,t),cG(n,t)}}function pG(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(lG(n,t))return;e.uniform3fv(this.addr,t),cG(n,t)}}function vG(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(lG(n,t))return;e.uniform4fv(this.addr,t),cG(n,t)}}function mG(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(lG(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),cG(n,t)}else{if(lG(n,r))return;sG.set(r),e.uniformMatrix2fv(this.addr,!1,sG),cG(n,r)}}function gG(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(lG(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),cG(n,t)}else{if(lG(n,r))return;oG.set(r),e.uniformMatrix3fv(this.addr,!1,oG),cG(n,r)}}function yG(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(lG(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),cG(n,t)}else{if(lG(n,r))return;aG.set(r),e.uniformMatrix4fv(this.addr,!1,aG),cG(n,r)}}function _G(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function bG(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(lG(n,t))return;e.uniform2iv(this.addr,t),cG(n,t)}}function xG(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(lG(n,t))return;e.uniform3iv(this.addr,t),cG(n,t)}}function wG(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(lG(n,t))return;e.uniform4iv(this.addr,t),cG(n,t)}}function SG(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function MG(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(lG(n,t))return;e.uniform2uiv(this.addr,t),cG(n,t)}}function TG(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(lG(n,t))return;e.uniform3uiv(this.addr,t),cG(n,t)}}function EG(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(lG(n,t))return;e.uniform4uiv(this.addr,t),cG(n,t)}}function AG(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||Qj,i)}function RG(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||tG,i)}function CG(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||nG,i)}function kG(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||eG,i)}function PG(e,t){e.uniform1fv(this.addr,t)}function LG(e,t){var n=uG(t,this.size,2);e.uniform2fv(this.addr,n)}function OG(e,t){var n=uG(t,this.size,3);e.uniform3fv(this.addr,n)}function DG(e,t){var n=uG(t,this.size,4);e.uniform4fv(this.addr,n)}function NG(e,t){var n=uG(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function IG(e,t){var n=uG(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function UG(e,t){var n=uG(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function zG(e,t){e.uniform1iv(this.addr,t)}function FG(e,t){e.uniform2iv(this.addr,t)}function BG(e,t){e.uniform3iv(this.addr,t)}function HG(e,t){e.uniform4iv(this.addr,t)}function jG(e,t){e.uniform1uiv(this.addr,t)}function GG(e,t){e.uniform2uiv(this.addr,t)}function VG(e,t){e.uniform3uiv(this.addr,t)}function WG(e,t){e.uniform4uiv(this.addr,t)}function qG(e,t,n){var r=this.cache,i=t.length,a=fG(n,i);lG(r,a)||(e.uniform1iv(this.addr,a),cG(r,a));for(var o=0;o!==i;++o)n.setTexture2D(t[o]||Qj,a[o])}function XG(e,t,n){var r=this.cache,i=t.length,a=fG(n,i);lG(r,a)||(e.uniform1iv(this.addr,a),cG(r,a));for(var o=0;o!==i;++o)n.setTexture3D(t[o]||tG,a[o])}function YG(e,t,n){var r=this.cache,i=t.length,a=fG(n,i);lG(r,a)||(e.uniform1iv(this.addr,a),cG(r,a));for(var o=0;o!==i;++o)n.setTextureCube(t[o]||nG,a[o])}function ZG(e,t,n){var r=this.cache,i=t.length,a=fG(n,i);lG(r,a)||(e.uniform1iv(this.addr,a),cG(r,a));for(var o=0;o!==i;++o)n.setTexture2DArray(t[o]||eG,a[o])}var KG=_A((function e(t,n,r){gA(this,e),this.id=t,this.addr=r,this.cache=[],this.setValue=function(e){switch(e){case 5126:return hG;case 35664:return dG;case 35665:return pG;case 35666:return vG;case 35674:return mG;case 35675:return gG;case 35676:return yG;case 5124:case 35670:return _G;case 35667:case 35671:return bG;case 35668:case 35672:return xG;case 35669:case 35673:return wG;case 5125:return SG;case 36294:return MG;case 36295:return TG;case 36296:return EG;case 35678:case 36198:case 36298:case 36306:case 35682:return AG;case 35679:case 36299:case 36307:return RG;case 35680:case 36300:case 36308:case 36293:return CG;case 36289:case 36303:case 36311:case 36292:return kG}}(n.type)})),$G=_A((function e(t,n,r){gA(this,e),this.id=t,this.addr=r,this.cache=[],this.size=n.size,this.setValue=function(e){switch(e){case 5126:return PG;case 35664:return LG;case 35665:return OG;case 35666:return DG;case 35674:return NG;case 35675:return IG;case 35676:return UG;case 5124:case 35670:return zG;case 35667:case 35671:return FG;case 35668:case 35672:return BG;case 35669:case 35673:return HG;case 5125:return jG;case 36294:return GG;case 36295:return VG;case 36296:return WG;case 35678:case 36198:case 36298:case 36306:case 35682:return qG;case 35679:case 36299:case 36307:return XG;case 35680:case 36300:case 36308:case 36293:return YG;case 36289:case 36303:case 36311:case 36292:return ZG}}(n.type)})),JG=function(){function e(t){gA(this,e),this.id=t,this.seq=[],this.map={}}return _A(e,[{key:"setValue",value:function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(e,t[o.id],n)}}}]),e}(),QG=/(\w+)(\])?(\[|\.)?/g;function eV(e,t){e.seq.push(t),e.map[t.id]=t}function tV(e,t,n){var r=e.name,i=r.length;for(QG.lastIndex=0;;){var a=QG.exec(r),o=QG.lastIndex,s=a[1],u="]"===a[2],l=a[3];if(u&&(s|=0),void 0===l||"["===l&&o+2===i){eV(n,void 0===l?new KG(s,e,t):new $G(s,e,t));break}var c=n.map[s];void 0===c&&eV(n,c=new JG(s)),n=c}}var nV=function(){function e(t,n){gA(this,e),this.seq=[],this.map={};for(var r=t.getProgramParameter(n,35718),i=0;i<r;++i){var a=t.getActiveUniform(n,i);tV(a,t.getUniformLocation(n,a.name),this)}}return _A(e,[{key:"setValue",value:function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)}},{key:"setOptional",value:function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)}}],[{key:"upload",value:function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}}},{key:"seqWithValue",value:function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n}}]),e}();function rV(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}var iV=0;function aV(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";var a=/ERROR: 0:(\d+)/.exec(i);if(a){var o=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){for(var n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length),o=i;o<a;o++){var s=o+1;r.push("".concat(s===t?">":" "," ").concat(s,": ").concat(n[o]))}return r.join("\n")}(e.getShaderSource(t),o)}return i}function oV(e,t){var n=function(e){switch(e){case CC:return["Linear","( value )"];case kC:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function sV(e,t){var n;switch(t){case hR:n="Linear";break;case dR:n="Reinhard";break;case pR:n="OptimizedCineon";break;case vR:n="ACESFilmic";break;case mR:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function uV(e){return""!==e}function lV(e,t){var n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function cV(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var fV=/^[ \t]*#include +<([\w\d./]+)>/gm;function hV(e){return e.replace(fV,dV)}function dV(e,t){var n=fj[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return hV(n)}var pV=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function vV(e){return e.replace(pV,mV)}function mV(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function gV(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function yV(e,t,n,r){var i,a,o=e.getContext(),s=n.defines,u=n.vertexShader,l=n.fragmentShader,c=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===EA?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===AA?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===RA&&(t="SHADOWMAP_TYPE_VSM"),t}(n),f=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case gR:case yR:t="ENVMAP_TYPE_CUBE";break;case xR:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),h=function(e){var t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===yR&&(t="ENVMAP_MODE_REFRACTION");return t}(n),d=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case uR:t="ENVMAP_BLENDING_MULTIPLY";break;case lR:t="ENVMAP_BLENDING_MIX";break;case cR:t="ENVMAP_BLENDING_ADD"}return t}(n),p=function(e){var t=e.envMapCubeUVHeight;if(null===t)return null;var n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),v=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(uV).join("\n")}(n),m=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),g=o.createProgram(),y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=[m].filter(uV).join("\n")).length>0&&(i+="\n"),(a=[v,m].filter(uV).join("\n")).length>0&&(a+="\n")):(i=[gV(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(uV).join("\n"),a=[v,gV(n),"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==fR?"#define TONE_MAPPING":"",n.toneMapping!==fR?fj.tonemapping_pars_fragment:"",n.toneMapping!==fR?sV("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",fj.encodings_pars_fragment,oV("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(uV).join("\n")),u=cV(u=lV(u=hV(u),n),n),l=cV(l=lV(l=hV(l),n),n),u=vV(u),l=vV(l),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",i=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,a=["#define varying in",n.glslVersion===HC?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===HC?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var _,b,x=y+a+l,w=rV(o,35633,y+i+u),S=rV(o,35632,x);if(o.attachShader(g,w),o.attachShader(g,S),void 0!==n.index0AttributeName?o.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),e.debug.checkShaderErrors){var M=o.getProgramInfoLog(g).trim(),T=o.getShaderInfoLog(w).trim(),E=o.getShaderInfoLog(S).trim(),A=!0,R=!0;if(!1===o.getProgramParameter(g,35714)){A=!1;var C=aV(o,w,"vertex"),k=aV(o,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(g,35715)+"\n\nProgram Info Log: "+M+"\n"+C+"\n"+k)}else""!==M?console.warn("THREE.WebGLProgram: Program Info Log:",M):""!==T&&""!==E||(R=!1);R&&(this.diagnostics={runnable:A,programLog:M,vertexShader:{log:T,prefix:i},fragmentShader:{log:E,prefix:a}})}return o.deleteShader(w),o.deleteShader(S),this.getUniforms=function(){return void 0===_&&(_=new nV(o,g)),_},this.getAttributes=function(){return void 0===b&&(b=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var a=e.getActiveAttrib(t,i),o=a.name,s=1;35674===a.type&&(s=2),35675===a.type&&(s=3),35676===a.type&&(s=4),n[o]={type:a.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(o,g)),b},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=iV++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=w,this.fragmentShader=S,this}function _V(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return bV(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bV(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function bV(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}fd("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Od);var xV=0,wV=function(){function e(){gA(this,e),this.shaderCache=new Map,this.materialCache=new Map}return _A(e,[{key:"update",value:function(e){var t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}},{key:"remove",value:function(e){var t,n=_V(this.materialCache.get(e));try{for(n.s();!(t=n.n()).done;){var r=t.value;r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r.code)}}catch(e){n.e(e)}finally{n.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}},{key:"_getShaderStage",value:function(e){var t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new SV(e),t.set(e,n)),n}}]),e}(),SV=_A((function e(t){gA(this,e),this.id=xV++,this.code=t,this.usedTimes=0}));function MV(e,t,n,r,i,a,o){var s=new SF,u=new wV,l=[],c=i.isWebGL2,f=i.logarithmicDepthBuffer,h=i.vertexTextures,d=i.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(a,s,l,v,m){var g=v.fog,y=m.geometry,_=a.isMeshStandardMaterial?v.environment:null,b=(a.isMeshStandardMaterial?n:t).get(a.envMap||_),x=b&&b.mapping===xR?b.image.height:null,w=p[a.type];null!==a.precision&&(d=i.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",d,"instead.");var S,M,T,E,A=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,R=void 0!==A?A.length:0,C=0;if(void 0!==y.morphAttributes.position&&(C=1),void 0!==y.morphAttributes.normal&&(C=2),void 0!==y.morphAttributes.color&&(C=3),w){var k=dj[w];S=k.vertexShader,M=k.fragmentShader}else S=a.vertexShader,M=a.fragmentShader,u.update(a),T=u.getVertexShaderID(a),E=u.getFragmentShaderID(a);var P=e.getRenderTarget(),L=a.alphaTest>0,O=a.clearcoat>0,D=a.iridescence>0;return{isWebGL2:c,shaderID:w,shaderName:a.type,vertexShader:S,fragmentShader:M,defines:a.defines,customVertexShaderID:T,customFragmentShaderID:E,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:d,instancing:!0===m.isInstancedMesh,instancingColor:!0===m.isInstancedMesh&&null!==m.instanceColor,supportsVertexTextures:h,outputEncoding:null===P?e.outputEncoding:!0===P.isXRRenderTarget?P.texture.encoding:CC,map:!!a.map,matcap:!!a.matcap,envMap:!!b,envMapMode:b&&b.mapping,envMapCubeUVHeight:x,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:a.normalMapType===DC,tangentSpaceNormalMap:a.normalMapType===OC,decodeVideoTexture:!!a.map&&!0===a.map.isVideoTexture&&a.map.encoding===kC,clearcoat:O,clearcoatMap:O&&!!a.clearcoatMap,clearcoatRoughnessMap:O&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:O&&!!a.clearcoatNormalMap,iridescence:D,iridescenceMap:D&&!!a.iridescenceMap,iridescenceThicknessMap:D&&!!a.iridescenceThicknessMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,opaque:!1===a.transparent&&a.blending===OA,alphaMap:!!a.alphaMap,alphaTest:L,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!y.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUvs:!!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatMap||a.clearcoatRoughnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.displacementMap||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheenColorMap||a.sheenRoughnessMap),uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap||!a.displacementMap),fog:!!g,useFog:!0===a.fog,fogExp2:g&&g.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:f,skinning:!0===m.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:R,morphTextureStride:C,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&l.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:fR,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===PA,flipSided:a.side===kA,useDepthPacking:!!a.depthPacking,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0);t.supportsVertexTextures&&s.enable(1);t.instancing&&s.enable(2);t.instancingColor&&s.enable(3);t.map&&s.enable(4);t.matcap&&s.enable(5);t.envMap&&s.enable(6);t.lightMap&&s.enable(7);t.aoMap&&s.enable(8);t.emissiveMap&&s.enable(9);t.bumpMap&&s.enable(10);t.normalMap&&s.enable(11);t.objectSpaceNormalMap&&s.enable(12);t.tangentSpaceNormalMap&&s.enable(13);t.clearcoat&&s.enable(14);t.clearcoatMap&&s.enable(15);t.clearcoatRoughnessMap&&s.enable(16);t.clearcoatNormalMap&&s.enable(17);t.iridescence&&s.enable(18);t.iridescenceMap&&s.enable(19);t.iridescenceThicknessMap&&s.enable(20);t.displacementMap&&s.enable(21);t.specularMap&&s.enable(22);t.roughnessMap&&s.enable(23);t.metalnessMap&&s.enable(24);t.gradientMap&&s.enable(25);t.alphaMap&&s.enable(26);t.alphaTest&&s.enable(27);t.vertexColors&&s.enable(28);t.vertexAlphas&&s.enable(29);t.vertexUvs&&s.enable(30);t.vertexTangents&&s.enable(31);t.uvsVertexOnly&&s.enable(32);e.push(s.mask),s.disableAll(),t.fog&&s.enable(0);t.useFog&&s.enable(1);t.flatShading&&s.enable(2);t.logarithmicDepthBuffer&&s.enable(3);t.skinning&&s.enable(4);t.morphTargets&&s.enable(5);t.morphNormals&&s.enable(6);t.morphColors&&s.enable(7);t.premultipliedAlpha&&s.enable(8);t.shadowMapEnabled&&s.enable(9);t.physicallyCorrectLights&&s.enable(10);t.doubleSided&&s.enable(11);t.flipSided&&s.enable(12);t.useDepthPacking&&s.enable(13);t.dithering&&s.enable(14);t.specularIntensityMap&&s.enable(15);t.specularColorMap&&s.enable(16);t.transmission&&s.enable(17);t.transmissionMap&&s.enable(18);t.thicknessMap&&s.enable(19);t.sheen&&s.enable(20);t.sheenColorMap&&s.enable(21);t.sheenRoughnessMap&&s.enable(22);t.decodeVideoTexture&&s.enable(23);t.opaque&&s.enable(24);e.push(s.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=p[e.type];if(n){var r=dj[n];t=zB.clone(r.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var r,i=0,o=l.length;i<o;i++){var s=l[i];if(s.cacheKey===n){++(r=s).usedTimes;break}}return void 0===r&&(r=new yV(e,n,t,a),l.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){var t=l.indexOf(e);l[t]=l[l.length-1],l.pop(),e.destroy()}},releaseShaderCache:function(e){u.remove(e)},programs:l,dispose:function(){u.dispose()}}}function TV(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function EV(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function AV(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function RV(){var e=[],t=0,n=[],r=[],i=[];function a(n,r,i,a,o,s){var u=e[t];return void 0===u?(u={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=u):(u.id=n.id,u.object=n,u.geometry=r,u.material=i,u.groupOrder=a,u.renderOrder=n.renderOrder,u.z=o,u.group=s),t++,u}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,o,s,u,l){var c=a(e,t,o,s,u,l);o.transmission>0?r.push(c):!0===o.transparent?i.push(c):n.push(c)},unshift:function(e,t,o,s,u,l){var c=a(e,t,o,s,u,l);o.transmission>0?r.unshift(c):!0===o.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(var n=t,r=e.length;n<r;n++){var i=e[n];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.group=null}},sort:function(e,t){n.length>1&&n.sort(e||EV),r.length>1&&r.sort(t||AV),i.length>1&&i.sort(t||AV)}}}function CV(){var e=new WeakMap;return{get:function(t,n){var r,i=e.get(t);return void 0===i?(r=new RV,e.set(t,[r])):n>=i.length?(r=new RV,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function kV(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Ez,color:new rz};break;case"SpotLight":n={position:new Ez,direction:new Ez,color:new rz,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ez,color:new rz,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ez,skyColor:new rz,groundColor:new rz};break;case"RectAreaLight":n={color:new rz,position:new Ez,halfWidth:new Ez,halfHeight:new Ez}}return e[t.id]=n,n}}}var PV=0;function LV(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function OV(e,t){for(var n,r=new kV,i=(n={},{get:function(e){if(void 0!==n[e.id])return n[e.id];var t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yU};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yU,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0},o=0;o<9;o++)a.probe.push(new Ez);var s=new Ez,u=new hF,l=new hF;return{setup:function(n,o){for(var s=0,u=0,l=0,c=0;c<9;c++)a.probe[c].set(0,0,0);var f=0,h=0,d=0,p=0,v=0,m=0,g=0,y=0,_=0,b=0;n.sort(LV);for(var x=!0!==o?Math.PI:1,w=0,S=n.length;w<S;w++){var M=n[w],T=M.color,E=M.intensity,A=M.distance,R=M.shadow&&M.shadow.map?M.shadow.map.texture:null;if(M.isAmbientLight)s+=T.r*E*x,u+=T.g*E*x,l+=T.b*E*x;else if(M.isLightProbe)for(var C=0;C<9;C++)a.probe[C].addScaledVector(M.sh.coefficients[C],E);else if(M.isDirectionalLight){var k=r.get(M);if(k.color.copy(M.color).multiplyScalar(M.intensity*x),M.castShadow){var P=M.shadow,L=i.get(M);L.shadowBias=P.bias,L.shadowNormalBias=P.normalBias,L.shadowRadius=P.radius,L.shadowMapSize=P.mapSize,a.directionalShadow[f]=L,a.directionalShadowMap[f]=R,a.directionalShadowMatrix[f]=M.shadow.matrix,m++}a.directional[f]=k,f++}else if(M.isSpotLight){var O=r.get(M);O.position.setFromMatrixPosition(M.matrixWorld),O.color.copy(T).multiplyScalar(E*x),O.distance=A,O.coneCos=Math.cos(M.angle),O.penumbraCos=Math.cos(M.angle*(1-M.penumbra)),O.decay=M.decay,a.spot[d]=O;var D=M.shadow;if(M.map&&(a.spotLightMap[_]=M.map,_++,D.updateMatrices(M),M.castShadow&&b++),a.spotLightMatrix[d]=D.matrix,M.castShadow){var N=i.get(M);N.shadowBias=D.bias,N.shadowNormalBias=D.normalBias,N.shadowRadius=D.radius,N.shadowMapSize=D.mapSize,a.spotShadow[d]=N,a.spotShadowMap[d]=R,y++}d++}else if(M.isRectAreaLight){var I=r.get(M);I.color.copy(T).multiplyScalar(E),I.halfWidth.set(.5*M.width,0,0),I.halfHeight.set(0,.5*M.height,0),a.rectArea[p]=I,p++}else if(M.isPointLight){var U=r.get(M);if(U.color.copy(M.color).multiplyScalar(M.intensity*x),U.distance=M.distance,U.decay=M.decay,M.castShadow){var z=M.shadow,F=i.get(M);F.shadowBias=z.bias,F.shadowNormalBias=z.normalBias,F.shadowRadius=z.radius,F.shadowMapSize=z.mapSize,F.shadowCameraNear=z.camera.near,F.shadowCameraFar=z.camera.far,a.pointShadow[h]=F,a.pointShadowMap[h]=R,a.pointShadowMatrix[h]=M.shadow.matrix,g++}a.point[h]=U,h++}else if(M.isHemisphereLight){var B=r.get(M);B.skyColor.copy(M.color).multiplyScalar(E*x),B.groundColor.copy(M.groundColor).multiplyScalar(E*x),a.hemi[v]=B,v++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(a.rectAreaLTC1=hj.LTC_FLOAT_1,a.rectAreaLTC2=hj.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(a.rectAreaLTC1=hj.LTC_HALF_1,a.rectAreaLTC2=hj.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=s,a.ambient[1]=u,a.ambient[2]=l;var H=a.hash;H.directionalLength===f&&H.pointLength===h&&H.spotLength===d&&H.rectAreaLength===p&&H.hemiLength===v&&H.numDirectionalShadows===m&&H.numPointShadows===g&&H.numSpotShadows===y&&H.numSpotMaps===_||(a.directional.length=f,a.spot.length=d,a.rectArea.length=p,a.point.length=h,a.hemi.length=v,a.directionalShadow.length=m,a.directionalShadowMap.length=m,a.pointShadow.length=g,a.pointShadowMap.length=g,a.spotShadow.length=y,a.spotShadowMap.length=y,a.directionalShadowMatrix.length=m,a.pointShadowMatrix.length=g,a.spotLightMatrix.length=y+_-b,a.spotLightMap.length=_,a.numSpotLightShadowsWithMaps=b,H.directionalLength=f,H.pointLength=h,H.spotLength=d,H.rectAreaLength=p,H.hemiLength=v,H.numDirectionalShadows=m,H.numPointShadows=g,H.numSpotShadows=y,H.numSpotMaps=_,a.version=PV++)},setupView:function(e,t){for(var n=0,r=0,i=0,o=0,c=0,f=t.matrixWorldInverse,h=0,d=e.length;h<d;h++){var p=e[h];if(p.isDirectionalLight){var v=a.directional[n];v.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(s),v.direction.transformDirection(f),n++}else if(p.isSpotLight){var m=a.spot[i];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(f),m.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(s),m.direction.transformDirection(f),i++}else if(p.isRectAreaLight){var g=a.rectArea[o];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(f),l.identity(),u.copy(p.matrixWorld),u.premultiply(f),l.extractRotation(u),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(l),g.halfHeight.applyMatrix4(l),o++}else if(p.isPointLight){var y=a.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(f),r++}else if(p.isHemisphereLight){var _=a.hemi[c];_.direction.setFromMatrixPosition(p.matrixWorld),_.direction.transformDirection(f),c++}}},state:a}}function DV(e,t){var n=new OV(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function NV(e,t){var n=new WeakMap;return{get:function(r){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=n.get(r);return void 0===o?(i=new DV(e,t),n.set(r,[i])):a>=o.length?(i=new DV(e,t),o.push(i)):i=o[a],i},dispose:function(){n=new WeakMap}}}function IV(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var UV=function(e){yk(n,e);var t=IV(n);function n(e){var r;return gA(this,n),(r=t.call(this)).isMeshDepthMaterial=!0,r.type="MeshDepthMaterial",r.depthPacking=PC,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.setValues(e),r}return _A(n,[{key:"copy",value:function(e){return Mz(xk(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(JF);function zV(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var FV=function(e){yk(n,e);var t=zV(n);function n(e){var r;return gA(this,n),(r=t.call(this)).isMeshDistanceMaterial=!0,r.type="MeshDistanceMaterial",r.referencePosition=new Ez,r.nearDistance=1,r.farDistance=1e3,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.setValues(e),r}return _A(n,[{key:"copy",value:function(e){return Mz(xk(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(JF),BV="void main(){gl_Position=vec4(position,1.0);}",HV="uniform sampler2D shadow_pass;uniform vec2 resolution;uniform float radius;\n#include <packing>\nvoid main(){const float samples=float(VSM_SAMPLES);float mean=0.0;float squared_mean=0.0;float uvStride=samples<=1.0?0.0:2.0/(samples-1.0);float uvStart=samples<=1.0?0.0:-1.0;for(float i=0.0;i<samples;i++){float uvOffset=uvStart+i*uvStride;\n#ifdef HORIZONTAL_PASS\nvec2 distribution=unpackRGBATo2Half(texture2D(shadow_pass,(gl_FragCoord.xy+vec2(uvOffset,0.0)*radius)/resolution));mean+=distribution.x;squared_mean+=distribution.y*distribution.y+distribution.x*distribution.x;\n#else\nfloat depth=unpackRGBAToDepth(texture2D(shadow_pass,(gl_FragCoord.xy+vec2(0.0,uvOffset)*radius)/resolution));mean+=depth;squared_mean+=depth*depth;\n#endif\n}mean=mean/samples;squared_mean=squared_mean/samples;float std_dev=sqrt(squared_mean-mean*mean);gl_FragColor=pack2HalfToRGBA(vec2(mean,std_dev));}";function jV(e,t,n){var r,i=new sH,a=new yU,o=new yU,s=new cz,u=new UV({depthPacking:LC}),l=new FV,c={},f=n.maxTextureSize,h=(EE(r={},CA,kA),EE(r,kA,CA),EE(r,PA,PA),r),d=new jB({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new yU},radius:{value:4}},vertexShader:BV,fragmentShader:HV}),p=d.clone();p.defines.HORIZONTAL_PASS=1;var v=new mB;v.setAttribute("position",new iB(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var m=new PB(v,d),g=this;function y(n,r){var i=t.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new hz(a.x,a.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,d,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,p,m,null)}function _(t,n,r,i,a,o){var s=null,f=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==f)s=f;else if(s=!0===r.isPointLight?l:u,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){var d=s.uuid,p=n.uuid,v=c[d];void 0===v&&(v={},c[d]=v);var m=v[p];void 0===m&&(m=s.clone(),v[p]=m),s=m}return s.visible=n.visible,s.wireframe=n.wireframe,s.side=o===RA?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],s.alphaMap=n.alphaMap,s.alphaTest=n.alphaTest,s.map=n.map,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.clipIntersection=n.clipIntersection,s.displacementMap=n.displacementMap,s.displacementScale=n.displacementScale,s.displacementBias=n.displacementBias,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,!0===r.isPointLight&&!0===s.isMeshDistanceMaterial&&(s.referencePosition.setFromMatrixPosition(r.matrixWorld),s.nearDistance=i,s.farDistance=a),s}function b(n,r,a,o,s){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===RA)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var u=t.update(n),l=n.material;if(Array.isArray(l))for(var c=u.groups,f=0,h=c.length;f<h;f++){var d=c[f],p=l[d.materialIndex];if(p&&p.visible){var v=_(n,p,o,a.near,a.far,s);e.renderBufferDirect(a,null,u,v,n,d)}}else if(l.visible){var m=_(n,l,o,a.near,a.far,s);e.renderBufferDirect(a,null,u,m,n,null)}}for(var g=n.children,y=0,x=g.length;y<x;y++)b(g[y],r,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=EA,this.render=function(t,n,r){if(!1!==g.enabled&&(!1!==g.autoUpdate||!1!==g.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),l=e.getActiveCubeFace(),c=e.getActiveMipmapLevel(),h=e.state;h.setBlending(LA),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var d=0,p=t.length;d<p;d++){var v=t[d],m=v.shadow;if(void 0!==m){if(!1!==m.autoUpdate||!1!==m.needsUpdate){a.copy(m.mapSize);var _=m.getFrameExtents();if(a.multiply(_),o.copy(m.mapSize),(a.x>f||a.y>f)&&(a.x>f&&(o.x=Math.floor(f/_.x),a.x=o.x*_.x,m.mapSize.x=o.x),a.y>f&&(o.y=Math.floor(f/_.y),a.y=o.y*_.y,m.mapSize.y=o.y)),null===m.map){var x=this.type!==RA?{minFilter:TR,magFilter:TR}:{};m.map=new hz(a.x,a.y,x),m.map.texture.name=v.name+".shadowMap",m.camera.updateProjectionMatrix()}e.setRenderTarget(m.map),e.clear();for(var w=m.getViewportCount(),S=0;S<w;S++){var M=m.getViewport(S);s.set(o.x*M.x,o.y*M.y,o.x*M.z,o.y*M.w),h.viewport(s),m.updateMatrices(v,S),i=m.getFrustum(),b(n,r,m.camera,v,this.type)}!0!==m.isPointLightShadow&&this.type===RA&&y(m,r),m.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}g.needsUpdate=!1,e.setRenderTarget(u,l,c)}}}function GV(e,t,n){var r,i,a=n.isWebGL2;var o=new function(){var t=!1,n=new cz,r=null,i=new cz(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?j(2929):G(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case eR:e.depthFunc(512);break;case tR:e.depthFunc(519);break;case nR:e.depthFunc(513);break;case rR:e.depthFunc(515);break;case iR:e.depthFunc(514);break;case aR:e.depthFunc(518);break;case oR:e.depthFunc(516);break;case sR:e.depthFunc(517);break;default:e.depthFunc(515)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},u=new function(){var t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null;return{setTest:function(e){t||(e?j(2960):G(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&u===r||(e.stencilOp(t,n,r),o=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null}}},l=new WeakMap,c=new WeakMap,f={},h={},d=new WeakMap,p=[],v=null,m=!1,g=null,y=null,_=null,b=null,x=null,w=null,S=null,M=!1,T=null,E=null,A=null,R=null,C=null,k=e.getParameter(35661),P=!1,L=0,O=e.getParameter(7938);-1!==O.indexOf("WebGL")?(L=parseFloat(/^WebGL (\d)/.exec(O)[1]),P=L>=1):-1!==O.indexOf("OpenGL ES")&&(L=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),P=L>=2);var D=null,N={},I=e.getParameter(3088),U=e.getParameter(2978),z=(new cz).fromArray(I),F=(new cz).fromArray(U);function B(t,n,r){var i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return a}var H={};function j(t){!0!==f[t]&&(e.enable(t),f[t]=!0)}function G(t){!1!==f[t]&&(e.disable(t),f[t]=!1)}H[3553]=B(3553,3553,1),H[34067]=B(34067,34069,6),o.setClear(0,0,0,1),s.setClear(1),u.setClear(0),j(2929),s.setFunc(rR),Y(!1),Z(MA),j(2884),X(LA);var V=(EE(r={},zA,32774),EE(r,FA,32778),EE(r,BA,32779),r);if(a)V[HA]=32775,V[jA]=32776;else{var W=t.get("EXT_blend_minmax");null!==W&&(V[HA]=W.MIN_EXT,V[jA]=W.MAX_EXT)}var q=(EE(i={},GA,0),EE(i,VA,1),EE(i,WA,768),EE(i,XA,770),EE(i,QA,776),EE(i,$A,774),EE(i,ZA,772),EE(i,qA,769),EE(i,YA,771),EE(i,JA,775),EE(i,KA,773),i);function X(t,n,r,i,a,o,s,u){if(t!==LA){if(!1===m&&(j(3042),m=!0),t===UA)a=a||n,o=o||r,s=s||i,n===y&&a===x||(e.blendEquationSeparate(V[n],V[a]),y=n,x=a),r===_&&i===b&&o===w&&s===S||(e.blendFuncSeparate(q[r],q[i],q[o],q[s]),_=r,b=i,w=o,S=s),g=t,M=!1;else if(t!==g||u!==M){if(y===zA&&x===zA||(e.blendEquation(32774),y=zA,x=zA),u)switch(t){case OA:e.blendFuncSeparate(1,771,1,771);break;case DA:e.blendFunc(1,1);break;case NA:e.blendFuncSeparate(0,769,0,1);break;case IA:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case OA:e.blendFuncSeparate(770,771,1,771);break;case DA:e.blendFunc(770,1);break;case NA:e.blendFuncSeparate(0,769,0,1);break;case IA:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}_=null,b=null,w=null,S=null,g=t,M=u}}else!0===m&&(G(3042),m=!1)}function Y(t){T!==t&&(t?e.frontFace(2304):e.frontFace(2305),T=t)}function Z(t){t!==SA?(j(2884),t!==E&&(t===MA?e.cullFace(1029):t===TA?e.cullFace(1028):e.cullFace(1032))):G(2884),E=t}function K(t,n,r){t?(j(32823),R===n&&C===r||(e.polygonOffset(n,r),R=n,C=r)):G(32823)}return{buffers:{color:o,depth:s,stencil:u},enable:j,disable:G,bindFramebuffer:function(t,n){return h[t]!==n&&(e.bindFramebuffer(t,n),h[t]=n,a&&(36009===t&&(h[36160]=n),36160===t&&(h[36009]=n)),!0)},drawBuffers:function(r,i){var a=p,o=!1;if(r)if(void 0===(a=d.get(i))&&(a=[],d.set(i,a)),r.isWebGLMultipleRenderTargets){var s=r.texture;if(a.length!==s.length||36064!==a[0]){for(var u=0,l=s.length;u<l;u++)a[u]=36064+u;a.length=s.length,o=!0}}else 36064!==a[0]&&(a[0]=36064,o=!0);else 1029!==a[0]&&(a[0]=1029,o=!0);o&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return v!==t&&(e.useProgram(t),v=t,!0)},setBlending:X,setMaterial:function(e,t){e.side===PA?G(2884):j(2884);var n=e.side===kA;t&&(n=!n),Y(n),e.blending===OA&&!1===e.transparent?X(LA):X(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),o.setMask(e.colorWrite);var r=e.stencilWrite;u.setTest(r),r&&(u.setMask(e.stencilWriteMask),u.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),u.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),K(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?j(32926):G(32926)},setFlipSided:Y,setCullFace:Z,setLineWidth:function(t){t!==A&&(P&&e.lineWidth(t),A=t)},setPolygonOffset:K,setScissorTest:function(e){e?j(3089):G(3089)},activeTexture:function(t){void 0===t&&(t=33984+k-1),D!==t&&(e.activeTexture(t),D=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===D?33984+k-1:D);var i=N[r];void 0===i&&(i={type:void 0,texture:void 0},N[r]=i),i.type===t&&i.texture===n||(D!==r&&(e.activeTexture(r),D=r),e.bindTexture(t,n||H[t]),i.type=t,i.texture=n)},unbindTexture:function(){var t=N[D];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){var r=c.get(n);void 0===r&&(r=new WeakMap,c.set(n,r));var i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){var r=c.get(n).get(t);l.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),l.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===z.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),z.copy(t))},viewport:function(t){!1===F.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),F.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===a&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),f={},D=null,N={},h={},d=new WeakMap,p=[],v=null,m=!1,g=null,y=null,_=null,b=null,x=null,w=null,S=null,M=!1,T=null,E=null,A=null,R=null,C=null,z.set(0,0,e.canvas.width,e.canvas.height),F.set(0,0,e.canvas.width,e.canvas.height),o.reset(),s.reset(),u.reset()}}}function VV(e,t,n,r,i,a,o){var s,u,l,c=i.isWebGL2,f=i.maxTextures,h=i.maxCubemapSize,d=i.maxTextureSize,p=i.maxSamples,v=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,m="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap,y=new WeakMap,_=!1;try{_="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function b(e,t){return _?new OffscreenCanvas(e,t):wU("canvas")}function x(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?oU:Math.floor,o=a(i*e.width),s=a(i*e.height);void 0===l&&(l=b(o,s));var u=n?b(o,s):l;return u.width=o,u.height=s,u.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),u}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function w(e){return aU(e.width)&&aU(e.height)}function S(e,t){return e.generateMipmaps&&t&&e.minFilter!==TR&&e.minFilter!==RR}function M(t){e.generateMipmap(t)}function T(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===c)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var s=r;return 6403===r&&(5126===i&&(s=33326),5131===i&&(s=33325),5121===i&&(s=33321)),33319===r&&(5126===i&&(s=33328),5131===i&&(s=33327),5121===i&&(s=33323)),6408===r&&(5126===i&&(s=34836),5131===i&&(s=34842),5121===i&&(s=a===kC&&!1===o?35907:32856),32819===i&&(s=32854),32820===i&&(s=32855)),33325!==s&&33326!==s&&33327!==s&&33328!==s&&34842!==s&&34836!==s||t.get("EXT_color_buffer_float"),s}function E(e,t,n){return!0===S(e,n)||e.isFramebufferTexture&&e.minFilter!==TR&&e.minFilter!==RR?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function A(e){return e===TR||e===ER||e===AR?9728:9729}function R(e){var t=e.target;t.removeEventListener("dispose",R),function(e){var t=r.get(e);if(void 0===t.__webglInit)return;var n=e.source,i=y.get(n);if(i){var a=i[t.__cacheKey];a.usedTimes--,0===a.usedTimes&&k(e),0===Object.keys(i).length&&y.delete(n)}r.remove(e)}(t),t.isVideoTexture&&g.delete(t)}function C(t){var n=t.target;n.removeEventListener("dispose",C),function(t){var n=t.texture,i=r.get(t),a=r.get(n);void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(i.__webglFramebuffer[s]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[s]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(var u=0;u<i.__webglColorRenderbuffer.length;u++)i.__webglColorRenderbuffer[u]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[u]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(var l=0,c=n.length;l<c;l++){var f=r.get(n[l]);f.__webglTexture&&(e.deleteTexture(f.__webglTexture),o.memory.textures--),r.remove(n[l])}r.remove(n),r.remove(t)}(n)}function k(t){var n=r.get(t);e.deleteTexture(n.__webglTexture);var i=t.source;delete y.get(i)[n.__cacheKey],o.memory.textures--}var P=0;function L(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;g.get(e)!==t&&(g.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&i.__version!==e.version){var a=e.image;if(null===a)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==a.complete)return void U(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(3553,i.__webglTexture,33984+t)}var O=(EE(s={},wR,10497),EE(s,SR,33071),EE(s,MR,33648),s),D=(EE(u={},TR,9728),EE(u,ER,9984),EE(u,AR,9986),EE(u,RR,9729),EE(u,CR,9985),EE(u,kR,9987),u);function N(n,a,o){if(o?(e.texParameteri(n,10242,O[a.wrapS]),e.texParameteri(n,10243,O[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,O[a.wrapR]),e.texParameteri(n,10240,D[a.magFilter]),e.texParameteri(n,10241,D[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===SR&&a.wrapT===SR||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,A(a.magFilter)),e.texParameteri(n,10241,A(a.minFilter)),a.minFilter!==TR&&a.minFilter!==RR&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(a.magFilter===TR)return;if(a.minFilter!==AR&&a.minFilter!==kR)return;if(a.type===UR&&!1===t.has("OES_texture_float_linear"))return;if(!1===c&&a.type===zR&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function I(t,n){var r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",R));var i=n.source,a=y.get(i);void 0===a&&(a={},y.set(i,a));var s=function(e){var t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(s!==t.__cacheKey){void 0===a[s]&&(a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),a[s].usedTimes++;var u=a[t.__cacheKey];void 0!==u&&(a[t.__cacheKey].usedTimes--,0===u.usedTimes&&k(n)),t.__cacheKey=s,t.__webglTexture=a[s].texture}return r}function U(t,i,o){var s=3553;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(s=35866),i.isData3DTexture&&(s=32879);var u=I(t,i),l=i.source;n.bindTexture(s,t.__webglTexture,33984+o);var f=r.get(l);if(l.version!==f.__version||!0===u){n.activeTexture(33984+o),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);var h,p=function(e){return!c&&(e.wrapS!==SR||e.wrapT!==SR||e.minFilter!==TR&&e.minFilter!==RR)}(i)&&!1===w(i.image),v=x(i.image,p,!1,d),m=w(v=G(i,v))||c,g=a.convert(i.format,i.encoding),y=a.convert(i.type),_=T(i.internalFormat,g,y,i.encoding,i.isVideoTexture);N(s,i,m);var b=i.mipmaps,A=c&&!0!==i.isVideoTexture,R=void 0===f.__version||!0===u,C=E(i,v,m);if(i.isDepthTexture)_=6402,c?_=i.type===UR?36012:i.type===IR?33190:i.type===HR?35056:33189:i.type===UR&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===qR&&6402===_&&i.type!==DR&&i.type!==IR&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=IR,y=a.convert(i.type)),i.format===XR&&6402===_&&(_=34041,i.type!==HR&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=HR,y=a.convert(i.type))),R&&(A?n.texStorage2D(3553,1,_,v.width,v.height):n.texImage2D(3553,0,_,v.width,v.height,0,g,y,null));else if(i.isDataTexture)if(b.length>0&&m){A&&R&&n.texStorage2D(3553,C,_,b[0].width,b[0].height);for(var k=0,P=b.length;k<P;k++)h=b[k],A?n.texSubImage2D(3553,k,0,0,h.width,h.height,g,y,h.data):n.texImage2D(3553,k,_,h.width,h.height,0,g,y,h.data);i.generateMipmaps=!1}else A?(R&&n.texStorage2D(3553,C,_,v.width,v.height),n.texSubImage2D(3553,0,0,0,v.width,v.height,g,y,v.data)):n.texImage2D(3553,0,_,v.width,v.height,0,g,y,v.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){A&&R&&n.texStorage3D(35866,C,_,b[0].width,b[0].height,v.depth);for(var L=0,O=b.length;L<O;L++)h=b[L],i.format!==GR?null!==g?A?n.compressedTexSubImage3D(35866,L,0,0,0,h.width,h.height,v.depth,g,h.data,0,0):n.compressedTexImage3D(35866,L,_,h.width,h.height,v.depth,0,h.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):A?n.texSubImage3D(35866,L,0,0,0,h.width,h.height,v.depth,g,y,h.data):n.texImage3D(35866,L,_,h.width,h.height,v.depth,0,g,y,h.data)}else{A&&R&&n.texStorage2D(3553,C,_,b[0].width,b[0].height);for(var D=0,U=b.length;D<U;D++)h=b[D],i.format!==GR?null!==g?A?n.compressedTexSubImage2D(3553,D,0,0,h.width,h.height,g,h.data):n.compressedTexImage2D(3553,D,_,h.width,h.height,0,h.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):A?n.texSubImage2D(3553,D,0,0,h.width,h.height,g,y,h.data):n.texImage2D(3553,D,_,h.width,h.height,0,g,y,h.data)}else if(i.isDataArrayTexture)A?(R&&n.texStorage3D(35866,C,_,v.width,v.height,v.depth),n.texSubImage3D(35866,0,0,0,0,v.width,v.height,v.depth,g,y,v.data)):n.texImage3D(35866,0,_,v.width,v.height,v.depth,0,g,y,v.data);else if(i.isData3DTexture)A?(R&&n.texStorage3D(32879,C,_,v.width,v.height,v.depth),n.texSubImage3D(32879,0,0,0,0,v.width,v.height,v.depth,g,y,v.data)):n.texImage3D(32879,0,_,v.width,v.height,v.depth,0,g,y,v.data);else if(i.isFramebufferTexture){if(R)if(A)n.texStorage2D(3553,C,_,v.width,v.height);else for(var z=v.width,F=v.height,B=0;B<C;B++)n.texImage2D(3553,B,_,z,F,0,g,y,null),z>>=1,F>>=1}else if(b.length>0&&m){A&&R&&n.texStorage2D(3553,C,_,b[0].width,b[0].height);for(var H=0,j=b.length;H<j;H++)h=b[H],A?n.texSubImage2D(3553,H,0,0,g,y,h):n.texImage2D(3553,H,_,g,y,h);i.generateMipmaps=!1}else A?(R&&n.texStorage2D(3553,C,_,v.width,v.height),n.texSubImage2D(3553,0,0,0,g,y,v)):n.texImage2D(3553,0,_,g,y,v);S(i,m)&&M(s),f.__version=l.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function z(t,i,o,s,u){var l=a.convert(o.format,o.encoding),c=a.convert(o.type),f=T(o.internalFormat,l,c,o.encoding);r.get(i).__hasExternalTextures||(32879===u||35866===u?n.texImage3D(u,0,f,i.width,i.height,i.depth,0,l,c,null):n.texImage2D(u,0,f,i.width,i.height,0,l,c,null)),n.bindFramebuffer(36160,t),j(i)?v.framebufferTexture2DMultisampleEXT(36160,s,u,r.get(o).__webglTexture,0,H(i)):(3553===u||u>=34069&&u<=34074)&&e.framebufferTexture2D(36160,s,u,r.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function F(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r||j(n)){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===UR?i=36012:o.type===IR&&(i=33190));var s=H(n);j(n)?v.renderbufferStorageMultisampleEXT(36161,s,i,n.width,n.height):e.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){var u=H(n);r&&!1===j(n)?e.renderbufferStorageMultisample(36161,u,35056,n.width,n.height):j(n)?v.renderbufferStorageMultisampleEXT(36161,u,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else for(var l=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture],c=0;c<l.length;c++){var f=l[c],h=a.convert(f.format,f.encoding),d=a.convert(f.type),p=T(f.internalFormat,h,d,f.encoding),m=H(n);r&&!1===j(n)?e.renderbufferStorageMultisample(36161,m,p,n.width,n.height):j(n)?v.renderbufferStorageMultisampleEXT(36161,m,p,n.width,n.height):e.renderbufferStorage(36161,p,n.width,n.height)}e.bindRenderbuffer(36161,null)}function B(t){var i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),L(i.depthTexture,0);var a=r.get(i.depthTexture).__webglTexture,o=H(i);if(i.depthTexture.format===qR)j(i)?v.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,o):e.framebufferTexture2D(36160,36096,3553,a,0);else{if(i.depthTexture.format!==XR)throw new Error("Unknown depthTexture format");j(i)?v.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,o):e.framebufferTexture2D(36160,33306,3553,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=e.createRenderbuffer(),F(i.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),F(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function H(e){return Math.min(p,e.samples)}function j(e){var n=r.get(e);return c&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function G(e,n){var r=e.encoding,i=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===jC||r!==CC&&(r===kC?!1===c?!0===t.has("EXT_sRGB")&&i===GR?(e.format=jC,e.minFilter=RR,e.generateMipmaps=!1):n=iz.sRGBToLinear(n):i===GR&&a===PR||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function(){var e=P;return e>=f&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+f),P+=1,e},this.resetTextureUnits=function(){P=0},this.setTexture2D=L,this.setTexture2DArray=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?U(i,e,t):n.bindTexture(35866,i.__webglTexture,33984+t)},this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?U(i,e,t):n.bindTexture(32879,i.__webglTexture,33984+t)},this.setTextureCube=function(t,i){var o=r.get(t);t.version>0&&o.__version!==t.version?function(t,i,o){if(6!==i.image.length)return;var s=I(t,i),u=i.source;n.bindTexture(34067,t.__webglTexture,33984+o);var l=r.get(u);if(u.version!==l.__version||!0===s){n.activeTexture(33984+o),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);for(var f=i.isCompressedTexture||i.image[0].isCompressedTexture,d=i.image[0]&&i.image[0].isDataTexture,p=[],v=0;v<6;v++)p[v]=f||d?d?i.image[v].image:i.image[v]:x(i.image[v],!1,!0,h),p[v]=G(i,p[v]);var m,g=p[0],y=w(g)||c,_=a.convert(i.format,i.encoding),b=a.convert(i.type),A=T(i.internalFormat,_,b,i.encoding),R=c&&!0!==i.isVideoTexture,C=void 0===l.__version||!0===s,k=E(i,g,y);if(N(34067,i,y),f){R&&C&&n.texStorage2D(34067,k,A,g.width,g.height);for(var P=0;P<6;P++){m=p[P].mipmaps;for(var L=0;L<m.length;L++){var O=m[L];i.format!==GR?null!==_?R?n.compressedTexSubImage2D(34069+P,L,0,0,O.width,O.height,_,O.data):n.compressedTexImage2D(34069+P,L,A,O.width,O.height,0,O.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):R?n.texSubImage2D(34069+P,L,0,0,O.width,O.height,_,b,O.data):n.texImage2D(34069+P,L,A,O.width,O.height,0,_,b,O.data)}}}else{m=i.mipmaps,R&&C&&(m.length>0&&k++,n.texStorage2D(34067,k,A,p[0].width,p[0].height));for(var D=0;D<6;D++)if(d){R?n.texSubImage2D(34069+D,0,0,0,p[D].width,p[D].height,_,b,p[D].data):n.texImage2D(34069+D,0,A,p[D].width,p[D].height,0,_,b,p[D].data);for(var U=0;U<m.length;U++){var z=m[U].image[D].image;R?n.texSubImage2D(34069+D,U+1,0,0,z.width,z.height,_,b,z.data):n.texImage2D(34069+D,U+1,A,z.width,z.height,0,_,b,z.data)}}else{R?n.texSubImage2D(34069+D,0,0,0,_,b,p[D]):n.texImage2D(34069+D,0,A,_,b,p[D]);for(var F=0;F<m.length;F++){var B=m[F];R?n.texSubImage2D(34069+D,F+1,0,0,_,b,B.image[D]):n.texImage2D(34069+D,F+1,A,_,b,B.image[D])}}}S(i,y)&&M(34067),l.__version=u.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}(o,t,i):n.bindTexture(34067,o.__webglTexture,33984+i)},this.rebindTextures=function(e,t,n){var i=r.get(e);void 0!==t&&z(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&B(e)},this.setupRenderTarget=function(t){var s=t.texture,u=r.get(t),l=r.get(s);t.addEventListener("dispose",C),!0!==t.isWebGLMultipleRenderTargets&&(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=s.version,o.memory.textures++);var f=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,d=w(t)||c;if(f){u.__webglFramebuffer=[];for(var p=0;p<6;p++)u.__webglFramebuffer[p]=e.createFramebuffer()}else{if(u.__webglFramebuffer=e.createFramebuffer(),h)if(i.drawBuffers)for(var v=t.texture,m=0,g=v.length;m<g;m++){var y=r.get(v[m]);void 0===y.__webglTexture&&(y.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(c&&t.samples>0&&!1===j(t)){var _=h?s:[s];u.__webglMultisampledFramebuffer=e.createFramebuffer(),u.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer);for(var b=0;b<_.length;b++){var x=_[b];u.__webglColorRenderbuffer[b]=e.createRenderbuffer(),e.bindRenderbuffer(36161,u.__webglColorRenderbuffer[b]);var E=a.convert(x.format,x.encoding),A=a.convert(x.type),R=T(x.internalFormat,E,A,x.encoding,!0===t.isXRRenderTarget),k=H(t);e.renderbufferStorageMultisample(36161,k,R,t.width,t.height),e.framebufferRenderbuffer(36160,36064+b,36161,u.__webglColorRenderbuffer[b])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(u.__webglDepthRenderbuffer=e.createRenderbuffer(),F(u.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(f){n.bindTexture(34067,l.__webglTexture),N(34067,s,d);for(var P=0;P<6;P++)z(u.__webglFramebuffer[P],t,s,36064,34069+P);S(s,d)&&M(34067),n.unbindTexture()}else if(h){for(var L=t.texture,O=0,D=L.length;O<D;O++){var I=L[O],U=r.get(I);n.bindTexture(3553,U.__webglTexture),N(3553,I,d),z(u.__webglFramebuffer,t,I,36064+O,3553),S(I,d)&&M(3553)}n.unbindTexture()}else{var G=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(c?G=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(G,l.__webglTexture),N(G,s,d),z(u.__webglFramebuffer,t,s,36064,G),S(s,d)&&M(G),n.unbindTexture()}t.depthBuffer&&B(t)},this.updateRenderTargetMipmap=function(e){for(var t=w(e)||c,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=0,o=i.length;a<o;a++){var s=i[a];if(S(s,t)){var u=e.isWebGLCubeRenderTarget?34067:3553,l=r.get(s).__webglTexture;n.bindTexture(u,l),M(u),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(c&&t.samples>0&&!1===j(t)){var i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,o=t.height,s=16384,u=[],l=t.stencilBuffer?33306:36096,f=r.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(var d=0;d<i.length;d++)n.bindFramebuffer(36160,f.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+d,36161,null),n.bindFramebuffer(36160,f.__webglFramebuffer),e.framebufferTexture2D(36009,36064+d,3553,null,0);n.bindFramebuffer(36008,f.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,f.__webglFramebuffer);for(var p=0;p<i.length;p++){u.push(36064+p),t.depthBuffer&&u.push(l);var v=void 0!==f.__ignoreDepthValues&&f.__ignoreDepthValues;if(!1===v&&(t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024)),h&&e.framebufferRenderbuffer(36008,36064,36161,f.__webglColorRenderbuffer[p]),!0===v&&(e.invalidateFramebuffer(36008,[l]),e.invalidateFramebuffer(36009,[l])),h){var g=r.get(i[p]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,g,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,9728),m&&e.invalidateFramebuffer(36008,u)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),h)for(var y=0;y<i.length;y++){n.bindFramebuffer(36160,f.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+y,36161,f.__webglColorRenderbuffer[y]);var _=r.get(i[y]).__webglTexture;n.bindFramebuffer(36160,f.__webglFramebuffer),e.framebufferTexture2D(36009,36064+y,3553,_,0)}n.bindFramebuffer(36009,f.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=B,this.setupFrameBufferTexture=z,this.useMultisampledRTT=j}function WV(e,t,n){var r=n.isWebGL2;return{convert:function(n){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n===PR)return 5121;if(n===FR)return 32819;if(n===BR)return 32820;if(n===LR)return 5120;if(n===OR)return 5122;if(n===DR)return 5123;if(n===NR)return 5124;if(n===IR)return 5125;if(n===UR)return 5126;if(n===zR)return r?5131:null!==(i=t.get("OES_texture_half_float"))?i.HALF_FLOAT_OES:null;if(n===jR)return 6406;if(n===GR)return 6408;if(n===VR)return 6409;if(n===WR)return 6410;if(n===qR)return 6402;if(n===XR)return 34041;if(n===jC)return null!==(i=t.get("EXT_sRGB"))?i.SRGB_ALPHA_EXT:null;if(n===YR)return 6403;if(n===ZR)return 36244;if(n===KR)return 33319;if(n===$R)return 33320;if(n===JR)return 36249;if(n===QR||n===eC||n===tC||n===nC)if(a===kC){if(null===(i=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===QR)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===eC)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===tC)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===nC)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(i=t.get("WEBGL_compressed_texture_s3tc")))return null;if(n===QR)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===eC)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===tC)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===nC)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===rC||n===iC||n===aC||n===oC){if(null===(i=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(n===rC)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===iC)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===aC)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===oC)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===sC)return null!==(i=t.get("WEBGL_compressed_texture_etc1"))?i.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===uC||n===lC){if(null===(i=t.get("WEBGL_compressed_texture_etc")))return null;if(n===uC)return a===kC?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(n===lC)return a===kC?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(n===cC||n===fC||n===hC||n===dC||n===pC||n===vC||n===mC||n===gC||n===yC||n===_C||n===bC||n===xC||n===wC||n===SC){if(null===(i=t.get("WEBGL_compressed_texture_astc")))return null;if(n===cC)return a===kC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===fC)return a===kC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===hC)return a===kC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===dC)return a===kC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===pC)return a===kC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===vC)return a===kC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===mC)return a===kC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===gC)return a===kC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===yC)return a===kC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===_C)return a===kC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===bC)return a===kC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===xC)return a===kC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===wC)return a===kC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===SC)return a===kC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===MC){if(null===(i=t.get("EXT_texture_compression_bptc")))return null;if(n===MC)return a===kC?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(n===TC||n===EC||n===AC||n===RC){if(null===(i=t.get("EXT_texture_compression_rgtc")))return null;if(n===MC)return i.COMPRESSED_RED_RGTC1_EXT;if(n===EC)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===AC)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===RC)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===HR?r?34042:null!==(i=t.get("WEBGL_depth_texture"))?i.UNSIGNED_INT_24_8_WEBGL:null:void 0!==e[n]?e[n]:null}}}function qV(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function XV(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var YV=function(e){yk(n,e);var t=XV(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return gA(this,n),(e=t.call(this)).isArrayCamera=!0,e.cameras=r,e}return _A(n)}(qB);function ZV(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var KV=function(e){yk(n,e);var t=ZV(n);function n(){var e;return gA(this,n),(e=t.call(this)).isGroup=!0,e.type="Group",e}return _A(n)}(zF);function $V(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return JV(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JV(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function JV(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var QV={type:"move"},eW=function(){function e(){gA(this,e),this._targetRay=null,this._grip=null,this._hand=null}return _A(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new KV,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new KV,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ez,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ez),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new KV,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ez,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ez),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"connect",value:function(e){if(e&&e.hand){var t=this._hand;if(t){var n,r=$V(e.hand.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this._getHandJoint(t,i)}}catch(e){r.e(e)}finally{r.f()}}}return this.dispatchEvent({type:"connected",data:e}),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,i=null,a=null,o=this._targetRay,s=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(u&&e.hand){a=!0;var l,c=$V(e.hand.values());try{for(c.s();!(l=c.n()).done;){var f=l.value,h=t.getJointPose(f,n),d=this._getHandJoint(u,f);null!==h&&(d.matrix.fromArray(h.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.jointRadius=h.radius),d.visible=null!==h}}catch(e){c.e(e)}finally{c.f()}var p=u.joints["index-finger-tip"],v=u.joints["thumb-tip"],m=p.position.distanceTo(v.position);u.inputState.pinching&&m>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&m<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1);null!==o&&(null===(r=t.getPose(e.targetRaySpace,n))&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(QV)))}return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==a),this}},{key:"_getHandJoint",value:function(e,t){if(void 0===e.joints[t.jointName]){var n=new KV;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}]),e}();function tW(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var nW=function(e){yk(n,e);var t=tW(n);function n(e,r,i,a,o,s,u,l,c,f){var h;if(gA(this,n),(f=void 0!==f?f:qR)!==qR&&f!==XR)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===i&&f===qR&&(i=IR),void 0===i&&f===XR&&(i=HR),(h=t.call(this,null,a,o,s,u,l,f,i,c)).isDepthTexture=!0,h.image={width:e,height:r},h.magFilter=void 0!==u?u:TR,h.minFilter=void 0!==l?l:TR,h.flipY=!1,h.generateMipmaps=!1,h}return _A(n)}(lz);function rW(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return iW(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iW(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function iW(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function aW(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var oW=function(e){yk(n,e);var t=aW(n);function n(e,r){var i;gA(this,n);var a=_k(i=t.call(this)),o=null,s=1,u=null,l="local-floor",c=1,f=null,h=null,d=null,p=null,v=null,m=null,g=r.getContextAttributes(),y=null,_=null,b=[],x=[],w=new Set,S=new Map,M=new qB;M.layers.enable(1),M.viewport=new cz;var T=new qB;T.layers.enable(2),T.viewport=new cz;var E=[M,T],A=new YV;A.layers.enable(1),A.layers.enable(2);var R=null,C=null;function k(e){var t=x.indexOf(e.inputSource);if(-1!==t){var n=b[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}}function P(){o.removeEventListener("select",k),o.removeEventListener("selectstart",k),o.removeEventListener("selectend",k),o.removeEventListener("squeeze",k),o.removeEventListener("squeezestart",k),o.removeEventListener("squeezeend",k),o.removeEventListener("end",P),o.removeEventListener("inputsourceschange",L);for(var t=0;t<b.length;t++){var n=x[t];null!==n&&(x[t]=null,b[t].disconnect(n))}R=null,C=null,e.setRenderTarget(y),v=null,p=null,d=null,o=null,_=null,U.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}function L(e){for(var t=0;t<e.removed.length;t++){var n=e.removed[t],r=x.indexOf(n);r>=0&&(x[r]=null,b[r].disconnect(n))}for(var i=0;i<e.added.length;i++){var a=e.added[i],o=x.indexOf(a);if(-1===o){for(var s=0;s<b.length;s++){if(s>=x.length){x.push(a),o=s;break}if(null===x[s]){x[s]=a,o=s;break}}if(-1===o)break}var u=b[o];u&&u.connect(a)}}i.cameraAutoUpdate=!0,i.enabled=!1,i.isPresenting=!1,i.getController=function(e){var t=b[e];return void 0===t&&(t=new eW,b[e]=t),t.getTargetRaySpace()},i.getControllerGrip=function(e){var t=b[e];return void 0===t&&(t=new eW,b[e]=t),t.getGripSpace()},i.getHand=function(e){var t=b[e];return void 0===t&&(t=new eW,b[e]=t),t.getHandSpace()},i.setFramebufferScaleFactor=function(e){s=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},i.setReferenceSpaceType=function(e){l=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},i.getReferenceSpace=function(){return f||u},i.setReferenceSpace=function(e){f=e},i.getBaseLayer=function(){return null!==p?p:v},i.getBinding=function(){return d},i.getFrame=function(){return m},i.getSession=function(){return o},i.setSession=function(){var t=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){qV(a,r,i,o,s,"next",e)}function s(e){qV(a,r,i,o,s,"throw",e)}o(void 0)}))}}(gU.mark((function t(n){var i,h,m,b,x;return gU.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(o=n)){t.next=25;break}if(y=e.getRenderTarget(),o.addEventListener("select",k),o.addEventListener("selectstart",k),o.addEventListener("selectend",k),o.addEventListener("squeeze",k),o.addEventListener("squeezestart",k),o.addEventListener("squeezeend",k),o.addEventListener("end",P),o.addEventListener("inputsourceschange",L),!0===g.xrCompatible){t.next=14;break}return t.next=14,r.makeXRCompatible();case 14:return void 0===o.renderState.layers||!1===e.capabilities.isWebGL2?(i={antialias:void 0!==o.renderState.layers||g.antialias,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s},v=new XRWebGLLayer(o,r,i),o.updateRenderState({baseLayer:v}),_=new hz(v.framebufferWidth,v.framebufferHeight,{format:GR,type:PR,encoding:e.outputEncoding,stencilBuffer:g.stencil})):(h=null,m=null,b=null,g.depth&&(b=g.stencil?35056:33190,h=g.stencil?XR:qR,m=g.stencil?HR:IR),x={colorFormat:32856,depthFormat:b,scaleFactor:s},d=new XRWebGLBinding(o,r),p=d.createProjectionLayer(x),o.updateRenderState({layers:[p]}),_=new hz(p.textureWidth,p.textureHeight,{format:GR,type:PR,depthTexture:new nW(p.textureWidth,p.textureHeight,m,void 0,void 0,void 0,void 0,void 0,void 0,h),stencilBuffer:g.stencil,encoding:e.outputEncoding,samples:g.antialias?4:0}),e.properties.get(_).__ignoreDepthValues=p.ignoreDepthValues),_.isXRRenderTarget=!0,this.setFoveation(c),f=null,t.next=20,o.requestReferenceSpace(l);case 20:u=t.sent,U.setContext(o),U.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"});case 25:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();var O=new Ez,D=new Ez;function N(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}i.updateCamera=function(e){if(null!==o){A.near=T.near=M.near=e.near,A.far=T.far=M.far=e.far,R===A.near&&C===A.far||(o.updateRenderState({depthNear:A.near,depthFar:A.far}),R=A.near,C=A.far);var t=e.parent,n=A.cameras;N(A,t);for(var r=0;r<n.length;r++)N(n[r],t);A.matrixWorld.decompose(A.position,A.quaternion,A.scale),e.matrix.copy(A.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);for(var i=e.children,a=0,s=i.length;a<s;a++)i[a].updateMatrixWorld(!0);2===n.length?function(e,t,n){O.setFromMatrixPosition(t.matrixWorld),D.setFromMatrixPosition(n.matrixWorld);var r=O.distanceTo(D),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],f=(a[8]+1)/a[0],h=o*c,d=o*f,p=r/(-c+f),v=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(v),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var m=o+p,g=s+p,y=h-v,_=d+(r-v),b=u*s/g*m,x=l*s/g*m;e.projectionMatrix.makePerspective(y,_,b,x,m,g)}(A,M,T):A.projectionMatrix.copy(M.projectionMatrix)}},i.getCamera=function(){return A},i.getFoveation=function(){if(null!==p||null!==v)return c},i.setFoveation=function(e){c=e,null!==p&&(p.fixedFoveation=e),null!==v&&void 0!==v.fixedFoveation&&(v.fixedFoveation=e)},i.getPlanes=function(){return w};var I=null;var U=new uH;return U.setAnimationLoop((function(t,n){if(h=n.getViewerPose(f||u),m=n,null!==h){var r=h.views;null!==v&&(e.setRenderTargetFramebuffer(_,v.framebuffer),e.setRenderTarget(_));var i=!1;r.length!==A.cameras.length&&(A.cameras.length=0,i=!0);for(var o=0;o<r.length;o++){var s=r[o],l=null;if(null!==v)l=v.getViewport(s);else{var c=d.getViewSubImage(p,s);l=c.viewport,0===o&&(e.setRenderTargetTextures(_,c.colorTexture,p.ignoreDepthValues?void 0:c.depthStencilTexture),e.setRenderTarget(_))}var g=E[o];void 0===g&&((g=new qB).layers.enable(o),g.viewport=new cz,E[o]=g),g.matrix.fromArray(s.transform.matrix),g.projectionMatrix.fromArray(s.projectionMatrix),g.viewport.set(l.x,l.y,l.width,l.height),0===o&&A.matrix.copy(g.matrix),!0===i&&A.cameras.push(g)}}for(var y=0;y<b.length;y++){var M=x[y],T=b[y];null!==M&&void 0!==T&&T.update(M,n,f||u)}if(I&&I(t,n),n.detectedPlanes){a.dispatchEvent({type:"planesdetected",data:n.detectedPlanes});var R,C=null,k=rW(w);try{for(k.s();!(R=k.n()).done;){var P=R.value;n.detectedPlanes.has(P)||(null===C&&(C=[]),C.push(P))}}catch(e){k.e(e)}finally{k.f()}if(null!==C){var L,O=rW(C);try{for(O.s();!(L=O.n()).done;){var D=L.value;w.delete(D),S.delete(D),a.dispatchEvent({type:"planeremoved",data:D})}}catch(e){O.e(e)}finally{O.f()}}var N,U=rW(n.detectedPlanes);try{for(U.s();!(N=U.n()).done;){var z=N.value;if(w.has(z)){var F=S.get(z);z.lastChangedTime>F&&(S.set(z,z.lastChangedTime),a.dispatchEvent({type:"planechanged",data:z}))}else w.add(z),S.set(z,n.lastChangedTime),a.dispatchEvent({type:"planeadded",data:z})}}catch(e){U.e(e)}finally{U.f()}}m=null})),i.setAnimationLoop=function(e){I=e},i.dispose=function(){},i}return _A(n)}(wk);function sW(e,t){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,r.side===kA&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),r.side===kA&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);var i,a,o=t.get(r).envMap;if(o&&(n.envMap.value=o,n.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;var s=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*s}r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?i=r.map:r.specularMap?i=r.specularMap:r.displacementMap?i=r.displacementMap:r.normalMap?i=r.normalMap:r.bumpMap?i=r.bumpMap:r.roughnessMap?i=r.roughnessMap:r.metalnessMap?i=r.metalnessMap:r.alphaMap?i=r.alphaMap:r.emissiveMap?i=r.emissiveMap:r.clearcoatMap?i=r.clearcoatMap:r.clearcoatNormalMap?i=r.clearcoatNormalMap:r.clearcoatRoughnessMap?i=r.clearcoatRoughnessMap:r.iridescenceMap?i=r.iridescenceMap:r.iridescenceThicknessMap?i=r.iridescenceThicknessMap:r.specularIntensityMap?i=r.specularIntensityMap:r.specularColorMap?i=r.specularColorMap:r.transmissionMap?i=r.transmissionMap:r.thicknessMap?i=r.thicknessMap:r.sheenColorMap?i=r.sheenColorMap:r.sheenRoughnessMap&&(i=r.sheenRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),n.uvTransform.value.copy(i.matrix)),r.aoMap?a=r.aoMap:r.lightMap&&(a=r.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,UB(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,r,i,a,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap);n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap);var r=t.get(n).envMap;r&&(e.envMapIntensity.value=n.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===kA&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,o)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,a):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function uW(e,t,n,r){var i={},a={},o=[],s=n.isWebGL2?e.getParameter(35375):0;function u(e,t,n){var r=e.value;if(void 0===n[t]){if("number"==typeof r)n[t]=r;else{for(var i=Array.isArray(r)?r:[r],a=[],o=0;o<i.length;o++)a.push(i[o].clone());n[t]=a}return!0}if("number"==typeof r){if(n[t]!==r)return n[t]=r,!0}else for(var s=Array.isArray(n[t])?n[t]:[n[t]],u=Array.isArray(r)?r:[r],l=0;l<s.length;l++){var c=s[l];if(!1===c.equals(u[l]))return c.copy(u[l]),!0}return!1}function l(e){var t={boundary:0,storage:0};return"number"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function c(t){var n=t.target;n.removeEventListener("dispose",c);var r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){var n=t.program;r.uniformBlockBinding(e,n)},update:function(n,f){var h=i[n.id];void 0===h&&(!function(e){for(var t=e.uniforms,n=0,r=16,i=0,a=0,o=t.length;a<o;a++){for(var s=t[a],u={boundary:0,storage:0},c=Array.isArray(s.value)?s.value:[s.value],f=0,h=c.length;f<h;f++){var d=l(c[f]);u.boundary+=d.boundary,u.storage+=d.storage}if(s.__data=new Float32Array(u.storage/Float32Array.BYTES_PER_ELEMENT),s.__offset=n,a>0)0!==(i=n%r)&&r-i-u.boundary<0&&(n+=r-i,s.__offset=n);n+=u.storage}(i=n%r)>0&&(n+=r-i);e.__size=n,e.__cache={}}(n),h=function(t){var n=function(){for(var e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;var r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(35345,r),e.bufferData(35345,i,a),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,r),r}(n),i[n.id]=h,n.addEventListener("dispose",c));var d=f.program;r.updateUBOMapping(n,d);var p=t.render.frame;a[n.id]!==p&&(!function(t){var n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(35345,n);for(var o=0,s=r.length;o<s;o++){var c=r[o];if(!0===u(c,o,a)){for(var f=c.__offset,h=Array.isArray(c.value)?c.value:[c.value],d=0,p=0;p<h.length;p++){var v=h[p],m=l(v);"number"==typeof v?(c.__data[0]=v,e.bufferSubData(35345,f+d,c.__data)):v.isMatrix3?(c.__data[0]=v.elements[0],c.__data[1]=v.elements[1],c.__data[2]=v.elements[2],c.__data[3]=v.elements[0],c.__data[4]=v.elements[3],c.__data[5]=v.elements[4],c.__data[6]=v.elements[5],c.__data[7]=v.elements[0],c.__data[8]=v.elements[6],c.__data[9]=v.elements[7],c.__data[10]=v.elements[8],c.__data[11]=v.elements[0]):(v.toArray(c.__data,d),d+=m.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,f,c.__data)}}e.bindBuffer(35345,null)}(n),a[n.id]=p)},dispose:function(){for(var t in i)e.deleteBuffer(i[t]);o=[],i={},a={}}}}function lW(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWebGLRenderer=!0;var t,n,r=void 0!==e.canvas?e.canvas:((t=wU("canvas")).style.display="block",t),i=void 0!==e.context?e.context:null,a=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,u=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",f=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;n=null!==i?i.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;var h=null,d=null,p=[],v=[];this.domElement=r,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=CC,this.physicallyCorrectLights=!1,this.toneMapping=fR,this.toneMappingExposure=1;var m=this,g=!1,y=0,_=0,b=null,x=-1,w=null,S=new cz,M=new cz,T=null,E=r.width,A=r.height,R=1,C=null,k=null,P=new cz(0,0,E,A),L=new cz(0,0,E,A),O=!1,D=new sH,N=!1,I=!1,U=null,z=new hF,F=new yU,B=new Ez,H={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function j(){return null===b?R:1}var G,V,W,q,X,Y,Z,K,$,J,Q,ee,te,ne,re,ie,ae,oe,se,ue,le,ce,fe,he,de=i;function pe(e,t){for(var n=0;n<e.length;n++){var i=e[n],a=r.getContext(i,t);if(null!==a)return a}return null}try{var ve={alpha:!0,depth:a,stencil:o,antialias:s,premultipliedAlpha:u,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:f};if("setAttribute"in r&&r.setAttribute("data-engine","three.js r".concat(bA)),r.addEventListener("webglcontextlost",_e,!1),r.addEventListener("webglcontextrestored",be,!1),r.addEventListener("webglcontextcreationerror",xe,!1),null===de){var me=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&me.shift(),null===(de=pe(me,ve)))throw pe(me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===de.getShaderPrecisionFormat&&(de.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function ge(){G=new Hj(de),V=new yj(de,G,e),G.init(V),ce=new WV(de,G,V),W=new GV(de,G,V),q=new Vj,X=new TV,Y=new VV(de,G,W,X,V,ce,q),Z=new bj(m),K=new Bj(m),$=new rj(de,V),fe=new mj(de,G,$,V),J=new jj(de,$,q,fe),Q=new Yj(de,J,$,q),se=new Xj(de,V,Y),ie=new _j(X),ee=new MV(m,Z,K,G,V,fe,ie),te=new sW(m,X),ne=new CV,re=new NV(G,V),oe=new vj(m,Z,K,W,Q,n,u),ae=new jV(m,Q,V),he=new uW(de,q,V,W),ue=new gj(de,G,q,V),le=new Gj(de,G,q,V),q.programs=ee.programs,m.capabilities=V,m.extensions=G,m.properties=X,m.renderLists=ne,m.shadowMap=ae,m.state=W,m.info=q}ge();var ye=new oW(m,de);function _e(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function be(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;var e=q.autoReset,t=ae.enabled,n=ae.autoUpdate,r=ae.needsUpdate,i=ae.type;ge(),q.autoReset=e,ae.enabled=t,ae.autoUpdate=n,ae.needsUpdate=r,ae.type=i}function xe(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function we(e){var t=e.target;t.removeEventListener("dispose",we),function(e){(function(e){var t=X.get(e).programs;void 0!==t&&(t.forEach((function(e){ee.releaseProgram(e)})),e.isShaderMaterial&&ee.releaseShaderCache(e))})(e),X.remove(e)}(t)}this.xr=ye,this.getContext=function(){return de},this.getContextAttributes=function(){return de.getContextAttributes()},this.forceContextLoss=function(){var e=G.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=G.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(e){void 0!==e&&(R=e,this.setSize(E,A,!1))},this.getSize=function(e){return e.set(E,A)},this.setSize=function(e,t,n){ye.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=e,A=t,r.width=Math.floor(e*R),r.height=Math.floor(t*R),!1!==n&&(r.style.width=e+"px",r.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(E*R,A*R).floor()},this.setDrawingBufferSize=function(e,t,n){E=e,A=t,R=n,r.width=Math.floor(e*n),r.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(S)},this.getViewport=function(e){return e.copy(P)},this.setViewport=function(e,t,n,r){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,r),W.viewport(S.copy(P).multiplyScalar(R).floor())},this.getScissor=function(e){return e.copy(L)},this.setScissor=function(e,t,n,r){e.isVector4?L.set(e.x,e.y,e.z,e.w):L.set(e,t,n,r),W.scissor(M.copy(L).multiplyScalar(R).floor())},this.getScissorTest=function(){return O},this.setScissorTest=function(e){W.setScissorTest(O=e)},this.setOpaqueSort=function(e){C=e},this.setTransparentSort=function(e){k=e},this.getClearColor=function(e){return e.copy(oe.getClearColor())},this.setClearColor=function(){oe.setClearColor.apply(oe,arguments)},this.getClearAlpha=function(){return oe.getClearAlpha()},this.setClearAlpha=function(){oe.setClearAlpha.apply(oe,arguments)},this.clear=function(){var e=0;(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(e|=16384),(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e|=256),(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(e|=1024),de.clear(e)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",_e,!1),r.removeEventListener("webglcontextrestored",be,!1),r.removeEventListener("webglcontextcreationerror",xe,!1),ne.dispose(),re.dispose(),X.dispose(),Z.dispose(),K.dispose(),Q.dispose(),fe.dispose(),he.dispose(),ee.dispose(),ye.dispose(),ye.removeEventListener("sessionstart",Me),ye.removeEventListener("sessionend",Te),U&&(U.dispose(),U=null),Ee.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=H);var o=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=H);Y.resetTextureUnits();var a=t.fog,o=r.isMeshStandardMaterial?t.environment:null,s=null===b?m.outputEncoding:!0===b.isXRRenderTarget?b.texture.encoding:CC,u=(r.isMeshStandardMaterial?K:Z).get(r.envMap||o),l=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n.attributes.tangent,f=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,v=r.toneMapped?m.toneMapping:fR,g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==g?g.length:0,_=X.get(r),S=d.state.lights;if(!0===N&&(!0===I||e!==w)){var M=e===w&&r.id===x;ie.setState(r,e,M)}var T=!1;r.version===_.__version?_.needsLights&&_.lightsStateVersion!==S.state.version||_.outputEncoding!==s||i.isInstancedMesh&&!1===_.instancing?T=!0:i.isInstancedMesh||!0!==_.instancing?i.isSkinnedMesh&&!1===_.skinning?T=!0:i.isSkinnedMesh||!0!==_.skinning?_.envMap!==u||!0===r.fog&&_.fog!==a?T=!0:void 0===_.numClippingPlanes||_.numClippingPlanes===ie.numPlanes&&_.numIntersection===ie.numIntersection?(_.vertexAlphas!==l||_.vertexTangents!==c||_.morphTargets!==f||_.morphNormals!==h||_.morphColors!==p||_.toneMapping!==v||!0===V.isWebGL2&&_.morphTargetsCount!==y)&&(T=!0):T=!0:T=!0:T=!0:(T=!0,_.__version=r.version);var E=_.currentProgram;!0===T&&(E=Pe(r,t,i));var C=!1,k=!1,P=!1,L=E.getUniforms(),O=_.uniforms;W.useProgram(E.program)&&(C=!0,k=!0,P=!0);r.id!==x&&(x=r.id,k=!0);if(C||w!==e){if(L.setValue(de,"projectionMatrix",e.projectionMatrix),V.logarithmicDepthBuffer&&L.setValue(de,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,k=!0,P=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var D=L.map.cameraPosition;void 0!==D&&D.setValue(de,B.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&L.setValue(de,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&L.setValue(de,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){L.setOptional(de,i,"bindMatrix"),L.setOptional(de,i,"bindMatrixInverse");var z=i.skeleton;z&&(V.floatVertexTextures?(null===z.boneTexture&&z.computeBoneTexture(),L.setValue(de,"boneTexture",z.boneTexture,Y),L.setValue(de,"boneTextureSize",z.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var F=n.morphAttributes;(void 0!==F.position||void 0!==F.normal||void 0!==F.color&&!0===V.isWebGL2)&&se.update(i,n,r,E);(k||_.receiveShadow!==i.receiveShadow)&&(_.receiveShadow=i.receiveShadow,L.setValue(de,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(O.envMap.value=u,O.flipEnvMap.value=u.isCubeTexture&&!1===u.isRenderTargetTexture?-1:1);k&&(L.setValue(de,"toneMappingExposure",m.toneMappingExposure),_.needsLights&&(G=P,(j=O).ambientLightColor.needsUpdate=G,j.lightProbe.needsUpdate=G,j.directionalLights.needsUpdate=G,j.directionalLightShadows.needsUpdate=G,j.pointLights.needsUpdate=G,j.pointLightShadows.needsUpdate=G,j.spotLights.needsUpdate=G,j.spotLightShadows.needsUpdate=G,j.rectAreaLights.needsUpdate=G,j.hemisphereLights.needsUpdate=G),a&&!0===r.fog&&te.refreshFogUniforms(O,a),te.refreshMaterialUniforms(O,r,R,A,U),nV.upload(de,_.uniformsList,O,Y));var j,G;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(nV.upload(de,_.uniformsList,O,Y),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&L.setValue(de,"center",i.center);if(L.setValue(de,"modelViewMatrix",i.modelViewMatrix),L.setValue(de,"normalMatrix",i.normalMatrix),L.setValue(de,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial)for(var q=r.uniformsGroups,$=0,J=q.length;$<J;$++)if(V.isWebGL2){var Q=q[$];he.update(Q,E),he.bind(Q,E)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");return E}(e,t,n,r,i);W.setMaterial(r,o);var u=n.index,l=1;!0===r.wireframe&&(u=J.getWireframeAttribute(n),l=2);var c=n.drawRange,f=n.attributes.position,h=c.start*l,p=(c.start+c.count)*l;null!==a&&(h=Math.max(h,a.start*l),p=Math.min(p,(a.start+a.count)*l)),null!==u?(h=Math.max(h,0),p=Math.min(p,u.count)):null!=f&&(h=Math.max(h,0),p=Math.min(p,f.count));var v=p-h;if(!(v<0||v===1/0)){var g;fe.setup(i,r,s,n,u);var y=ue;if(null!==u&&(g=$.get(u),(y=le).setIndex(g)),i.isMesh)!0===r.wireframe?(W.setLineWidth(r.wireframeLinewidth*j()),y.setMode(1)):y.setMode(4);else if(i.isLine){var _=r.linewidth;void 0===_&&(_=1),W.setLineWidth(_*j()),i.isLineSegments?y.setMode(1):i.isLineLoop?y.setMode(2):y.setMode(3)}else i.isPoints?y.setMode(0):i.isSprite&&y.setMode(4);if(i.isInstancedMesh)y.renderInstances(h,v,i.count);else if(n.isInstancedBufferGeometry){var S=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,M=Math.min(n.instanceCount,S);y.renderInstances(h,v,M)}else y.render(h,v)}},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===PA&&!1===e.forceSinglePass?(e.side=kA,e.needsUpdate=!0,Pe(e,t,n),e.side=CA,e.needsUpdate=!0,Pe(e,t,n),e.side=PA):Pe(e,t,n)}(d=re.get(e)).init(),v.push(d),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(m.physicallyCorrectLights),e.traverse((function(t){var r=t.material;if(r)if(Array.isArray(r))for(var i=0;i<r.length;i++){n(r[i],e,t)}else n(r,e,t)})),v.pop(),d=null};var Se=null;function Me(){Ee.stop()}function Te(){Ee.start()}var Ee=new uH;function Ae(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||D.intersectsSprite(e)){r&&B.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);var i=Q.update(e),a=e.material;a.visible&&h.push(e,i,a,n,B.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==q.render.frame&&(e.skeleton.update(),e.skeleton.frame=q.render.frame),!e.frustumCulled||D.intersectsObject(e))){r&&B.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);var o=Q.update(e),s=e.material;if(Array.isArray(s))for(var u=o.groups,l=0,c=u.length;l<c;l++){var f=u[l],p=s[f.materialIndex];p&&p.visible&&h.push(e,o,p,n,B.z,f)}else s.visible&&h.push(e,o,s,n,B.z,null)}for(var v=e.children,m=0,g=v.length;m<g;m++)Ae(v[m],t,n,r)}}function Re(e,t,n,r){var i=e.opaque,a=e.transmissive,o=e.transparent;d.setupLightsView(n),!0===N&&ie.setGlobalState(m.clippingPlanes,n),a.length>0&&function(e,t,n){var r=V.isWebGL2;null===U&&(U=new hz(1,1,{generateMipmaps:!0,type:G.has("EXT_color_buffer_half_float")?zR:PR,minFilter:kR,samples:r&&!0===s?4:0}));m.getDrawingBufferSize(F),r?U.setSize(F.x,F.y):U.setSize(oU(F.x),oU(F.y));var i=m.getRenderTarget();m.setRenderTarget(U),m.clear();var a=m.toneMapping;m.toneMapping=fR,Ce(e,t,n),m.toneMapping=a,Y.updateMultisampleRenderTarget(U),Y.updateRenderTargetMipmap(U),m.setRenderTarget(i)}(i,t,n),r&&W.viewport(S.copy(r)),i.length>0&&Ce(i,t,n),a.length>0&&Ce(a,t,n),o.length>0&&Ce(o,t,n),W.buffers.depth.setTest(!0),W.buffers.depth.setMask(!0),W.buffers.color.setMask(!0),W.setPolygonOffset(!1)}function Ce(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,u=o.geometry,l=null===r?o.material:r,c=o.group;s.layers.test(n.layers)&&ke(s,t,n,u,l,c)}}function ke(e,t,n,r,i,a){e.onBeforeRender(m,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(m,t,n,r,e,a),!0===i.transparent&&i.side===PA&&!1===i.forceSinglePass?(i.side=kA,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,a),i.side=CA,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,a),i.side=PA):m.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(m,t,n,r,i,a)}function Pe(e,t,n){!0!==t.isScene&&(t=H);var r=X.get(e),i=d.state.lights,a=d.state.shadowsArray,o=i.state.version,s=ee.getParameters(e,i.state,a,t,n),u=ee.getProgramCacheKey(s),l=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?K:Z).get(e.envMap||r.environment),void 0===l&&(e.addEventListener("dispose",we),l=new Map,r.programs=l);var c=l.get(u);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===o)return Le(e,s),c}else s.uniforms=ee.getUniforms(e),e.onBuild(n,s,m),e.onBeforeCompile(s,m),c=ee.acquireProgram(s,u),l.set(u,c),r.uniforms=s.uniforms;var f=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(f.clippingPlanes=ie.uniform),Le(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(f.ambientLightColor.value=i.state.ambient,f.lightProbe.value=i.state.probe,f.directionalLights.value=i.state.directional,f.directionalLightShadows.value=i.state.directionalShadow,f.spotLights.value=i.state.spot,f.spotLightShadows.value=i.state.spotShadow,f.rectAreaLights.value=i.state.rectArea,f.ltc_1.value=i.state.rectAreaLTC1,f.ltc_2.value=i.state.rectAreaLTC2,f.pointLights.value=i.state.point,f.pointLightShadows.value=i.state.pointShadow,f.hemisphereLights.value=i.state.hemi,f.directionalShadowMap.value=i.state.directionalShadowMap,f.directionalShadowMatrix.value=i.state.directionalShadowMatrix,f.spotShadowMap.value=i.state.spotShadowMap,f.spotLightMatrix.value=i.state.spotLightMatrix,f.spotLightMap.value=i.state.spotLightMap,f.pointShadowMap.value=i.state.pointShadowMap,f.pointShadowMatrix.value=i.state.pointShadowMatrix);var h=c.getUniforms(),p=nV.seqWithValue(h.seq,f);return r.currentProgram=c,r.uniformsList=p,c}function Le(e,t){var n=X.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Ee.setAnimationLoop((function(e){Se&&Se(e)})),"undefined"!=typeof self&&Ee.setContext(self),this.setAnimationLoop=function(e){Se=e,ye.setAnimationLoop(e),null===e?Ee.stop():Ee.start()},ye.addEventListener("sessionstart",Me),ye.addEventListener("sessionend",Te),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==g){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===ye.enabled&&!0===ye.isPresenting&&(!0===ye.cameraAutoUpdate&&ye.updateCamera(t),t=ye.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,b),(d=re.get(e,v.length)).init(),v.push(d),z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),D.setFromProjectionMatrix(z),I=this.localClippingEnabled,N=ie.init(this.clippingPlanes,I),(h=ne.get(e,p.length)).init(),p.push(h),Ae(e,t,0,m.sortObjects),h.finish(),!0===m.sortObjects&&h.sort(C,k),!0===N&&ie.beginShadows();var n=d.state.shadowsArray;if(ae.render(n,e,t),!0===N&&ie.endShadows(),!0===this.info.autoReset&&this.info.reset(),oe.render(h,e),d.setupLights(m.physicallyCorrectLights),t.isArrayCamera)for(var r=t.cameras,i=0,a=r.length;i<a;i++){var o=r[i];Re(h,e,o,o.viewport)}else Re(h,e,t);null!==b&&(Y.updateMultisampleRenderTarget(b),Y.updateRenderTargetMipmap(b)),!0===e.isScene&&e.onAfterRender(m,e,t),fe.resetDefaultState(),x=-1,w=null,v.pop(),d=v.length>0?v[v.length-1]:null,p.pop(),h=p.length>0?p[p.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(e,t,n){X.get(e.texture).__webglTexture=t,X.get(e.depthTexture).__webglTexture=n;var r=X.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===G.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){var n=X.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;b=e,y=t,_=n;var r=!0,i=null,a=!1,o=!1;if(e){var s=X.get(e);void 0!==s.__useDefaultFramebuffer?(W.bindFramebuffer(36160,null),r=!1):void 0===s.__webglFramebuffer?Y.setupRenderTarget(e):s.__hasExternalTextures&&Y.rebindTextures(e,X.get(e.texture).__webglTexture,X.get(e.depthTexture).__webglTexture);var u=e.texture;(u.isData3DTexture||u.isDataArrayTexture||u.isCompressedArrayTexture)&&(o=!0);var l=X.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=l[t],a=!0):i=V.isWebGL2&&e.samples>0&&!1===Y.useMultisampledRTT(e)?X.get(e).__webglMultisampledFramebuffer:l,S.copy(e.viewport),M.copy(e.scissor),T=e.scissorTest}else S.copy(P).multiplyScalar(R).floor(),M.copy(L).multiplyScalar(R).floor(),T=O;if(W.bindFramebuffer(36160,i)&&V.drawBuffers&&r&&W.drawBuffers(e,i),W.viewport(S),W.scissor(M),W.setScissorTest(T),a){var c=X.get(e.texture);de.framebufferTexture2D(36160,36064,34069+t,c.__webglTexture,n)}else if(o){var f=X.get(e.texture),h=t||0;de.framebufferTextureLayer(36160,36064,f.__webglTexture,n||0,h)}x=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(e&&e.isWebGLRenderTarget){var s=X.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){W.bindFramebuffer(36160,s);try{var u=e.texture,l=u.format,c=u.type;if(l!==GR&&ce.convert(l)!==de.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var f=c===zR&&(G.has("EXT_color_buffer_half_float")||V.isWebGL2&&G.has("EXT_color_buffer_float"));if(!(c===PR||ce.convert(c)===de.getParameter(35738)||c===UR&&(V.isWebGL2||G.has("OES_texture_float")||G.has("WEBGL_color_buffer_float"))||f))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&de.readPixels(t,n,r,i,ce.convert(l),ce.convert(c),a)}finally{var h=null!==b?X.get(b).__webglFramebuffer:null;W.bindFramebuffer(36160,h)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r);Y.setTexture2D(t,0),de.copyTexSubImage2D(3553,n,0,0,e.x,e.y,i,a),W.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.image.width,a=t.image.height,o=ce.convert(n.format),s=ce.convert(n.type);Y.setTexture2D(n,0),de.pixelStorei(37440,n.flipY),de.pixelStorei(37441,n.premultiplyAlpha),de.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?de.texSubImage2D(3553,r,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?de.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):de.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&de.generateMipmap(3553),W.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(m.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a,o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,u=e.max.z-e.min.z+1,l=ce.convert(r.format),c=ce.convert(r.type);if(r.isData3DTexture)Y.setTexture3D(r,0),a=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Y.setTexture2DArray(r,0),a=35866}de.pixelStorei(37440,r.flipY),de.pixelStorei(37441,r.premultiplyAlpha),de.pixelStorei(3317,r.unpackAlignment);var f=de.getParameter(3314),h=de.getParameter(32878),d=de.getParameter(3316),p=de.getParameter(3315),v=de.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;de.pixelStorei(3314,g.width),de.pixelStorei(32878,g.height),de.pixelStorei(3316,e.min.x),de.pixelStorei(3315,e.min.y),de.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?de.texSubImage3D(a,i,t.x,t.y,t.z,o,s,u,l,c,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),de.compressedTexSubImage3D(a,i,t.x,t.y,t.z,o,s,u,l,g.data)):de.texSubImage3D(a,i,t.x,t.y,t.z,o,s,u,l,c,g),de.pixelStorei(3314,f),de.pixelStorei(32878,h),de.pixelStorei(3316,d),de.pixelStorei(3315,p),de.pixelStorei(32877,v),0===i&&r.generateMipmaps&&de.generateMipmap(a),W.unbindTexture()}},this.initTexture=function(e){e.isCubeTexture?Y.setTextureCube(e,0):e.isData3DTexture?Y.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?Y.setTexture2DArray(e,0):Y.setTexture2D(e,0),W.unbindTexture()},this.resetState=function(){y=0,_=0,b=null,W.reset(),fe.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var cW=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;gA(this,e),this.isFog=!0,this.name="",this.color=new rz(t),this.near=n,this.far=r}return _A(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}();function fW(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var hW=function(e){yk(n,e);var t=fW(n);function n(){var e;return gA(this,n),(e=t.call(this)).isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.backgroundBlurriness=0,e.backgroundIntensity=1,e.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:_k(e)})),e}return _A(n,[{key:"copy",value:function(e,t){return Mz(xk(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=Mz(xk(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}},{key:"autoUpdate",get:function(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate},set:function(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}]),n}(zF);function dW(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var pW=function(e){yk(n,e);var t=dW(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:TR,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:TR,d=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0;return gA(this,n),(e=t.call(this,null,u,l,c,f,h,o,s,d,p)).isDataTexture=!0,e.image={data:r,width:i,height:a},e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return _A(n)}(lz);function vW(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var mW=function(e){yk(n,e);var t=vW(n);function n(e,r,i,a,o,s,u,l,c){var f;gA(this,n),(f=t.call(this,e,r,i,a,o,s,u,l,c)).isVideoTexture=!0,f.minFilter=void 0!==s?s:RR,f.magFilter=void 0!==o?o:RR,f.generateMipmaps=!1;var h=_k(f);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){h.needsUpdate=!0,e.requestVideoFrameCallback(t)})),f}return _A(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(lz);function gW(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var yW=function(e){yk(n,e);var t=gW(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;gA(this,n),(e=t.call(this)).type="CylinderGeometry",e.parameters={radiusTop:r,radiusBottom:i,height:a,radialSegments:o,heightSegments:s,openEnded:u,thetaStart:l,thetaLength:c};var f=_k(e);o=Math.floor(o),s=Math.floor(s);var h=[],d=[],p=[],v=[],m=0,g=[],y=a/2,_=0;function b(e){for(var t=m,n=new yU,a=new Ez,s=0,u=!0===e?r:i,g=!0===e?1:-1,b=1;b<=o;b++)d.push(0,y*g,0),p.push(0,g,0),v.push(.5,.5),m++;for(var x=m,w=0;w<=o;w++){var S=w/o*c+l,M=Math.cos(S),T=Math.sin(S);a.x=u*T,a.y=y*g,a.z=u*M,d.push(a.x,a.y,a.z),p.push(0,g,0),n.x=.5*M+.5,n.y=.5*T*g+.5,v.push(n.x,n.y),m++}for(var E=0;E<o;E++){var A=t+E,R=x+E;!0===e?h.push(R,R+1,A):h.push(R+1,R,A),s+=3}f.addGroup(_,s,!0===e?1:2),_+=s}return function(){for(var e=new Ez,t=new Ez,n=0,u=(i-r)/a,b=0;b<=s;b++){for(var x=[],w=b/s,S=w*(i-r)+r,M=0;M<=o;M++){var T=M/o,E=T*c+l,A=Math.sin(E),R=Math.cos(E);t.x=S*A,t.y=-w*a+y,t.z=S*R,d.push(t.x,t.y,t.z),e.set(A,u,R).normalize(),p.push(e.x,e.y,e.z),v.push(T,1-w),x.push(m++)}g.push(x)}for(var C=0;C<o;C++)for(var k=0;k<s;k++){var P=g[k][C],L=g[k+1][C],O=g[k+1][C+1],D=g[k][C+1];h.push(P,L,D),h.push(L,O,D),n+=6}f.addGroup(_,n,0),_+=n}(),!1===u&&(r>0&&b(!0),i>0&&b(!1)),e.setIndex(h),e.setAttribute("position",new sB(d,3)),e.setAttribute("normal",new sB(p,3)),e.setAttribute("uv",new sB(v,2)),e}return _A(n,null,[{key:"fromJSON",value:function(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(mB);function _W(e){return function(e){if(Array.isArray(e))return tT(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||nT(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bW(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var xW=function(e){yk(n,e);var t=bW(n);function n(e){var r;return gA(this,n),(r=t.call(this)).isMeshStandardMaterial=!0,r.defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new rz(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new rz(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=OC,r.normalScale=new yU(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return _A(n,[{key:"copy",value:function(e){return Mz(xk(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(JF),wW={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},SW=_A((function e(t,n,r){gA(this,e);var i=this,a=!1,o=0,s=0,u=void 0,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){s++,!1===a&&void 0!==i.onStart&&i.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return u?u(e):e},this.setURLModifier=function(e){return u=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){var t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=l.length;t<n;t+=2){var r=l[t],i=l[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}})),MW=new SW,TW=function(){function e(t){gA(this,e),this.manager=void 0!==t?t:MW,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return _A(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}();function EW(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var AW=function(e){yk(n,e);var t=EW(n);function n(e){return gA(this,n),t.call(this,e)}return _A(n,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=wW.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o=wU("img");function s(){l(),wW.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){l(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function l(){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",u,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}]),n}(TW);function RW(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var CW=function(e){yk(n,e);var t=RW(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return gA(this,n),(r=t.call(this)).isLight=!0,r.type="Light",r.color=new rz(e),r.intensity=i,r}return _A(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e,t){return Mz(xk(n.prototype),"copy",this).call(this,e,t),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=Mz(xk(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(zF),kW=new hF,PW=new Ez,LW=new Ez;function OW(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var DW=function(e){yk(n,e);var t=OW(n);function n(){var e;return gA(this,n),(e=t.call(this,new Tj(-5,5,5,-5,.5,500))).isDirectionalLightShadow=!0,e}return _A(n)}(function(){function e(t){gA(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new yU(512,512),this.map=null,this.mapPass=null,this.matrix=new hF,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new sH,this._frameExtents=new yU(1,1),this._viewportCount=1,this._viewports=[new cz(0,0,1,1)]}return _A(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;PW.setFromMatrixPosition(e.matrixWorld),t.position.copy(PW),LW.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(LW),t.updateMatrixWorld(),kW.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(kW),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(kW)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}());function NW(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var IW=function(e){yk(n,e);var t=NW(n);function n(e,r){var i;return gA(this,n),(i=t.call(this,e,r)).isDirectionalLight=!0,i.type="DirectionalLight",i.position.copy(zF.DEFAULT_UP),i.updateMatrix(),i.target=new zF,i.shadow=new DW,i}return _A(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return Mz(xk(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(CW);function UW(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var zW=function(e){yk(n,e);var t=UW(n);function n(e,r){var i;return gA(this,n),(i=t.call(this,e,r)).isAmbientLight=!0,i.type="AmbientLight",i}return _A(n)}(CW),FW=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];gA(this,e),this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return _A(e,[{key:"start",value:function(){this.startTime=BW(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=BW();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}();function BW(){return("undefined"==typeof performance?Date:performance).now()}var HW=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return gA(this,e),this.radius=t,this.phi=n,this.theta=r,this}return _A(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(rU(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();var jW={depth_frag:"uniform sampler2D textureMap;\nvarying vec2 vUV;\nout vec4 outColor;\nvec4 pack_depth(const in float depth) {\n    const vec4 bit_shift = vec4(256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0);\n    const vec4 bit_mask = vec4(0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);\n    vec4 res = fract(depth * bit_shift);\n    res -= res.xxyz * bit_mask;\n    return res;\n}\nvoid main() {\n    vec4 pixel = texture2D(textureMap, vUV);\n    if (pixel.a < 0.5) discard;\n    outColor = pack_depth(gl_FragCoord.z);\n}\n",depth_vert:"varying vec2 vUV;\nvoid main() {\n    vUV = 0.75 * uv;\n    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n    gl_Position = projectionMatrix * mvPosition;\n}\n"};function GW(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var VW=function(e){yk(n,e);var t=GW(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t,n){return n.set(e,t,Math.cos(e)*Math.sin(t))},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;gA(this,n),(e=t.call(this)).type="ParametricGeometry",e.parameters={func:r,slices:i,stacks:a};for(var o=[],s=[],u=[],l=[],c=1e-5,f=new Ez,h=new Ez,d=new Ez,p=new Ez,v=new Ez,m=i+1,g=0;g<=a;g++)for(var y=g/a,_=0;_<=i;_++){var b=_/i;r(b,y,h),s.push(h.x,h.y,h.z),b-c>=0?(r(b-c,y,d),p.subVectors(h,d)):(r(b+c,y,d),p.subVectors(d,h)),y-c>=0?(r(b,y-c,d),v.subVectors(h,d)):(r(b,y+c,d),v.subVectors(d,h)),f.crossVectors(p,v).normalize(),u.push(f.x,f.y,f.z),l.push(b,y)}for(var x=0;x<a;x++)for(var w=0;w<i;w++){var S=x*m+w,M=x*m+w+1,T=(x+1)*m+w+1,E=(x+1)*m+w;o.push(S,M,E),o.push(M,T,E)}return e.setIndex(o),e.setAttribute("position",new sB(s,3)),e.setAttribute("normal",new sB(u,3)),e.setAttribute("uv",new sB(l,2)),e}return _A(n)}(mB),WW=function(){function e(t,n){gA(this,e),this.position=t.clone(),this.previous=t.clone(),this.original=t.clone(),this.mass=n,this.inverseMass=1/n,this.acceleration=new Ez,this.tmp=new Ez}return _A(e,[{key:"applyForce",value:function(e){this.acceleration.addScaledVector(e,this.inverseMass)}},{key:"integrate",value:function(e){var t=this.tmp.subVectors(this.position,this.previous).multiplyScalar(.97).add(this.position).addScaledVector(this.acceleration,e);this.tmp=this.previous,this.previous=this.position,this.position=t,this.acceleration.set(0,0,0)}}]),e}(),qW=new Ez,XW=function(){function e(t,n,r){gA(this,e),this.p1=t,this.p2=n,this.restDistance=r}return _A(e,[{key:"resolve",value:function(){var e=this.p1,t=this.p2,n=this.restDistance;qW.subVectors(t.position,e.position);var r=qW.length();if(0!==r){var i=qW.multiplyScalar((1-n/r)/2);e.position.add(i),t.position.sub(i)}}}]),e}(),YW=function(){function e(t,n,r,i){gA(this,e);for(var a=r*t,o=r*n,s=[],u=[],l=function(e,n){return s[e+n*(t+1)]},c=function(e,t,n){n.set(e*a,t*o,0)},f=new Ez,h=i/((n+1)*(t+1)),d=0;d<=n;d++)for(var p=0;p<=t;p++)c(p/t,d/n,f),s.push(new WW(f,h));for(var v=0;v<n;v++)for(var m=0;m<t;m++)u.push(new XW(l(m,v),l(m,v+1),r)),u.push(new XW(l(m,v),l(m+1,v),r));for(var g=t,y=0;y<n;y++)u.push(new XW(l(g,y),l(g,y+1),r));for(var _=n,b=0;b<t;b++)u.push(new XW(l(b,_),l(b+1,_),r));for(var x=Math.sqrt(r*r*2),w=0;w<n;w++)for(var S=0;S<t;S++)u.push(new XW(l(S,w),l(S+1,w+1),x)),u.push(new XW(l(S+1,w),l(S,w+1),x));var M=new VW(c,t,n);M.getAttribute("position").setUsage(BC),this.xSegments=t,this.ySegments=n,this.restDistance=r,this.width=a,this.height=o,this.particles=s,this.constraints=u,this.particleAt=l,this.geometry=M}return _A(e,[{key:"reset",value:function(){for(var e=this.particles,t=0,n=e.length;t<n;t++){var r=e[t];r.previous.copy(r.position.copy(r.original))}}},{key:"simulate",value:function(e){for(var t=this.particles,n=this.constraints,r=e*e,i=0,a=t.length;i<a;i++)t[i].integrate(r);for(var o=0;o<2;o++)for(var s=0,u=n.length;s<u;s++)n[s].resolve()}},{key:"render",value:function(){for(var e=this.particles,t=this.geometry,n=t.getAttribute("position"),r=n.array,i=0,a=e.length;i<a;i++){var o=e[i].position,s=3*i;r[s]=o.x,r[s+1]=o.y,r[s+2]=o.z}n.needsUpdate=!0,t.computeVertexNormals()}}]),e}();function ZW(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var KW=new Ez,$W=function(e){yk(n,e);var t=ZW(n);function n(){return gA(this,n),t.apply(this,arguments)}return _A(n,[{key:"resolve",value:function(){var e=this.p1,t=this.p2,n=1.2*this.restDistance;KW.subVectors(e.position,t.position);var r=KW.length()/1.2;KW.normalize();var i=KW.multiplyScalar(r-n);r>n&&t.position.add(i)}}]),n}(XW),JW=function(e,t,n){for(var r=e*t,i=new Uint8Array(4*r),a=Math.floor(255*n.r),o=Math.floor(255*n.g),s=Math.floor(255*n.b),u=0;u<r;u++){var l=4*u;i[l]=a,i[l+1]=o,i[l+2]=s,i[l+3]=255}var c=new pW(i,e,t);return c.needsUpdate=!0,c}(1,1,new rz(16777215));var QW=function(){var e={edges:[],spacing:1};function t(e,t,n,r){var i=e.xSegments,a=e.ySegments,o=e.particleAt,s=r.spacing;switch(n){case pA.TOP:for(var u=0;u<=i;u+=s)t.push(o(u,a));break;case pA.LEFT:for(var l=0;l<=a;l+=s)t.push(o(0,l));break;case pA.BOTTOM:for(var c=0;c<=i;c+=s)t.push(o(c,0));break;case pA.RIGHT:for(var f=0;f<=a;f+=s)t.push(o(i,f))}}return function(n,r,i){var a=Object.assign({},e,i),o=a.edges;if("string"==typeof o)t(n,r,o,a);else if(o&&o.length)for(var s=0,u=o.length;s<u;s++)t(n,r,o[s],a)}}(),eq=function(){function e(t){gA(this,e);var n=Object.assign({},e.defaults,t);this.cloth=function(e){var t=e.width,n=e.height,r=e.mass,i=e.restDistance;return new YW(Math.max(1,Math.round(t/i)),Math.max(1,Math.round(n/i)),i,r*t*n)}(n),this.pins=[],this.lengthConstraints=[];var r=function(e,t){var n,r=e.geometry,i=JW,a=function(e){return e.needsUpdate=!0,e.anisotropy=16,e.minFilter=RR,e.magFilter=RR,e.wrapS=e.wrapT=SR,e},o=function(t,n){t.encoding=kC;var i=new xW({alphaTest:.5,color:16777215,metalness:.08,roughness:.86,side:n,map:t}),a=new PB(r,i);return a.castShadow=!0,a.customDepthMaterial=new jB({glslVersion:HC,uniforms:{textureMap:{value:t}},vertexShader:jW.depth_vert,fragmentShader:jW.depth_frag}),a.position.set(0,-e.height,0),a};return t&&t.texture&&(t.texture instanceof lz?(i=a(t.texture),t.backSideTexture instanceof lz&&(n=a(t.backSideTexture))):console.error("FlagWaver.Flag: options.texture must be an instance of THREE.Texture.")),[o(i,n?CA:PA),n?o(n,kA):null]}(this.cloth,n),i=rT(r,2),a=i[0],o=i[1];this.mesh=a,this.mesh2=o,this.object=new zF,this.object.add(this.mesh),this.mesh2&&this.object.add(this.mesh2),this.pin(n.pin)}return _A(e,[{key:"destroy",value:function(){this.mesh.material.dispose(),this.mesh.geometry.dispose(),this.mesh.material.map.dispose(),this.mesh.customDepthMaterial.dispose(),this.mesh2&&(this.mesh2.material.dispose(),this.mesh2.material.map.dispose(),this.mesh2.customDepthMaterial.dispose())}},{key:"pin",value:function(e){QW(this.cloth,this.pins,e)}},{key:"unpin",value:function(){this.pins=[]}},{key:"setLengthConstraints",value:function(e){var t=this.cloth,n=t.xSegments,r=t.ySegments,i=t.restDistance,a=t.particleAt,o=[];if(e===pA.LEFT)for(var s=0;s<=r;s++)for(var u=0;u<n;u++)o.push(new $W(a(u,s),a(u+1,s),i));else if(e===pA.TOP)for(var l=0;l<=n;l++)for(var c=r;c>0;c--)o.push(new $W(a(l,c),a(l,c-1),i));this.lengthConstraints=o}},{key:"reset",value:function(){this.cloth.reset()}},{key:"simulate",value:function(e){var t=this.pins,n=this.lengthConstraints;this.cloth.simulate(e);for(var r=0,i=t.length;r<i;r++){var a=t[r];a.previous.copy(a.position.copy(a.original))}for(var o=0;o<2;o++)for(var s=0,u=n.length;s<u;s++)n[s].resolve()}},{key:"render",value:function(){this.cloth.render()}}]),e}();EE(eq,"defaults",{width:1.8,height:1.2,mass:.11,restDistance:.12,rigidness:1,texture:JW,backSideTexture:null,pin:{edges:[pA.LEFT]}});var tq=Math.log,nq=Math.LOG10E,rq=Math.log10||function(e){return tq(e)*nq};function iq(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null!==e[0].index,r=new Set(Object.keys(e[0].attributes)),i=new Set(Object.keys(e[0].morphAttributes)),a={},o={},s=e[0].morphTargetsRelative,u=new mB,l=0,c=0;c<e.length;++c){var f=e[c],h=0;if(n!==(null!==f.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(var d in f.attributes){if(!r.has(d))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+d+'" attribute exists among all geometries, or in none of them.'),null;void 0===a[d]&&(a[d]=[]),a[d].push(f.attributes[d]),h++}if(h!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(s!==f.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(var p in f.morphAttributes){if(!i.has(p))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===o[p]&&(o[p]=[]),o[p].push(f.morphAttributes[p])}if(t){var v=void 0;if(n)v=f.index.count;else{if(void 0===f.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;v=f.attributes.position.count}u.addGroup(l,v,c),l+=v}}if(n){for(var m=0,g=[],y=0;y<e.length;++y){for(var _=e[y].index,b=0;b<_.count;++b)g.push(_.getX(b)+m);m+=e[y].attributes.position.count}u.setIndex(g)}for(var x in a){var w=aq(a[x]);if(!w)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+x+" attribute."),null;u.setAttribute(x,w)}for(var S in o){var M=o[S][0].length;if(0===M)break;u.morphAttributes=u.morphAttributes||{},u.morphAttributes[S]=[];for(var T=0;T<M;++T){for(var E=[],A=0;A<o[S].length;++A)E.push(o[S][A][T]);var R=aq(E);if(!R)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+S+" morphAttribute."),null;u.morphAttributes[S].push(R)}}return u}function aq(e){for(var t,n,r,i=0,a=0;a<e.length;++a){var o=e[a];if(o.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===t&&(t=o.array.constructor),t!==o.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===n&&(n=o.itemSize),n!==o.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===r&&(r=o.normalized),r!==o.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;i+=o.array.length}for(var s=new t(i),u=0,l=0;l<e.length;++l)s.set(e[l].array,u),u+=e[l].array.length;return new iB(s,n,r)}function oq(e){var t=e.poleWidth/2,n=e.poleLength,r=e.poleCapSize/2,i=new yW(t,t,n,32);i.translate(0,e.poleLength/2,0);var a=new yW(r,r,r,32);return a.translate(0,n+r/2,0),iq([i,a])}ni({target:"Math",stat:!0},{log10:rq});var sq=function(){function e(t){gA(this,e);var n=Object.assign({},this.constructor.defaults,t),r=this.buildGeometry(n),i=new xW({color:16711422,metalness:.98,roughness:.55}),a=new PB(r,i);a.receiveShadow=!0,a.castShadow=!0,this.top=new Ez(0,n.poleLength,0),this.mesh=a,this.object=this.mesh}return _A(e,[{key:"destroy",value:function(){this.mesh.material.dispose(),this.mesh.geometry.dispose()}},{key:"buildGeometry",value:function(e){return oq(e)}},{key:"addFlag",value:function(e){e.unpin(),e.pin({edges:[pA.LEFT]}),e.setLengthConstraints(pA.LEFT),e.object.position.add(this.top)}}]),e}();EE(sq,"defaults",function(){var e={};return e.flagpoleType=vA.VERTICAL,e.poleWidth=.076,e.poleLength=6,e.poleCapSize=4*e.poleWidth/3,e.crossbarWidth=2*e.poleWidth/3,e.crossbarLength=1.2,e.crossbarCapSize=3*e.crossbarWidth/2,e.poleTopOffset=.1,e}());var uq=function(){function e(t){gA(this,e);var n=Object.assign({},t),r=n.flagpole,i=n.flag;this.flagpole=r||new sq,this.flag=i||new eq,this.flagpole.addFlag(this.flag,0),this.object=new zF,this.object.add(this.flagpole.object),this.object.add(this.flag.object)}return _A(e,[{key:"destroy",value:function(){this.destroyChildSubject(this.flagpole),this.destroyChildSubject(this.flag)}},{key:"destroyChildSubject",value:function(e){e&&(this.object.remove(e.object),e.destroy())}},{key:"reset",value:function(){this.flag.reset()}},{key:"simulate",value:function(e){this.flag.simulate(e)}},{key:"render",value:function(){this.flag.render()}}]),e}();function lq(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var cq=function(e){yk(n,e);var t=lq(n);function n(e){var r;gA(this,n),r=t.call(this,e);var i=Object.assign({},e),a=i.texture,o=i.backSideTexture;return r.video=a&&a.image instanceof HTMLVideoElement?a.image:null,r.video2=o&&o.image instanceof HTMLVideoElement?o.image:null,r}return _A(n,[{key:"destroy",value:function(){Mz(xk(n.prototype),"destroy",this).call(this),this.pause()}},{key:"play",value:function(){var e=this.video,t=this.video2,n=[];return e&&e.paused&&n.push(e.play()),t&&t.paused&&n.push(t.play()),Promise.all(n)}},{key:"pause",value:function(){var e=this.video,t=this.video2;e&&!e.paused&&e.pause(),t&&!t.paused&&t.pause()}},{key:"reset",value:function(){Mz(xk(n.prototype),"reset",this).call(this);var e=this.video,t=this.video2;e&&(e.currentTime=0),t&&(t.currentTime=0)}},{key:"simulate",value:function(e){Mz(xk(n.prototype),"simulate",this).call(this,e);var t=this.video,r=this.video2;if(t&&t.paused){var i=t.currentTime;this.mesh.material.map.update(),t.currentTime+=e,t.loop&&e&&i===t.currentTime&&(t.currentTime=0)}if(r&&r.paused){var a=r.currentTime;this.mesh2.material.map.update(),r.currentTime+=e,r.loop&&e&&a===r.currentTime&&(r.currentTime=0)}}}]),n}(eq),fq={noEffect:function(e){return e},blowFromLeftDirection:function(e,t){return e.set(2e3,0,1e3)},rotatingDirection:function(e,t){return e.set(Math.sin(t/2e3),Math.cos(t/3e3),Math.sin(t/1e3))},constantSpeed:function(e,t){return e},variableSpeed:function(e,t){return e*(1+.25*Math.cos(t/7e3))}};var hq=function(){function e(t){gA(this,e);var n=Object.assign({},this.constructor.defaults,t);this.direction=n.direction,this.speed=n.speed,this.directionFn=n.directionFn,this.speedFn=n.speedFn,this.pressure=new Ez}return _A(e,[{key:"update",value:function(){var e,t=Date.now();this.directionFn(function(e){return 0===e.x&&(e.x=.001),0===e.y&&(e.y=.001),0===e.z&&(e.z=.001),e}(this.pressure.copy(this.direction)),t).normalize().multiplyScalar((e=this.speedFn(function(e){return 0===e?.001:e}(this.speed),t),.5*hA*e*e))}}]),e}();function dq(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}EE(hq,"defaults",{direction:new Ez(1,0,0),speed:10,directionFn:fq.blowFromLeftDirection,speedFn:fq.constantSpeed});var pq=function(e){yk(n,e);var t=dq(n);function n(e){var r;gA(this,n),r=t.call(this,e);var i=Object.assign({},r.constructor.defaults,e);return r.top.set(0,i.poleLength-i.poleTopOffset,i.poleWidth/2+i.crossbarWidth/2),r.verticalHoisting=i.verticalHoisting,r}return _A(n,[{key:"buildGeometry",value:function(e){return function(e){var t=oq(e),n=e.poleWidth/2,r=e.poleLength,i=e.crossbarWidth/2,a=e.crossbarLength,o=e.crossbarCapSize/2,s=e.poleTopOffset,u=new yW(i,i,a,16);u.rotateZ(Math.PI/2);var l=new yW(o,o,o,16),c=l.clone(),f=r-s,h=n+i;return l.rotateZ(Math.PI/2),l.translate(-a/2,f,h),c.rotateZ(-Math.PI/2),c.translate(a/2,f,h),u.translate(0,f,h),iq([t,u,l,c])}(e)}},{key:"addFlag",value:function(e){switch(e.unpin(),this.verticalHoisting){case mA.NONE:e.pin({edges:[pA.TOP]}),e.setLengthConstraints(pA.TOP),e.object.position.add(this.top),e.object.position.x=-e.cloth.width/2;break;case mA.TOP_LEFT:e.pin({edges:[pA.LEFT]}),e.setLengthConstraints(pA.LEFT),e.object.position.add(this.top),e.object.position.x=-e.cloth.height/2,e.object.rotateZ(3*Math.PI/2),e.object.rotateX(Math.PI);break;case mA.TOP_RIGHT:default:e.pin({edges:[pA.LEFT]}),e.setLengthConstraints(pA.LEFT),e.object.position.add(this.top),e.object.position.x=e.cloth.height/2,e.object.rotateZ(3*Math.PI/2)}}}]),n}(sq);function vq(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var mq=function(e){yk(n,e);var t=vq(n);function n(){return gA(this,n),t.apply(this,arguments)}return _A(n,[{key:"buildGeometry",value:function(e){return function(e){var t=oq(e),n=e.poleLength,r=e.poleCapSize/2,i=e.crossbarWidth/2,a=e.crossbarLength,o=new yW(i,i,a,16);return o.rotateZ(Math.PI/2),o.translate(a/2,n+r-i,0),iq([t,o])}(e)}},{key:"addFlag",value:function(e){e.unpin(),e.pin({edges:[pA.LEFT,pA.TOP]}),e.setLengthConstraints(pA.LEFT),e.object.position.add(this.top)}}]),n}(sq);function gq(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var yq=new Ez(0,0,1),_q=function(e){yk(n,e);var t=gq(n);function n(e){var r;return gA(this,n),(r=t.call(this,e)).top.applyAxisAngle(yq,3*Math.PI/2),r}return _A(n,[{key:"buildGeometry",value:function(e){var t=oq(e);return t.rotateZ(3*Math.PI/2),t}},{key:"addFlag",value:function(e){e.unpin(),e.pin({edges:[pA.LEFT]}),e.setLengthConstraints(pA.LEFT),e.object.position.add(this.top),e.object.rotateZ(3*Math.PI/2)}}]),n}(sq);function bq(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var xq=new Ez(0,0,1),wq=function(e){yk(n,e);var t=bq(n);function n(e){var r;return gA(this,n),(r=t.call(this,e)).top.applyAxisAngle(xq,7*Math.PI/4),r}return _A(n,[{key:"buildGeometry",value:function(e){var t=oq(e);return t.rotateZ(7*Math.PI/4),t}},{key:"addFlag",value:function(e){e.unpin(),e.pin({edges:[pA.LEFT]}),e.setLengthConstraints(pA.LEFT),e.object.position.add(this.top),e.object.rotateZ(7*Math.PI/4)}}]),n}(sq),Sq=new Ez,Mq=new Ez;function Tq(e,t){return Sq.copy(e),t instanceof zF&&(Mq.setFromMatrixPosition(t.matrixWorld),Sq.add(Mq),t.worldToLocal(Sq)),Sq}var Eq=new Ez(0,-9.80665,0);new Ez;var Aq=new Ez,Rq=new Ez;var Cq={},kq={get exports(){return Cq},set exports(e){Cq=e}};!function(e,t){e.exports=function(){var e=function e(){function t(e){return i.appendChild(e.dom),e}function n(e){for(var t=0;t<i.children.length;t++)i.children[t].style.display=t===e?"block":"none";r=e}var r=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",(function(e){e.preventDefault(),n(++r%i.children.length)}),!1);var a=(performance||Date).now(),o=a,s=0,u=t(new e.Panel("FPS","#0ff","#002")),l=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:i,addPanel:t,showPanel:n,begin:function(){a=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(l.update(e-a,200),e>o+1e3&&(u.update(1e3*s/(e-o),100),o=e,s=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:i,setMode:n}};return e.Panel=function(e,t,n){var r=1/0,i=0,a=Math.round,o=a(window.devicePixelRatio||1),s=80*o,u=48*o,l=3*o,c=2*o,f=3*o,h=15*o,d=74*o,p=30*o,v=document.createElement("canvas");v.width=s,v.height=u,v.style.cssText="width:80px;height:48px";var m=v.getContext("2d");return m.font="bold "+9*o+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=n,m.fillRect(0,0,s,u),m.fillStyle=t,m.fillText(e,l,c),m.fillRect(f,h,d,p),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(f,h,d,p),{dom:v,update:function(u,g){r=Math.min(r,u),i=Math.max(i,u),m.fillStyle=n,m.globalAlpha=1,m.fillRect(0,0,s,h),m.fillStyle=t,m.fillText(a(u)+" "+e+" ("+a(r)+"-"+a(i)+")",l,c),m.drawImage(v,f+o,h,d-o,p,f,h,d-o,p),m.fillRect(f+d-o,h,o,p),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(f+d-o,h,o,a((1-u/g)*p))}}},e}()}(kq);var Pq=function(){function e(){gA(this,e)}return _A(e,[{key:"init",value:function(){}},{key:"deinit",value:function(){}}]),e}();EE(Pq,"displayName","module");var Lq=function(){function e(t){gA(this,e),this.context=t||this,this.modules=[]}return _A(e,[{key:"getModulesByType",value:function(e){for(var t=this.modules,n=[],r=0,i=t.length;r<i;r++){var a=t[r];a.constructor.displayName===e&&n.push(a)}return n}},{key:"module",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.modules,r=0,i=n.length,a=0;r<i;r++){var o=n[r];if(o.constructor.displayName===e){if(a===t)return o;a++}}return null}},{key:"add",value:function(e){if(e instanceof Pq)return e.init&&e.init(this.context),this.modules.push(e),e}},{key:"remove",value:function(e){if(e instanceof Pq){var t=this.modules,n=t.indexOf(e);if(!(n<0))return e.deinit(this.context),t.splice(n,1)[0]}}}]),e}();function Oq(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var Dq=function(e){yk(n,e);var t=Oq(n);function n(e){var r;gA(this,n),r=t.call(this);var i=Object.assign({},r.constructor.defaults,e),a=i.scene,o=i.camera,s=i.renderer,u=new FW,l=cA,c=0,f=0,h=function(e){for(var t=r.modules,n=0,i=t.length;n<i;n++){var a=t[n];"needsUpdate"in a&&(a.needsUpdate=e)}},d=function(e){for(var t=r.modules,n=0,i=t.length;n<i;n++){var a=t[n];a.update&&a.update(e)}},p=function(){s.render(a,o)},v=function(){!function(){for(var e=r.modules,t=0,n=e.length;t<n;t++){var i=e[t];i.subject&&i.reset&&i.reset()}}(),p()},m=function(e){r.needsUpdate&&(h(!0),r.needsUpdate=!1),d(e),p()},g=function e(){if(requestAnimationFrame(e),u.running){var t=0;for(c+=u.getDelta();c>=l;)if(m(l),c-=l,++t>=2){c=0,f<=255&&(255===f?console.warn("FlagWaver.App: maxUpdatesPerFrame exceeded. Suppressing further warnings."):console.warn("FlagWaver.App: maxUpdatesPerFrame exceeded."),f++);break}}};return a.add(o),u.start(),v(),g(),r.scene=a,r.camera=o,r.renderer=s,r.canvas=s.domElement,r.clock=u,r.timestep=l,r.destroy=function(){u.stop(),function(){for(var e=r.modules,t=0,n=e.length;t<n;t++)r.remove(e[t])}(),cancelAnimationFrame(g),s.dispose(),s.forceContextLoss(),r.canvas=s.domElement=null,r.scene=a=null,r.camera=o=null,r.renderer=s=null},r.render=p,r.start=v,r.refresh=function(){h(!0),r.needsUpdate=!1,d(0),p()},r.update=m,r.needsUpdate=!1,r}return _A(n)}(Lq);function Nq(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var Iq=function(e){yk(n,e);var t=Nq(n);function n(){var e;return gA(this,n),(e=t.call(this)).app=null,e.muted=!1,e}return _A(n,[{key:"init",value:function(e){this.app=e}},{key:"deinit",value:function(){this.play()}},{key:"play",value:function(){var e=this.app.clock;e.running||(e.start(),this.app.refresh())}},{key:"pause",value:function(){var e=this.app.clock;e.running&&(e.stop(),this.app.refresh())}},{key:"step",value:function(){var e=this.app,t=e.clock,n=e.timestep;t.running||(t.elapsedTime+=n,this.app.update(n))}},{key:"reset",value:function(){var e=this.app.clock;e.startTime=0,e.oldTime=0,e.elapsedTime=0,this.app.start(),this.app.refresh()}}]),n}(Pq);function Uq(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}EE(Iq,"displayName","animationControlModule");var zq=function(e){yk(n,e);var t=Uq(n);function n(){var e;return gA(this,n),(e=t.call(this)).app=null,e.resize=e.resize.bind(_k(e)),e}return _A(n,[{key:"init",value:function(e){this.app=e,window.addEventListener("resize",this.resize),this.resize()}},{key:"deinit",value:function(){window.removeEventListener("resize",this.resize)}},{key:"resize",value:function(){var e=this.app,t=e.scene,n=e.camera,r=e.renderer,i=r.domElement.parentElement,a=1,o=1;i&&(o=i.clientWidth,a=i.clientHeight),n.aspect=o/a,n.updateProjectionMatrix(),r.setSize(o,a),r.render(t,n)}}]),n}(Pq);function Fq(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}EE(zq,"displayName","resizeModule");var Bq=function(e){yk(n,e);var t=Fq(n);function n(e){var r;return gA(this,n),(r=t.call(this)).subject=new uq(Object.assign({},uq.defaults,e)),r.app=null,r}return _A(n,[{key:"init",value:function(e){this.app=e,this.app.scene.add(this.subject.object)}},{key:"deinit",value:function(){this.app.scene.remove(this.subject.object),this.subject.destroy()}},{key:"reset",value:function(){this.subject.reset(),this.subject.render()}},{key:"update",value:function(e){this.subject.simulate(e),this.subject.render()}}]),n}(Pq);function Hq(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}EE(Bq,"displayName","flagGroupModule");var jq={type:"change"},Gq={type:"start"},Vq={type:"end"},Wq=function(e){yk(n,e);var t=Hq(n);function n(e,r){var i,a,o,s,u,l,c;gA(this,n),(i=t.call(this)).object=e,i.domElement=r,i.domElement.style.touchAction="none",i.enabled=!0,i.target=new Ez,i.minDistance=0,i.maxDistance=1/0,i.minZoom=0,i.maxZoom=1/0,i.minPolarAngle=0,i.maxPolarAngle=Math.PI,i.minAzimuthAngle=-1/0,i.maxAzimuthAngle=1/0,i.enableDamping=!1,i.dampingFactor=.05,i.enableZoom=!0,i.zoomSpeed=1,i.enableRotate=!0,i.rotateSpeed=1,i.enablePan=!0,i.panSpeed=1,i.screenSpacePanning=!0,i.keyPanSpeed=7,i.autoRotate=!1,i.autoRotateSpeed=2,i.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},i.mouseButtons={LEFT:xA.ROTATE,MIDDLE:xA.DOLLY,RIGHT:xA.PAN},i.touches={ONE:wA.ROTATE,TWO:wA.DOLLY_PAN},i.target0=i.target.clone(),i.position0=i.object.position.clone(),i.zoom0=i.object.zoom,i._domElementKeyEvents=null,i.getPolarAngle=function(){return v.phi},i.getAzimuthalAngle=function(){return v.theta},i.getDistance=function(){return this.object.position.distanceTo(this.target)},i.listenToKeyEvents=function(e){e.addEventListener("keydown",J),this._domElementKeyEvents=e},i.saveState=function(){f.target0.copy(f.target),f.position0.copy(f.object.position),f.zoom0=f.object.zoom},i.reset=function(){f.target.copy(f.target0),f.object.position.copy(f.position0),f.object.zoom=f.zoom0,f.object.updateProjectionMatrix(),f.dispatchEvent(jq),f.update(),d=h.NONE},i.update=(a=new Ez,o=(new Tz).setFromUnitVectors(e.up,new Ez(0,1,0)),s=o.clone().invert(),u=new Ez,l=new Tz,c=2*Math.PI,function(){var e=f.object.position;a.copy(e).sub(f.target),a.applyQuaternion(o),v.setFromVector3(a),f.autoRotate&&d===h.NONE&&L(2*Math.PI/60/60*f.autoRotateSpeed),f.enableDamping?(v.theta+=m.theta*f.dampingFactor,v.phi+=m.phi*f.dampingFactor):(v.theta+=m.theta,v.phi+=m.phi);var t=f.minAzimuthAngle,n=f.maxAzimuthAngle;return isFinite(t)&&isFinite(n)&&(t<-Math.PI?t+=c:t>Math.PI&&(t-=c),n<-Math.PI?n+=c:n>Math.PI&&(n-=c),v.theta=t<=n?Math.max(t,Math.min(n,v.theta)):v.theta>(t+n)/2?Math.max(t,v.theta):Math.min(n,v.theta)),v.phi=Math.max(f.minPolarAngle,Math.min(f.maxPolarAngle,v.phi)),v.makeSafe(),v.radius*=g,v.radius=Math.max(f.minDistance,Math.min(f.maxDistance,v.radius)),!0===f.enableDamping?f.target.addScaledVector(y,f.dampingFactor):f.target.add(y),a.setFromSpherical(v),a.applyQuaternion(s),e.copy(f.target).add(a),f.object.lookAt(f.target),!0===f.enableDamping?(m.theta*=1-f.dampingFactor,m.phi*=1-f.dampingFactor,y.multiplyScalar(1-f.dampingFactor)):(m.set(0,0,0),y.set(0,0,0)),g=1,!!(_||u.distanceToSquared(f.object.position)>p||8*(1-l.dot(f.object.quaternion))>p)&&(f.dispatchEvent(jq),u.copy(f.object.position),l.copy(f.object.quaternion),_=!1,!0)}),i.dispose=function(){f.domElement.removeEventListener("contextmenu",Q),f.domElement.removeEventListener("pointerdown",X),f.domElement.removeEventListener("pointercancel",K),f.domElement.removeEventListener("wheel",$),f.domElement.removeEventListener("pointermove",Y),f.domElement.removeEventListener("pointerup",Z),null!==f._domElementKeyEvents&&f._domElementKeyEvents.removeEventListener("keydown",J)};var f=_k(i),h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},d=h.NONE,p=1e-6,v=new HW,m=new HW,g=1,y=new Ez,_=!1,b=new yU,x=new yU,w=new yU,S=new yU,M=new yU,T=new yU,E=new yU,A=new yU,R=new yU,C=[],k={};function P(){return Math.pow(.95,f.zoomSpeed)}function L(e){m.theta-=e}function O(e){m.phi-=e}var D=function(){var e=new Ez;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),y.add(e)}}(),N=function(){var e=new Ez;return function(t,n){!0===f.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(f.object.up,e)),e.multiplyScalar(t),y.add(e)}}(),I=function(){var e=new Ez;return function(t,n){var r=f.domElement;if(f.object.isPerspectiveCamera){var i=f.object.position;e.copy(i).sub(f.target);var a=e.length();a*=Math.tan(f.object.fov/2*Math.PI/180),D(2*t*a/r.clientHeight,f.object.matrix),N(2*n*a/r.clientHeight,f.object.matrix)}else f.object.isOrthographicCamera?(D(t*(f.object.right-f.object.left)/f.object.zoom/r.clientWidth,f.object.matrix),N(n*(f.object.top-f.object.bottom)/f.object.zoom/r.clientHeight,f.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),f.enablePan=!1)}}();function U(e){f.object.isPerspectiveCamera?g/=e:f.object.isOrthographicCamera?(f.object.zoom=Math.max(f.minZoom,Math.min(f.maxZoom,f.object.zoom*e)),f.object.updateProjectionMatrix(),_=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),f.enableZoom=!1)}function z(e){f.object.isPerspectiveCamera?g*=e:f.object.isOrthographicCamera?(f.object.zoom=Math.max(f.minZoom,Math.min(f.maxZoom,f.object.zoom/e)),f.object.updateProjectionMatrix(),_=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),f.enableZoom=!1)}function F(e){b.set(e.clientX,e.clientY)}function B(e){S.set(e.clientX,e.clientY)}function H(){if(1===C.length)b.set(C[0].pageX,C[0].pageY);else{var e=.5*(C[0].pageX+C[1].pageX),t=.5*(C[0].pageY+C[1].pageY);b.set(e,t)}}function j(){if(1===C.length)S.set(C[0].pageX,C[0].pageY);else{var e=.5*(C[0].pageX+C[1].pageX),t=.5*(C[0].pageY+C[1].pageY);S.set(e,t)}}function G(){var e=C[0].pageX-C[1].pageX,t=C[0].pageY-C[1].pageY,n=Math.sqrt(e*e+t*t);E.set(0,n)}function V(e){if(1==C.length)x.set(e.pageX,e.pageY);else{var t=ne(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);x.set(n,r)}w.subVectors(x,b).multiplyScalar(f.rotateSpeed);var i=f.domElement;L(2*Math.PI*w.x/i.clientHeight),O(2*Math.PI*w.y/i.clientHeight),b.copy(x)}function W(e){if(1===C.length)M.set(e.pageX,e.pageY);else{var t=ne(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);M.set(n,r)}T.subVectors(M,S).multiplyScalar(f.panSpeed),I(T.x,T.y),S.copy(M)}function q(e){var t=ne(e),n=e.pageX-t.x,r=e.pageY-t.y,i=Math.sqrt(n*n+r*r);A.set(0,i),R.set(0,Math.pow(A.y/E.y,f.zoomSpeed)),U(R.y),E.copy(A)}function X(e){!1!==f.enabled&&(0===C.length&&(f.domElement.setPointerCapture(e.pointerId),f.domElement.addEventListener("pointermove",Y),f.domElement.addEventListener("pointerup",Z)),function(e){C.push(e)}(e),"touch"===e.pointerType?function(e){switch(te(e),C.length){case 1:switch(f.touches.ONE){case wA.ROTATE:if(!1===f.enableRotate)return;H(),d=h.TOUCH_ROTATE;break;case wA.PAN:if(!1===f.enablePan)return;j(),d=h.TOUCH_PAN;break;default:d=h.NONE}break;case 2:switch(f.touches.TWO){case wA.DOLLY_PAN:if(!1===f.enableZoom&&!1===f.enablePan)return;f.enableZoom&&G(),f.enablePan&&j(),d=h.TOUCH_DOLLY_PAN;break;case wA.DOLLY_ROTATE:if(!1===f.enableZoom&&!1===f.enableRotate)return;f.enableZoom&&G(),f.enableRotate&&H(),d=h.TOUCH_DOLLY_ROTATE;break;default:d=h.NONE}break;default:d=h.NONE}d!==h.NONE&&f.dispatchEvent(Gq)}(e):function(e){var t;switch(e.button){case 0:t=f.mouseButtons.LEFT;break;case 1:t=f.mouseButtons.MIDDLE;break;case 2:t=f.mouseButtons.RIGHT;break;default:t=-1}switch(t){case xA.DOLLY:if(!1===f.enableZoom)return;!function(e){E.set(e.clientX,e.clientY)}(e),d=h.DOLLY;break;case xA.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===f.enablePan)return;B(e),d=h.PAN}else{if(!1===f.enableRotate)return;F(e),d=h.ROTATE}break;case xA.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===f.enableRotate)return;F(e),d=h.ROTATE}else{if(!1===f.enablePan)return;B(e),d=h.PAN}break;default:d=h.NONE}d!==h.NONE&&f.dispatchEvent(Gq)}(e))}function Y(e){!1!==f.enabled&&("touch"===e.pointerType?function(e){switch(te(e),d){case h.TOUCH_ROTATE:if(!1===f.enableRotate)return;V(e),f.update();break;case h.TOUCH_PAN:if(!1===f.enablePan)return;W(e),f.update();break;case h.TOUCH_DOLLY_PAN:if(!1===f.enableZoom&&!1===f.enablePan)return;!function(e){f.enableZoom&&q(e),f.enablePan&&W(e)}(e),f.update();break;case h.TOUCH_DOLLY_ROTATE:if(!1===f.enableZoom&&!1===f.enableRotate)return;!function(e){f.enableZoom&&q(e),f.enableRotate&&V(e)}(e),f.update();break;default:d=h.NONE}}(e):function(e){switch(d){case h.ROTATE:if(!1===f.enableRotate)return;!function(e){x.set(e.clientX,e.clientY),w.subVectors(x,b).multiplyScalar(f.rotateSpeed);var t=f.domElement;L(2*Math.PI*w.x/t.clientHeight),O(2*Math.PI*w.y/t.clientHeight),b.copy(x),f.update()}(e);break;case h.DOLLY:if(!1===f.enableZoom)return;!function(e){A.set(e.clientX,e.clientY),R.subVectors(A,E),R.y>0?U(P()):R.y<0&&z(P()),E.copy(A),f.update()}(e);break;case h.PAN:if(!1===f.enablePan)return;!function(e){M.set(e.clientX,e.clientY),T.subVectors(M,S).multiplyScalar(f.panSpeed),I(T.x,T.y),S.copy(M),f.update()}(e)}}(e))}function Z(e){ee(e),0===C.length&&(f.domElement.releasePointerCapture(e.pointerId),f.domElement.removeEventListener("pointermove",Y),f.domElement.removeEventListener("pointerup",Z)),f.dispatchEvent(Vq),d=h.NONE}function K(e){ee(e)}function $(e){!1!==f.enabled&&!1!==f.enableZoom&&d===h.NONE&&(e.preventDefault(),f.dispatchEvent(Gq),function(e){e.deltaY<0?z(P()):e.deltaY>0&&U(P()),f.update()}(e),f.dispatchEvent(Vq))}function J(e){!1!==f.enabled&&!1!==f.enablePan&&function(e){var t=!1;switch(e.code){case f.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?O(2*Math.PI*f.rotateSpeed/f.domElement.clientHeight):I(0,f.keyPanSpeed),t=!0;break;case f.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?O(-2*Math.PI*f.rotateSpeed/f.domElement.clientHeight):I(0,-f.keyPanSpeed),t=!0;break;case f.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?L(2*Math.PI*f.rotateSpeed/f.domElement.clientHeight):I(f.keyPanSpeed,0),t=!0;break;case f.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?L(-2*Math.PI*f.rotateSpeed/f.domElement.clientHeight):I(-f.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),f.update())}(e)}function Q(e){!1!==f.enabled&&e.preventDefault()}function ee(e){delete k[e.pointerId];for(var t=0;t<C.length;t++)if(C[t].pointerId==e.pointerId)return void C.splice(t,1)}function te(e){var t=k[e.pointerId];void 0===t&&(t=new yU,k[e.pointerId]=t),t.set(e.pageX,e.pageY)}function ne(e){var t=e.pointerId===C[0].pointerId?C[1]:C[0];return k[t.pointerId]}return f.domElement.addEventListener("contextmenu",Q),f.domElement.addEventListener("pointerdown",X),f.domElement.addEventListener("pointercancel",K),f.domElement.addEventListener("wheel",$,{passive:!1}),i.update(),i}return _A(n)}(wk);function qq(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var Xq=function(e){yk(n,e);var t=qq(n);function n(){var e;return gA(this,n),(e=t.call(this)).orbitControls=null,e}return _A(n,[{key:"init",value:function(e){this.orbitControls=new Wq(e.camera,e.renderer.domElement)}},{key:"deinit",value:function(){this.orbitControls.dispose()}}]),n}(Pq);function Yq(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}EE(Xq,"displayName","orbitControlsModule");var Zq=function(e){yk(n,e);var t=Yq(n);function n(e,r){var i;return gA(this,n),(i=t.call(this)).updateFn=e||function(){},i.onNeedsUpdate=r||function(){},i.needsUpdate=!1,i}return _A(n,[{key:"update",value:function(e){this.needsUpdate&&(this.onNeedsUpdate(),this.needsUpdate=!1),this.updateFn(e)}}]),n}(Pq);function Kq(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}EE(Zq,"displayName","processModule");var $q=function(e){yk(n,e);var t=Kq(n);function n(e){var r;return gA(this,n),(r=t.call(this)).subject=new hq(Object.assign({},hq.defaults,e)),r}return _A(n,[{key:"update",value:function(e){this.subject.update(e)}}]),n}(Pq);function Jq(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}EE($q,"displayName","windModule");var Qq=function(e){yk(n,e);var t=Jq(n);function n(e){var r;gA(this,n),r=t.call(this,e);var i=Object.assign({},r.constructor.defaults,e);return r.top.set(0,2*i.poleLength/3,0),r}return _A(n,[{key:"buildGeometry",value:function(e){var t=oq(e);return t.translate(0,5*-e.poleLength/3,0),t.rotateZ(Math.PI),t}},{key:"addFlag",value:function(e){e.unpin(),e.pin({edges:[pA.LEFT]}),e.setLengthConstraints(pA.LEFT),e.object.position.add(this.top),e.object.translateY(e.cloth.height)}}]),n}(sq);function eX(e,t){var n,r=Object.assign({},e);switch(r.flagpoleType){case vA.HORIZONTAL:n=new _q(r);break;case vA.OUTRIGGER:n=new wq(r);break;case vA.CROSSBAR:r.crossbarLength=r.verticalHoisting===mA.NONE?t.cloth.width:t.cloth.height,n=new pq(r);break;case vA.GALLERY:r.crossbarLength=t.cloth.width,n=new mq(r);break;case vA.AUSTRALIAN:n=new Qq(r);break;case vA.VERTICAL:default:n=new sq(r)}return n}function tX(e){switch(e){case pA.TOP:return 0;case pA.LEFT:return-Math.PI/2;case pA.BOTTOM:return Math.PI;case pA.RIGHT:return Math.PI/2;default:return 0}}var nX=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},rX=function(e){return!(!e||"object"!==Rc(e))},iX=500,aX={image:null,backSideImage:null,width:"auto",height:"auto",hoisting:dA.DEXTER,orientation:pA.TOP,resolution:256};function oX(e,t){var n=e?function(e,t){var n=e.width||e.videoWidth,r=e.height||e.videoHeight;if("auto"===t.width&&"auto"===t.height){var i=eq.defaults.height;return n<r?{width:i,height:i*r/n}:{width:i*n/r,height:i}}return"auto"===t.width&&nX(t.height)?{width:t.height*n/r,height:t.height}:nX(t.width)&&"auto"===t.height?{width:t.width,height:t.width*r/n}:{width:t.width,height:t.height}}(e,t):t,r=n.width,i=n.height;if(nX(r)&&nX(i)){var a=Math.min(1,iX/Math.max(r,i));return{width:r*a,height:i*a}}return{width:eq.defaults.width,height:eq.defaults.height}}function sX(e,t,n){var r=e instanceof HTMLVideoElement?new mW(e):new lz(function(e,t){var n=document.createElement("canvas"),r=n.getContext("2d"),i=e.width,a=e.height,o=Math.min(1,t.height*t.resolution/a),s=Math.round(i*o),u=Math.round(a*o);return n.width=s,n.height=u,r.drawImage(e,0,0,s,u),n}(e,t));if(r.matrixAutoUpdate=!1,rX(n)){var i=r.matrix;i.scale(1,1),n.reflect&&i.translate(-1,0).scale(-1,1),nX(n.rotate)&&i.translate(-.5,-.5).rotate(-n.rotate).translate(.5,.5)}return r}function uX(e){var t={};!function(e){return e.orientation===pA.LEFT||e.orientation===pA.RIGHT}(e)?(t.width=e.width,t.height=e.height):(t.width=e.height,t.height=e.width);var n=e.hoisting===dA.SINISTER,r=e.image,i=e.backSideImage;if(n&&i){var a=r;r=i,i=a}return r&&(t.texture=sX(r,e,{reflect:!i&&n,rotate:tX(e.orientation)})),i&&(t.backSideTexture=sX(i,e,{reflect:!0,rotate:-tX(e.orientation)})),t}function lX(e){var t=Object.assign({},aX,e);return Object.assign(t,oX(t.image,t)),uX(t)}var cX=new AW;function fX(e,t,n){cX.load(e,t,null,(function(t){console.error("FlagWaver.loadImage: Failed to load image from ".concat(e,".")),n&&n(t)}))}cX.setCrossOrigin("anonymous");var hX={defaultValue:"",parse:function(e){return e},stringify:function(e){return e}};function dX(e,t){return t===e.defaultValue||""===t||null==t}var pX=function(){function e(t){gA(this,e),this.fields=Object.keys(t).reduce((function(e,n){return e[n]=Object.assign({},hX,t[n]),e}),{})}return _A(e,[{key:"parse",value:function(e){var t,n=this.fields,r=(t=function(e){var t={};if("string"!=typeof e)return t;for(var n=e.split("&"),r=0,i=n.length;r<i;r++){var a=n[r];if(a){var o=a.split("="),s=o[0];s&&(t[s]=void 0!==o[1]?o.slice(1).join("="):null)}}return t}(e),Object.keys(t).reduce((function(e,n){return e[n.toLowerCase()]=t[n],e}),{}));return Object.keys(n).reduce((function(e,t){var i=n[t],a=r[t],o=a&&i.parse(a);return e[t]=dX(i,o)?i.defaultValue:o,e}),r)}},{key:"stringify",value:function(e){var t=this.fields;return function(e){for(var t=Object.keys(e),n=[],r=0,i=t.length;r<i;r++){var a=t[r],o=e[a];null===o?n.push(a):void 0!==o&&n.push(a+"="+o)}return n.join("&")}(Object.keys(t).reduce((function(n,r){var i=t[r],a=e[r];return dX(i,a)||(n[r]=i.stringify(a)),n}),{}))}}]),e}(),vX=window,mX=vX.history,gX=vX.location,yX=!(!mX||!mX.replaceState),_X=function(){try{mX.replaceState(null,"",gX.href)}catch(e){return!1}return!0}();var bX=/^(?:[^#]*(?:#!|#\?|#)|[^\?]*\?)?(.*)$/;function xX(e){!function(e){if(yX&&_X){var t=gX.href.split("#")[0]+(e?"#"+e:"");mX.replaceState(null,"",t)}else gX.hash=e}(e?"?"+e:"")}var wX=_A((function e(t){gA(this,e);var n=new pX(t);this.getState=function(){return n.parse(gX.href.replace(bX,"$1"))},this.setState=function(e){return xX(e?n.stringify(e):"")}})),SX={CLASSIC:"classic",BLUE_SKY:"blue-sky",NIGHT_SKY_CLOUDS:"night-sky-clouds",CUSTOM:"custom"},MX=Ra,TX=dr,EX=of,AX=Ea,RX=function(e,t,n,r,i,a,o,s){for(var u,l,c=i,f=0,h=!!o&&AX(o,s);f<r;)f in n&&(u=h?h(n[f],f,t):n[f],a>0&&MX(u)?(l=TX(u),c=RX(e,t,u,l,c,a-1)-1):(EX(c+1),e[c]=u),c++),f++;return c},CX=RX,kX=ze,PX=dr,LX=ir,OX=Za;ni({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=kX(this),n=PX(t),r=OX(t,0);return r.length=CX(r,t,t,n,0,void 0===e?1:LX(e)),r}}),Iu("flat");var DX=yr.includes,NX=Iu;ni({target:"Array",proto:!0,forced:i((function(){return!Array(1).includes()}))},{includes:function(e){return DX(this,e,arguments.length>1?arguments[1]:void 0)}}),NX("includes");var IX=function(e){var t;return Bw(e)&&(void 0!==(t=e[jw])?!!t:"RegExp"==Hw(e))},UX=TypeError,zX=tt("match"),FX=ni,BX=function(e){if(IX(e))throw UX("The method doesn't accept regular expressions");return e},HX=D,jX=pi,GX=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[zX]=!1,"/./"[e](t)}catch(e){}}return!1},VX=x("".indexOf);function WX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WX(Object(n),!0).forEach((function(t){EE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function XX(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}FX({target:"String",proto:!0,forced:!GX("includes")},{includes:function(e){return!!~VX(jX(HX(this)),jX(BX(e)),arguments.length>1?arguments[1]:void 0)}});var YX="function"==typeof Symbol&&Symbol.observable||"@@observable",ZX=function(){return Math.random().toString(36).substring(7).split("").join(".")},KX={INIT:"@@redux/INIT"+ZX(),REPLACE:"@@redux/REPLACE"+ZX(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ZX()}};function $X(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:KX.INIT}))throw new Error(XX(12));if(void 0===n(void 0,{type:KX.PROBE_UNKNOWN_ACTION()}))throw new Error(XX(13))}))}(n)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},s=0;s<o.length;s++){var u=o[s],l=n[u],c=e[u],f=l(c,t);if(void 0===f)throw t&&t.type,new Error(XX(14));i[u]=f,r=r||f!==c}return(r=r||o.length!==Object.keys(e).length)?i:e}}function JX(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var QX=i,eY=tt("iterator"),tY=!QX((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[eY]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),nY=x,rY=2147483647,iY=/[^\0-\u007E]/,aY=/[.\u3002\uFF0E\uFF61]/g,oY="Overflow: input needs wider integers to process",sY=RangeError,uY=nY(aY.exec),lY=Math.floor,cY=String.fromCharCode,fY=nY("".charCodeAt),hY=nY([].join),dY=nY([].push),pY=nY("".replace),vY=nY("".split),mY=nY("".toLowerCase),gY=function(e){return e+22+75*(e<26)},yY=function(e,t,n){var r=0;for(e=n?lY(e/700):e>>1,e+=lY(e/t);e>455;)e=lY(e/35),r+=36;return lY(r+36*e/(e+38))},_Y=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=fY(e,n++);if(i>=55296&&i<=56319&&n<r){var a=fY(e,n++);56320==(64512&a)?dY(t,((1023&i)<<10)+(1023&a)+65536):(dY(t,i),n--)}else dY(t,i)}return t}(e);var n,r,i=e.length,a=128,o=0,s=72;for(n=0;n<e.length;n++)(r=e[n])<128&&dY(t,cY(r));var u=t.length,l=u;for(u&&dY(t,"-");l<i;){var c=rY;for(n=0;n<e.length;n++)(r=e[n])>=a&&r<c&&(c=r);var f=l+1;if(c-a>lY((rY-o)/f))throw sY(oY);for(o+=(c-a)*f,a=c,n=0;n<e.length;n++){if((r=e[n])<a&&++o>rY)throw sY(oY);if(r==a){for(var h=o,d=36;;){var p=d<=s?1:d>=s+26?26:d-s;if(h<p)break;var v=h-p,m=36-p;dY(t,cY(gY(p+v%m))),h=lY(v/m),d+=36}dY(t,cY(gY(h))),s=yY(o,f,l==u),o=0,l++}}o++,a++}return hY(t,"")},bY=ni,xY=n,wY=l,SY=x,MY=a,TY=tY,EY=Jn,AY=dd,RY=_a,CY=ul,kY=kn,PY=Bh,LY=H,OY=He,DY=Ea,NY=fi,IY=Ot,UY=V,zY=pi,FY=Bi,BY=m,HY=_h,jY=hh,GY=Bm,VY=Wv,WY=tt("iterator"),qY="URLSearchParams",XY=qY+"Iterator",YY=kY.set,ZY=kY.getterFor(qY),KY=kY.getterFor(XY),$Y=Object.getOwnPropertyDescriptor,JY=function(e){if(!MY)return xY[e];var t=$Y(xY,e);return t&&t.value},QY=JY("fetch"),eZ=JY("Request"),tZ=JY("Headers"),nZ=eZ&&eZ.prototype,rZ=tZ&&tZ.prototype,iZ=xY.RegExp,aZ=xY.TypeError,oZ=xY.decodeURIComponent,sZ=xY.encodeURIComponent,uZ=SY("".charAt),lZ=SY([].join),cZ=SY([].push),fZ=SY("".replace),hZ=SY([].shift),dZ=SY([].splice),pZ=SY("".split),vZ=SY("".slice),mZ=/\+/g,gZ=Array(4),yZ=function(e){return gZ[e-1]||(gZ[e-1]=iZ("((?:%[\\da-f]{2}){"+e+"})","gi"))},_Z=function(e){try{return oZ(e)}catch(t){return e}},bZ=function(e){var t=fZ(e,mZ," "),n=4;try{return oZ(t)}catch(e){for(;n;)t=fZ(t,yZ(n--),_Z);return t}},xZ=/[!'()~]|%20/g,wZ={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},SZ=function(e){return wZ[e]},MZ=function(e){return fZ(sZ(e),xZ,SZ)},TZ=CY((function(e,t){YY(this,{type:XY,iterator:HY(ZY(e).entries),kind:t})}),"Iterator",(function(){var e=KY(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),EZ=function(e){this.entries=[],this.url=null,void 0!==e&&(UY(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===uZ(e,0)?vZ(e,1):e:zY(e)))};EZ.prototype={type:qY,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,a,o,s,u=jY(e);if(u)for(n=(t=HY(e,u)).next;!(r=wY(n,t)).done;){if(a=(i=HY(IY(r.value))).next,(o=wY(a,i)).done||(s=wY(a,i)).done||!wY(a,i).done)throw aZ("Expected sequence with length 2");cZ(this.entries,{key:zY(o.value),value:zY(s.value)})}else for(var l in e)OY(e,l)&&cZ(this.entries,{key:l,value:zY(e[l])})},parseQuery:function(e){if(e)for(var t,n,r=pZ(e,"&"),i=0;i<r.length;)(t=r[i++]).length&&(n=pZ(t,"="),cZ(this.entries,{key:bZ(hZ(n)),value:bZ(lZ(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],cZ(n,MZ(e.key)+"="+MZ(e.value));return lZ(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var AZ=function(){PY(this,RZ),YY(this,new EZ(arguments.length>0?arguments[0]:void 0))},RZ=AZ.prototype;if(AY(RZ,{append:function(e,t){GY(arguments.length,2);var n=ZY(this);cZ(n.entries,{key:zY(e),value:zY(t)}),n.updateURL()},delete:function(e){GY(arguments.length,1);for(var t=ZY(this),n=t.entries,r=zY(e),i=0;i<n.length;)n[i].key===r?dZ(n,i,1):i++;t.updateURL()},get:function(e){GY(arguments.length,1);for(var t=ZY(this).entries,n=zY(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){GY(arguments.length,1);for(var t=ZY(this).entries,n=zY(e),r=[],i=0;i<t.length;i++)t[i].key===n&&cZ(r,t[i].value);return r},has:function(e){GY(arguments.length,1);for(var t=ZY(this).entries,n=zY(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){GY(arguments.length,1);for(var n,r=ZY(this),i=r.entries,a=!1,o=zY(e),s=zY(t),u=0;u<i.length;u++)(n=i[u]).key===o&&(a?dZ(i,u--,1):(a=!0,n.value=s));a||cZ(i,{key:o,value:s}),r.updateURL()},sort:function(){var e=ZY(this);VY(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=ZY(this).entries,r=DY(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new TZ(this,"keys")},values:function(){return new TZ(this,"values")},entries:function(){return new TZ(this,"entries")}},{enumerable:!0}),EY(RZ,WY,RZ.entries,{name:"entries"}),EY(RZ,"toString",(function(){return ZY(this).serialize()}),{enumerable:!0}),RY(AZ,qY),bY({global:!0,constructor:!0,forced:!TY},{URLSearchParams:AZ}),!TY&&LY(tZ)){var CZ=SY(rZ.has),kZ=SY(rZ.set),PZ=function(e){if(UY(e)){var t,n=e.body;if(NY(n)===qY)return t=e.headers?new tZ(e.headers):new tZ,CZ(t,"content-type")||kZ(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),FY(e,{body:BY(0,zY(n)),headers:BY(0,t)})}return e};if(LY(QY)&&bY({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return QY(e,arguments.length>1?PZ(arguments[1]):{})}}),LY(eZ)){var LZ=function(e){return PY(this,nZ),new eZ(e,arguments.length>1?PZ(arguments[1]):{})};nZ.constructor=LZ,LZ.prototype=nZ,bY({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:LZ})}}var OZ,DZ=ni,NZ=a,IZ=tY,UZ=n,zZ=Ea,FZ=x,BZ=Jn,HZ=Kw,jZ=Bh,GZ=He,VZ=_S,WZ=QM,qZ=$i,XZ=ic.codeAt,YZ=function(e){var t,n,r=[],i=vY(pY(mY(e),aY,"."),".");for(t=0;t<i.length;t++)n=i[t],dY(r,uY(iY,n)?"xn--"+_Y(n):n);return hY(r,".")},ZZ=pi,KZ=_a,$Z=Bm,JZ={URLSearchParams:AZ,getState:ZY},QZ=kn,eK=QZ.set,tK=QZ.getterFor("URL"),nK=JZ.URLSearchParams,rK=JZ.getState,iK=UZ.URL,aK=UZ.TypeError,oK=UZ.parseInt,sK=Math.floor,uK=Math.pow,lK=FZ("".charAt),cK=FZ(/./.exec),fK=FZ([].join),hK=FZ(1..toString),dK=FZ([].pop),pK=FZ([].push),vK=FZ("".replace),mK=FZ([].shift),gK=FZ("".split),yK=FZ("".slice),_K=FZ("".toLowerCase),bK=FZ([].unshift),xK="Invalid scheme",wK="Invalid host",SK="Invalid port",MK=/[a-z]/i,TK=/[\d+-.a-z]/i,EK=/\d/,AK=/^0x/i,RK=/^[0-7]+$/,CK=/^\d+$/,kK=/^[\da-f]+$/i,PK=/[\0\t\n\r #%/:<>?@[\\\]^|]/,LK=/[\0\t\n\r #/:<>?@[\\\]^|]/,OK=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,DK=/[\t\n\r]/g,NK=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)bK(t,e%256),e=sK(e/256);return fK(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,a=0;a<8;a++)0!==e[a]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=a),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=hK(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},IK={},UK=VZ({},IK,{" ":1,'"':1,"<":1,">":1,"`":1}),zK=VZ({},UK,{"#":1,"?":1,"{":1,"}":1}),FK=VZ({},zK,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),BK=function(e,t){var n=XZ(e,0);return n>32&&n<127&&!GZ(t,e)?e:encodeURIComponent(e)},HK={ftp:21,file:null,http:80,https:443,ws:80,wss:443},jK=function(e,t){var n;return 2==e.length&&cK(MK,lK(e,0))&&(":"==(n=lK(e,1))||!t&&"|"==n)},GK=function(e){var t;return e.length>1&&jK(yK(e,0,2))&&(2==e.length||"/"===(t=lK(e,2))||"\\"===t||"?"===t||"#"===t)},VK=function(e){return"."===e||"%2e"===_K(e)},WK={},qK={},XK={},YK={},ZK={},KK={},$K={},JK={},QK={},e$={},t$={},n$={},r$={},i$={},a$={},o$={},s$={},u$={},l$={},c$={},f$={},h$=function(e,t,n){var r,i,a,o=ZZ(e);if(t){if(i=this.parse(o))throw aK(i);this.searchParams=null}else{if(void 0!==n&&(r=new h$(n,!0)),i=this.parse(o,null,r))throw aK(i);(a=rK(new nK)).bindURL(this),this.searchParams=a}};h$.prototype={type:"URL",parse:function(e,t,n){var r,i,a,o,s,u=this,l=t||WK,c=0,f="",h=!1,d=!1,p=!1;for(e=ZZ(e),t||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,e=vK(e,OK,"")),e=vK(e,DK,""),r=WZ(e);c<=r.length;){switch(i=r[c],l){case WK:if(!i||!cK(MK,i)){if(t)return xK;l=XK;continue}f+=_K(i),l=qK;break;case qK:if(i&&(cK(TK,i)||"+"==i||"-"==i||"."==i))f+=_K(i);else{if(":"!=i){if(t)return xK;f="",l=XK,c=0;continue}if(t&&(u.isSpecial()!=GZ(HK,f)||"file"==f&&(u.includesCredentials()||null!==u.port)||"file"==u.scheme&&!u.host))return;if(u.scheme=f,t)return void(u.isSpecial()&&HK[u.scheme]==u.port&&(u.port=null));f="","file"==u.scheme?l=i$:u.isSpecial()&&n&&n.scheme==u.scheme?l=YK:u.isSpecial()?l=JK:"/"==r[c+1]?(l=ZK,c++):(u.cannotBeABaseURL=!0,pK(u.path,""),l=l$)}break;case XK:if(!n||n.cannotBeABaseURL&&"#"!=i)return xK;if(n.cannotBeABaseURL&&"#"==i){u.scheme=n.scheme,u.path=qZ(n.path),u.query=n.query,u.fragment="",u.cannotBeABaseURL=!0,l=f$;break}l="file"==n.scheme?i$:KK;continue;case YK:if("/"!=i||"/"!=r[c+1]){l=KK;continue}l=QK,c++;break;case ZK:if("/"==i){l=e$;break}l=u$;continue;case KK:if(u.scheme=n.scheme,i==OZ)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=qZ(n.path),u.query=n.query;else if("/"==i||"\\"==i&&u.isSpecial())l=$K;else if("?"==i)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=qZ(n.path),u.query="",l=c$;else{if("#"!=i){u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=qZ(n.path),u.path.length--,l=u$;continue}u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=qZ(n.path),u.query=n.query,u.fragment="",l=f$}break;case $K:if(!u.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,l=u$;continue}l=e$}else l=QK;break;case JK:if(l=QK,"/"!=i||"/"!=lK(f,c+1))continue;c++;break;case QK:if("/"!=i&&"\\"!=i){l=e$;continue}break;case e$:if("@"==i){h&&(f="%40"+f),h=!0,a=WZ(f);for(var v=0;v<a.length;v++){var m=a[v];if(":"!=m||p){var g=BK(m,FK);p?u.password+=g:u.username+=g}else p=!0}f=""}else if(i==OZ||"/"==i||"?"==i||"#"==i||"\\"==i&&u.isSpecial()){if(h&&""==f)return"Invalid authority";c-=WZ(f).length+1,f="",l=t$}else f+=i;break;case t$:case n$:if(t&&"file"==u.scheme){l=o$;continue}if(":"!=i||d){if(i==OZ||"/"==i||"?"==i||"#"==i||"\\"==i&&u.isSpecial()){if(u.isSpecial()&&""==f)return wK;if(t&&""==f&&(u.includesCredentials()||null!==u.port))return;if(o=u.parseHost(f))return o;if(f="",l=s$,t)return;continue}"["==i?d=!0:"]"==i&&(d=!1),f+=i}else{if(""==f)return wK;if(o=u.parseHost(f))return o;if(f="",l=r$,t==n$)return}break;case r$:if(!cK(EK,i)){if(i==OZ||"/"==i||"?"==i||"#"==i||"\\"==i&&u.isSpecial()||t){if(""!=f){var y=oK(f,10);if(y>65535)return SK;u.port=u.isSpecial()&&y===HK[u.scheme]?null:y,f=""}if(t)return;l=s$;continue}return SK}f+=i;break;case i$:if(u.scheme="file","/"==i||"\\"==i)l=a$;else{if(!n||"file"!=n.scheme){l=u$;continue}if(i==OZ)u.host=n.host,u.path=qZ(n.path),u.query=n.query;else if("?"==i)u.host=n.host,u.path=qZ(n.path),u.query="",l=c$;else{if("#"!=i){GK(fK(qZ(r,c),""))||(u.host=n.host,u.path=qZ(n.path),u.shortenPath()),l=u$;continue}u.host=n.host,u.path=qZ(n.path),u.query=n.query,u.fragment="",l=f$}}break;case a$:if("/"==i||"\\"==i){l=o$;break}n&&"file"==n.scheme&&!GK(fK(qZ(r,c),""))&&(jK(n.path[0],!0)?pK(u.path,n.path[0]):u.host=n.host),l=u$;continue;case o$:if(i==OZ||"/"==i||"\\"==i||"?"==i||"#"==i){if(!t&&jK(f))l=u$;else if(""==f){if(u.host="",t)return;l=s$}else{if(o=u.parseHost(f))return o;if("localhost"==u.host&&(u.host=""),t)return;f="",l=s$}continue}f+=i;break;case s$:if(u.isSpecial()){if(l=u$,"/"!=i&&"\\"!=i)continue}else if(t||"?"!=i)if(t||"#"!=i){if(i!=OZ&&(l=u$,"/"!=i))continue}else u.fragment="",l=f$;else u.query="",l=c$;break;case u$:if(i==OZ||"/"==i||"\\"==i&&u.isSpecial()||!t&&("?"==i||"#"==i)){if(".."===(s=_K(s=f))||"%2e."===s||".%2e"===s||"%2e%2e"===s?(u.shortenPath(),"/"==i||"\\"==i&&u.isSpecial()||pK(u.path,"")):VK(f)?"/"==i||"\\"==i&&u.isSpecial()||pK(u.path,""):("file"==u.scheme&&!u.path.length&&jK(f)&&(u.host&&(u.host=""),f=lK(f,0)+":"),pK(u.path,f)),f="","file"==u.scheme&&(i==OZ||"?"==i||"#"==i))for(;u.path.length>1&&""===u.path[0];)mK(u.path);"?"==i?(u.query="",l=c$):"#"==i&&(u.fragment="",l=f$)}else f+=BK(i,zK);break;case l$:"?"==i?(u.query="",l=c$):"#"==i?(u.fragment="",l=f$):i!=OZ&&(u.path[0]+=BK(i,IK));break;case c$:t||"#"!=i?i!=OZ&&("'"==i&&u.isSpecial()?u.query+="%27":u.query+="#"==i?"%23":BK(i,IK)):(u.fragment="",l=f$);break;case f$:i!=OZ&&(u.fragment+=BK(i,UK))}c++}},parseHost:function(e){var t,n,r;if("["==lK(e,0)){if("]"!=lK(e,e.length-1))return wK;if(t=function(e){var t,n,r,i,a,o,s,u=[0,0,0,0,0,0,0,0],l=0,c=null,f=0,h=function(){return lK(e,f)};if(":"==h()){if(":"!=lK(e,1))return;f+=2,c=++l}for(;h();){if(8==l)return;if(":"!=h()){for(t=n=0;n<4&&cK(kK,h());)t=16*t+oK(h(),16),f++,n++;if("."==h()){if(0==n)return;if(f-=n,l>6)return;for(r=0;h();){if(i=null,r>0){if(!("."==h()&&r<4))return;f++}if(!cK(EK,h()))return;for(;cK(EK,h());){if(a=oK(h(),10),null===i)i=a;else{if(0==i)return;i=10*i+a}if(i>255)return;f++}u[l]=256*u[l]+i,2!=++r&&4!=r||l++}if(4!=r)return;break}if(":"==h()){if(f++,!h())return}else if(h())return;u[l++]=t}else{if(null!==c)return;f++,c=++l}}if(null!==c)for(o=l-c,l=7;0!=l&&o>0;)s=u[l],u[l--]=u[c+o-1],u[c+--o]=s;else if(8!=l)return;return u}(yK(e,1,-1)),!t)return wK;this.host=t}else if(this.isSpecial()){if(e=YZ(e),cK(PK,e))return wK;if(t=function(e){var t,n,r,i,a,o,s,u=gK(e,".");if(u.length&&""==u[u.length-1]&&u.length--,(t=u.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=u[r]))return e;if(a=10,i.length>1&&"0"==lK(i,0)&&(a=cK(AK,i)?16:8,i=yK(i,8==a?1:2)),""===i)o=0;else{if(!cK(10==a?CK:8==a?RK:kK,i))return e;o=oK(i,a)}pK(n,o)}for(r=0;r<t;r++)if(o=n[r],r==t-1){if(o>=uK(256,5-t))return null}else if(o>255)return null;for(s=dK(n),r=0;r<n.length;r++)s+=n[r]*uK(256,3-r);return s}(e),null===t)return wK;this.host=t}else{if(cK(LK,e))return wK;for(t="",n=WZ(e),r=0;r<n.length;r++)t+=BK(n[r],IK);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return GZ(HK,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&jK(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,a=e.port,o=e.path,s=e.query,u=e.fragment,l=t+":";return null!==i?(l+="//",e.includesCredentials()&&(l+=n+(r?":"+r:"")+"@"),l+=NK(i),null!==a&&(l+=":"+a)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?o[0]:o.length?"/"+fK(o,"/"):"",null!==s&&(l+="?"+s),null!==u&&(l+="#"+u),l},setHref:function(e){var t=this.parse(e);if(t)throw aK(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new d$(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+NK(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(ZZ(e)+":",WK)},getUsername:function(){return this.username},setUsername:function(e){var t=WZ(ZZ(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=BK(t[n],FK)}},getPassword:function(){return this.password},setPassword:function(e){var t=WZ(ZZ(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=BK(t[n],FK)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?NK(e):NK(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,t$)},getHostname:function(){var e=this.host;return null===e?"":NK(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,n$)},getPort:function(){var e=this.port;return null===e?"":ZZ(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=ZZ(e))?this.port=null:this.parse(e,r$))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+fK(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,s$))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=ZZ(e))?this.query=null:("?"==lK(e,0)&&(e=yK(e,1)),this.query="",this.parse(e,c$)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=ZZ(e))?("#"==lK(e,0)&&(e=yK(e,1)),this.fragment="",this.parse(e,f$)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var d$=function(e){var t=jZ(this,p$),n=$Z(arguments.length,1)>1?arguments[1]:void 0,r=eK(t,new h$(e,!1,n));NZ||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},p$=d$.prototype,v$=function(e,t){return{get:function(){return tK(this)[e]()},set:t&&function(e){return tK(this)[t](e)},configurable:!0,enumerable:!0}};if(NZ&&(HZ(p$,"href",v$("serialize","setHref")),HZ(p$,"origin",v$("getOrigin")),HZ(p$,"protocol",v$("getProtocol","setProtocol")),HZ(p$,"username",v$("getUsername","setUsername")),HZ(p$,"password",v$("getPassword","setPassword")),HZ(p$,"host",v$("getHost","setHost")),HZ(p$,"hostname",v$("getHostname","setHostname")),HZ(p$,"port",v$("getPort","setPort")),HZ(p$,"pathname",v$("getPathname","setPathname")),HZ(p$,"search",v$("getSearch","setSearch")),HZ(p$,"searchParams",v$("getSearchParams")),HZ(p$,"hash",v$("getHash","setHash"))),BZ(p$,"toJSON",(function(){return tK(this).serialize()}),{enumerable:!0}),BZ(p$,"toString",(function(){return tK(this).serialize()}),{enumerable:!0}),iK){var m$=iK.createObjectURL,g$=iK.revokeObjectURL;m$&&BZ(d$,"createObjectURL",zZ(m$,iK)),g$&&BZ(d$,"revokeObjectURL",zZ(g$,iK))}KZ(d$,"URL"),DZ({global:!0,constructor:!0,forced:!IZ,sham:!NZ},{URL:d$});var y$={},_$=function(e){return y$[e]},b$=function(e){var t=URL.createObjectURL(e);return y$[t]=e,t},x$=function(e){y$[e]&&(URL.revokeObjectURL(e),delete y$[e])};function w$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w$(Object(n),!0).forEach((function(t){EE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M$="flagwaver/flagGroup/SET_FLAG_GROUP_OPTIONS",T$=function(e){return{type:M$,payload:e}},E$={imageSrc:"",backSideImageSrc:"",isTwoSided:!1,width:"auto",height:"auto",hoisting:dA.DEXTER,orientation:pA.TOP,resolution:256,mass:.11,restDistance:.12,flagpoleType:vA.VERTICAL,verticalHoisting:mA.TOP_RIGHT};function A$(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E$,t=arguments.length>1?arguments[1]:void 0;if(t.type===M$){var n=S$(S$({},e),t.payload);return n.imageSrc||(n.isTwoSided=!1),n.isTwoSided||(n.backSideImageSrc=""),n}return e}function R$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R$(Object(n),!0).forEach((function(t){EE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k$="flagwaver/scenery/SET_SCENERY_OPTIONS",P$=function(e){return{type:k$,payload:e}},L$={background:SX.CLASSIC,backgroundColor:"#000000",backgroundImageSrc:""};function O$(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L$,t=arguments.length>1?arguments[1]:void 0;return t.type===k$?C$(C$({},e),t.payload):e}var D$="flagwaver/undoable/UNDO",N$="flagwaver/undoable/REDO",I$="flagwaver/undoable/CLEAR_HISTORY";function U$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U$(Object(n),!0).forEach((function(t){EE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F$="flagwaver/wind/SET_WIND_OPTIONS",B$=function(e){return{type:F$,payload:e}},H$={enabled:!0,controlled:!1,direction:270,speed:10};var j$="flagwaver/editor/RESET_APP",G$="flagwaver/editor/UNDO",V$="flagwaver/editor/REDO",W$="flagwaver/editor/CLEAR_HISTORY",q$=function(){return{type:W$}};var X$=function(e){var t=function(e){return[e.flagGroup.imageSrc,e.flagGroup.backSideImageSrc,e.scenery.backgroundImageSrc]};return function(n,r){var i=e(n,r);return n&&r.type!==G$&&r.type!==V$&&function(e,n){var r=[].concat(_W(e.past),[e.present],_W(e.future)),i=[].concat(_W(n.past),[n.present],_W(n.future)),a=r.filter((function(e){return!i.some((function(t){return t===e}))})),o=i.map(t).flat();a.map(t).flat().filter((function(e){return!o.includes(e)})).map((function(e){x$(e)}))}(n,i),i}}(function(e,t){var n=t.limit,r=void 0===n?50:n,i=t.undoType,a=void 0===i?D$:i,o=t.redoType,s=void 0===o?N$:o,u=t.clearHistoryType,l=void 0===u?I$:u,c={past:[],present:e(void 0,{}),future:[]};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,n=arguments.length>1?arguments[1]:void 0,i=t.past,o=t.present,u=t.future;switch(n.type){case a:return{past:i.slice(0,i.length-1),present:i[i.length-1],future:[o].concat(_W(u))};case s:return{past:[].concat(_W(i),[o]),present:u[0],future:u.slice(1)};case l:return{past:[],present:o,future:[]};default:var f=e(o,n);return o===f?t:{past:[].concat(_W(i),[o]).slice(-r),present:f,future:[]}}}}($X({flagGroup:A$,scenery:O$,wind:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H$,t=arguments.length>1?arguments[1]:void 0;return t.type===F$?z$(z$({},e),t.payload):e}}),{limit:20,undoType:G$,redoType:V$,clearHistoryType:W$}));var Y$=/^#[0-9a-f]{3}([0-9a-f]{3})?$/i,Z$=function(e){return Y$.test(e)};function K$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K$(Object(n),!0).forEach((function(t){EE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J$=A$(void 0,{}),Q$=O$(void 0,{});function eJ(e,t){var n=t.toLowerCase();return Object.values(e).find((function(e){return e.toLowerCase()===n}))||null}var tJ=new wX({src:{defaultValue:J$.imageSrc,parse:function(e){return decodeURIComponent(e)},stringify:function(e){return _$(e)?void 0:encodeURIComponent(e)}},backsidesrc:{defaultValue:J$.backSideImageSrc,parse:function(e){return decodeURIComponent(e)},stringify:function(e){return _$(e)?void 0:encodeURIComponent(e)}},hoisting:{defaultValue:J$.hoisting,parse:function(e){return e.match(/^dex(ter)?$/gi)?dA.DEXTER:e.match(/^sin(ister)?$/gi)?dA.SINISTER:null},stringify:function(e){return"sin"}},orientation:{defaultValue:J$.orientation,parse:function(e){return eJ(pA,e)}},flagpoletype:{defaultValue:J$.flagpoleType,parse:function(e){return eJ(vA,e)}},vhoisting:{defaultValue:J$.verticalHoisting,parse:function(e){return eJ(mA,e)}},background:{defaultValue:Q$.background,parse:function(e){return eJ(SX,e)}},backgroundcolor:{defaultValue:Q$.backgroundColor,parse:function(e){return Z$("#".concat(e))?"#".concat(e):null},stringify:function(e){return e.slice(1)}},backgroundimage:{defaultValue:Q$.backgroundImageSrc,parse:function(e){return decodeURIComponent(e)},stringify:function(e){return _$(e)?void 0:encodeURIComponent(e)}}});function nJ(e,t){return Object.keys(e).reduce((function(n,r){var i=t[r];return n[r]=null!=i?i:e[r],n}),{})}function rJ(e){var t=function(e){return{flagGroup:nJ(J$,{imageSrc:e.src,backSideImageSrc:e.backsidesrc,isTwoSided:!!e.backsidesrc,hoisting:e.hoisting,orientation:e.orientation,flagpoleType:e.flagpoletype,verticalHoisting:e.vhoisting}),scenery:{background:e.background,backgroundColor:e.backgroundcolor,backgroundImageSrc:e.backgroundimage}}}(function(e){var t=e;if(!t.src){var n=window.location.hash.slice(1);/^[^!\?].*/.test(n)&&(t=$$($$({},t),{},{src:window.unescape(n)}))}return t.topedge&&t.orientation===J$.orientation&&(t=$$($$({},t),{},{orientation:eJ(pA,t.topedge)})),t}(tJ.getState()));e.dispatch(T$(t.flagGroup)),e.dispatch(P$(t.scenery)),e.dispatch(q$())}var iJ=Cm,aJ=a,oJ=i,sJ=Ot,uJ=Bi,lJ=Jx,cJ=Error.prototype.toString,fJ=oJ((function(){if(aJ){var e=uJ(Object.defineProperty({},"name",{get:function(){return this===e}}));if("true"!==cJ.call(e))return!0}return"2: 1"!==cJ.call({message:1,name:2})||"Error"!==cJ.call({})}))?function(){var e=sJ(this),t=lJ(e.name,"Error"),n=lJ(e.message);return t?n?t+": "+n:t:n}:cJ,hJ={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}},dJ=ni,pJ=function(e){try{if(iJ)return Function('return require("'+e+'")')()}catch(e){}},vJ=Y,mJ=i,gJ=Bi,yJ=m,_J=Rt.f,bJ=Jn,xJ=Kw,wJ=He,SJ=Bh,MJ=Ot,TJ=fJ,EJ=Jx,AJ=hJ,RJ=ow,CJ=kn,kJ=a,PJ="DOMException",LJ="DATA_CLONE_ERR",OJ=vJ("Error"),DJ=vJ(PJ)||function(){try{(new(vJ("MessageChannel")||pJ("worker_threads").MessageChannel)).port1.postMessage(new WeakMap)}catch(e){if(e.name==LJ&&25==e.code)return e.constructor}}(),NJ=DJ&&DJ.prototype,IJ=OJ.prototype,UJ=CJ.set,zJ=CJ.getterFor(PJ),FJ="stack"in OJ(PJ),BJ=function(e){return wJ(AJ,e)&&AJ[e].m?AJ[e].c:0},HJ=function(){SJ(this,jJ);var e=arguments.length,t=EJ(e<1?void 0:arguments[0]),n=EJ(e<2?void 0:arguments[1],"Error"),r=BJ(n);if(UJ(this,{type:PJ,name:n,message:t,code:r}),kJ||(this.name=n,this.message=t,this.code=r),FJ){var i=OJ(t);i.name=PJ,_J(this,"stack",yJ(1,RJ(i.stack,1)))}},jJ=HJ.prototype=gJ(IJ),GJ=function(e){return{enumerable:!0,configurable:!0,get:e}},VJ=function(e){return GJ((function(){return zJ(this)[e]}))};kJ&&(xJ(jJ,"code",VJ("code")),xJ(jJ,"message",VJ("message")),xJ(jJ,"name",VJ("name"))),_J(jJ,"constructor",yJ(1,HJ));var WJ=mJ((function(){return!(new DJ instanceof OJ)})),qJ=WJ||mJ((function(){return IJ.toString!==TJ||"2: 1"!==String(new DJ(1,2))})),XJ=WJ||mJ((function(){return 25!==new DJ(1,"DataCloneError").code}));WJ||25!==DJ[LJ]||NJ[LJ];dJ({global:!0,constructor:!0,forced:WJ},{DOMException:WJ?HJ:DJ});var YJ=vJ(PJ),ZJ=YJ.prototype;for(var KJ in qJ&&DJ===YJ&&bJ(ZJ,"toString",TJ),XJ&&kJ&&DJ===YJ&&xJ(ZJ,"code",GJ((function(){return BJ(MJ(this).name)}))),AJ)if(wJ(AJ,KJ)){var $J=AJ[KJ],JJ=$J.s,QJ=yJ(6,$J.c);wJ(YJ,JJ)||_J(YJ,JJ,QJ),wJ(ZJ,JJ)||_J(ZJ,JJ,QJ)}var eQ=ni,tQ=n,nQ=Y,rQ=m,iQ=Rt.f,aQ=He,oQ=Bh,sQ=Zh,uQ=Jx,lQ=hJ,cQ=ow,fQ=a,hQ="DOMException",dQ=nQ("Error"),pQ=nQ(hQ),vQ=function(){oQ(this,mQ);var e=arguments.length,t=uQ(e<1?void 0:arguments[0]),n=uQ(e<2?void 0:arguments[1],"Error"),r=new pQ(t,n),i=dQ(t);return i.name=hQ,iQ(r,"stack",rQ(1,cQ(i.stack,1))),sQ(r,this,vQ),r},mQ=vQ.prototype=pQ.prototype,gQ="stack"in dQ(hQ),yQ="stack"in new pQ(1,2),_Q=pQ&&fQ&&Object.getOwnPropertyDescriptor(tQ,hQ),bQ=!(!_Q||_Q.writable&&_Q.configurable),xQ=gQ&&!bQ&&!yQ;eQ({global:!0,constructor:!0,forced:xQ},{DOMException:xQ?vQ:pQ});var wQ=nQ(hQ),SQ=wQ.prototype;if(SQ.constructor!==wQ)for(var MQ in iQ(SQ,"constructor",rQ(1,wQ)),lQ)if(aQ(lQ,MQ)){var TQ=lQ[MQ],EQ=TQ.s;aQ(wQ,EQ)||iQ(wQ,EQ,rQ(6,TQ.c))}var AQ="DOMException";_a(Y(AQ),AQ);var RQ=new Ez(0,5,0);function CQ(){var e,t,n,r,i=new Dq({scene:(r=new hW,r.fog=new cW(13426942,1,1e3),r),camera:(n=new qB(30,window.innerWidth/window.innerHeight,.1,100),n.position.set(0,5,12),n.lookAt(RQ),n),renderer:(e=window.devicePixelRatio?Math.min(window.devicePixelRatio,2):1,t=new lW({antialias:!0,alpha:!0,powerPreference:"high-performance"}),t.setSize(window.innerWidth,window.innerHeight),t.setPixelRatio(e),t.outputEncoding=kC,t.physicallyCorrectLights=!0,t.shadowMap.enabled=!0,t.shadowMap.type=AA,t)});i.add(new Xq);var a,o,s,u=i.module("orbitControlsModule").orbitControls;return u.maxDistance=80,u.minDistance=4,u.target.copy(RQ),u.target0.copy(RQ),u.update(),i.add(new zq),i.add(new Iq),i.add((a=function(){return["flagGroupModule","windModule"].map((function(e){return i.getModulesByType(e).map((function(e){return e.subject}))}))},o=function(e){var t=e[0],n=e[1],r=t.flag;!function(e,t){for(var n=e.particles,r=Tq(Eq,t),i=0,a=n.length;i<a;i++)n[i].acceleration.add(r)}(r.cloth,r.object),function(e,t,n){var r,i,a,o=e.particles,s=e.geometry.getIndex();if(t)for(var u=e.restDistance*e.restDistance/2,l=Tq(t.pressure,n).multiplyScalar(fA*u/3),c=0,f=s.count;c<f;c+=3){var h=s.getX(c),d=s.getX(c+1),p=s.getX(c+2),v=o[h],m=o[d],g=o[p],y=(r=v.position,i=m.position,a=g.position,Aq.subVectors(a,i),Rq.subVectors(r,i),Aq.cross(Rq),Aq.normalize(),Aq);y.multiplyScalar(y.dot(l)),v.applyForce(y),m.applyForce(y),g.applyForce(y)}}(r.cloth,n,r.object)},s=function(){},new Zq((function(e){s(e)}),(function(){s=function(e,t){var n,r,i,a=(r=(n=t).length-1,i=[],function e(t,a){for(var o=n[t],s=0,u=o.length;s<u;s++){var l=a.concat([o[s]]);t===r?i.push(l):e(t+1,l)}}(0,[]),i);return function(t){for(var n=0,r=a.length;n<r;n++)e(a[n])}}(o,a())})))),i.add(new Zq(null,(function(){var e=i.module("animationControlModule"),t=i.getModulesByType("flagGroupModule").map((function(e){return e.subject.flag})).filter((function(e){return e.video||e.video2}));i.clock.running?t.map((function(t){t.play().catch((function(t){t instanceof DOMException&&"NotAllowedError"===t.name&&(e.muted=!0)}))})):(t.map((function(e){e.pause()})),setTimeout((function(){i.render()}),100)),t.map((function(t){t.video&&(t.video.muted=e.muted),t.video2&&(t.video2.muted=e.muted)}))}))),i}function kQ(){document.documentElement.className+=" loaded"}var PQ=0;function LQ(e,t,n,r,i,a){var o,s,u={};for(s in t)"ref"==s?o=t[s]:u[s]=t[s];var l={type:e,props:u,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--PQ,__source:i,__self:a};if("function"==typeof e&&(o=e.defaultProps))for(s in o)void 0===u[s]&&(u[s]=o[s]);return N_.vnode&&N_.vnode(l),l}function OQ(){return LQ("div",{className:"content-section",children:[LQ("p",{children:"A web app for simulating a waving flag."}),LQ("hr",{}),LQ("p",{children:["To learn more about FlagWaver,",LQ("br",{})," ",LQ("a",{href:"https://github.com/krikienoid/flagwaver",target:"_blank",rel:"noopener",children:"view the project on GitHub"}),"."]})]})}var DQ=bb(null);function NQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function IQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NQ(Object(n),!0).forEach((function(t){EE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function UQ(e){return function(t){return LQ(DQ.Consumer,{children:function(n){return n&&LQ(e,IQ(IQ({},t),{},{app:n}))}})}}function zQ(e){var t=this,n=e.app,r=Qb(null);return $b((function(){return n.canvas.setAttribute("role","img"),n.canvas.setAttribute("aria-label","Animation view"),r.current.appendChild(n.canvas),n.module("resizeModule").resize(),function(){r.current.removeChild(t.props.app.canvas)}}),[]),LQ("div",{ref:r,className:"app-canvas"})}zQ.propTypes={app:Yx.object.isRequired};var FQ=UQ(zQ);function BQ(e,t){if(null==e)return{};var n,r,i=IS(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var HQ=["options"],jQ=["options"];function GQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GQ(Object(n),!0).forEach((function(t){EE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var WQ="".concat(".","/assets/img/flag-default.png"),qQ=function(e,t){return t.reduce((function(t,n){return t[n]=e[n],t}),{})},XQ=function(e){var t=_$(e);return t&&t.type.match(/video\/.*/)||e.match(/\.(3gp|avi|flv|mov|mp4|mpg|ogg|webm|wmv)$/)},YQ=function(e){return new Promise((function(t,n){fX(e,(function(e){t(e)}),(function(e){n("Image could not be loaded.")}))}))},ZQ=function(e){return new Promise((function(t,n){!function(e,t,n){var r=document.createElement("video");r.addEventListener("loadeddata",(function(){t&&t(r)})),r.addEventListener("error",(function(t){console.error("FlagWaver.loadVideo: Failed to load video from ".concat(e,".")),n&&n(t)})),r.crossOrigin="anonymous",r.loop=!0,r.preload="auto",r.src=e}(e,(function(e){t(e)}),(function(e){n("Video could not be loaded.")}))}))},KQ=function(e,t){var n=e.options,r=BQ(e,HQ),i=t.options,a=BQ(t,jQ),o=Object.keys(n).filter((function(e){return"isTwoSided"!==e})).reduce((function(e,t){return e&&n[t]===i[t]}),!0),s=Object.keys(r).reduce((function(e,t){return e&&r[t]===a[t]}),!0);return o&&s};function $Q(e){var t=e.app,n=e.options,r=e.addToast,i=Qb(),a=function(e){t.remove(i.current);var r=qQ(n,["flagpoleType","verticalHoisting"]);if(i.current=new Bq({flagpole:eX(r,e),flag:e}),r.flagpoleType===vA.HORIZONTAL||r.flagpoleType===vA.OUTRIGGER){var a=i.current.subject,o=a.flagpole,s=o.constructor.defaults.poleLength;a.object.position.set(0,s,0).sub(o.top)}t.add(i.current),t.render(),t.needsUpdate=!0},o=function(){var e=n.imageSrc,t=n.backSideImageSrc,i=e||WQ,o=t,s=qQ(n,["width","height","hoisting","orientation","resolution"]),u=qQ(n,["mass","restDistance"]);new Promise((function(e,t){XQ(i)||XQ(o)?Promise.all([XQ(i)?ZQ(i):YQ(i),XQ(o)?ZQ(o):o?YQ(o):null]).then((function(t){var n=rT(t,2),r=n[0],i=n[1];e(new cq(VQ(VQ({},u),lX(VQ(VQ({},s),{},{image:r,backSideImage:i})))))})).catch(t):Promise.all([YQ(i),o?YQ(o):null]).then((function(t){var n=rT(t,2),r=n[0],i=n[1];e(new eq(VQ(VQ({},u),lX(VQ(VQ({},s),{},{image:r,backSideImage:i})))))})).catch(t)})).then((function(e){a(e)})).catch((function(e){a(new eq(u)),r({status:"error",message:e})}))};return $b((function(){return i.current=new Bq,t.add(i.current),t.needsUpdate=!0,o(),function(){t.remove(i.current)}}),[]),$b((function(){o()}),[n]),null}$Q.propTypes={app:Yx.object.isRequired,options:Yx.object.isRequired,addToast:Yx.func.isRequired};var JQ=UQ(px($Q,KQ));function QQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function e0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QQ(Object(n),!0).forEach((function(t){EE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var t0="flagwaver/toasts/ADD_TOAST",n0="flagwaver/toasts/REMOVE_TOAST",r0=0,i0={status:"default",message:""},a0=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:t0,payload:e0(e0(e0({},i0),e),{},{id:r0++})}},o0=function(e){return{type:n0,payload:e}};var s0=FM((function(e){return{options:e.editor.present.flagGroup}}),{addToast:a0})(JQ);function u0(e){e.castShadow=!0,e.shadow.mapSize.width=2048,e.shadow.mapSize.height=2048,e.shadow.camera.top=10,e.shadow.camera.left=-10,e.shadow.camera.bottom=-10,e.shadow.camera.right=10,e.shadow.camera.far=1e3}function l0(e){var t=e.app,n=e.options,r=t.scene,i=Qb([]),a=function(){switch(i.current.map((function(e){r.remove(e)})),n.background){case SX.BLUE_SKY:i.current=function(){var e=new zW(16777215,.6),t=new IW(14674943,6.5);t.position.set(20,70,40),u0(t);var n=new IW(11329439,.35);return n.position.set(0,-1,0),[e,t,n]}();break;case SX.NIGHT_SKY_CLOUDS:i.current=function(){var e=new zW(16777215,.004),t=new IW(11056354,4.5);t.position.set(-55,50,-80),u0(t);var n=new IW(6846378,.3);return n.position.set(0,1,0),[e,t,n]}();break;case SX.CLASSIC:default:i.current=(e=new zW(16777215,.4),(a=new IW(16711674,4.5)).position.set(20,70,40),u0(a),[e,a])}var e,a;i.current.map((function(e){r.add(e)})),t.render()};return $b((function(){return i.current=[],a(),function(){i.current.map((function(e){r.remove(e)}))}}),[]),$b((function(){a()}),[n]),null}l0.propTypes={app:Yx.object.isRequired,options:Yx.object.isRequired};var c0=UQ(l0),f0=FM((function(e){return{options:e.editor.present.scenery}}))(c0),h0=new Ez(0,-1,0);function d0(e){return new Ez(0,0,1).applyAxisAngle(h0,e*Math.PI/180)}function p0(e){var t=e.app,n=e.options,r=Qb(),i=function(){t.remove(r.current),r.current=new $q({speed:n.enabled?n.controlled?n.speed:hq.defaults.speed:0,direction:n.controlled?d0(n.direction):d0(0),directionFn:n.controlled?fq.noEffect:fq.rotatingDirection}),t.add(r.current),t.needsUpdate=!0};return $b((function(){return r.current=new $q,t.add(r.current),t.needsUpdate=!0,i(),function(){t.remove(r.current)}}),[]),$b((function(){i()}),[n]),null}p0.propTypes={app:Yx.object.isRequired,options:Yx.object.isRequired};var v0=UQ(p0),m0=FM((function(e){return{options:e.editor.present.wind}}))(v0);function g0(){return LQ(Z_,{children:[LQ(s0,{}),LQ(f0,{}),LQ(m0,{})]})}var y0=ni,_0=x,b0=ir,x0=BT,w0=Ak,S0=i,M0=RangeError,T0=String,E0=Math.floor,A0=_0(w0),R0=_0("".slice),C0=_0(1..toFixed),k0=function(e,t,n){return 0===t?n:t%2==1?k0(e,t-1,n*e):k0(e*e,t/2,n)},P0=function(e,t,n){for(var r=-1,i=n;++r<6;)i+=t*e[r],e[r]=i%1e7,i=E0(i/1e7)},L0=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=E0(r/t),r=r%t*1e7},O0=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=T0(e[t]);n=""===n?r:n+A0("0",7-r.length)+r}return n};function D0(e){var t=e.component,n=e.className;return LQ(t,{className:"icon svg-icon"+(n?" "+n:""),viewBox:"0 0 24 24",attr:{"aria-hidden":!0,focusable:!1}})}y0({target:"Number",proto:!0,forced:S0((function(){return"0.000"!==C0(8e-5,3)||"1"!==C0(.9,0)||"1.25"!==C0(1.255,2)||"1000000000000000128"!==C0(0xde0b6b3a7640080,0)}))||!S0((function(){C0({})}))},{toFixed:function(e){var t,n,r,i,a=x0(this),o=b0(e),s=[0,0,0,0,0,0],u="",l="0";if(o<0||o>20)throw M0("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return T0(a);if(a<0&&(u="-",a=-a),a>1e-21)if(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(a*k0(2,69,1))-69,n=t<0?a*k0(2,-t,1):a/k0(2,t,1),n*=4503599627370496,(t=52-t)>0){for(P0(s,0,n),r=o;r>=7;)P0(s,1e7,0),r-=7;for(P0(s,k0(10,r,1),0),r=t-1;r>=23;)L0(s,1<<23),r-=23;L0(s,1<<r),P0(s,1,1),L0(s,2),l=O0(s)}else P0(s,0,n),P0(s,1<<-t,0),l=O0(s)+A0("0",o);return l=o>0?u+((i=l.length)<=o?"0."+A0("0",o-i)+l:R0(l,0,i-o)+"."+R0(l,i-o)):u+l}}),D0.propTypes={component:Yx.elementType.isRequired,className:Yx.string};var N0=["className","valid","feedback","feedbackId","children"];function I0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I0(Object(n),!0).forEach((function(t){EE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I0(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z0(e){var t=e.className,n=e.valid,r=e.feedback,i=e.feedbackId,a=e.children;return LQ("div",U0(U0({className:t+(n?"":" has-error")},BQ(e,N0)),{},{children:[a,n?null:LQ("p",{className:"form-input-hint",id:i,children:r})]}))}z0.propTypes={className:Yx.string,valid:Yx.bool.isRequired,feedback:Yx.node,feedbackId:Yx.string,children:Yx.node},z0.defaultProps={className:"form-group"};var F0=0;function B0(e){var t=rT(Zb(e),2),n=t[0],r=t[1];if(!n){var i=function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id-").concat(++F0)}("uid-");return r(i),i}return n}function H0(e){var t=e.id,n=e.label,r=e.name,i=e.placeholder,a=e.value,o=e.disabled,s=e.validator,u=e.onChange,l=B0(t),c=s(a),f=c.valid,h=c.feedback,d=h?"".concat(l,"-feedback"):null;return LQ(z0,{valid:f,feedback:h,feedbackId:d,children:[LQ("label",{className:"form-label",htmlFor:l,children:n}),LQ("input",{type:"text",className:"form-input",id:l,name:r,value:a,placeholder:i,disabled:o,"aria-describedby":d,onChange:u})]})}H0.propTypes={id:Yx.string,label:Yx.node,name:Yx.string,placeholder:Yx.string,value:Yx.string,disabled:Yx.bool,validator:Yx.func,onChange:Yx.func},H0.defaultProps={label:"Field",placeholder:"Type here...",disabled:!1,validator:function(){return{valid:!0}}};var j0=new HW,G0=function(e){return e*Math.PI/180},V0=function(e){return 180*e/Math.PI},W0=function(e){return Number(e.toFixed(2))};function q0(e){var t=e.app,n=t.module("orbitControlsModule").orbitControls,r=rT(Zb(0),2),i=r[0],a=r[1],o=rT(Zb(0),2),s=o[0],u=o[1],l=rT(Zb(0),2),c=l[0],f=l[1],h=rT(Zb(0),2),d=h[0],p=h[1],v=rT(Zb(0),2),m=v[0],g=v[1],y=rT(Zb(0),2),_=y[0],b=y[1],x=function(e,t){nX(t)&&(j0.radius=n.getDistance(),j0.theta=n.getAzimuthalAngle(),j0.phi=n.getPolarAngle(),j0[e]=Number(t),n.object.position.setFromSpherical(j0).add(n.target),n.update())},w=function(e){var t=e.target.value;nX(t)&&(n.target[e.target.name]=Number(t),n.update())};return $b((function(){var e=function(){t.refresh(),a(n.getDistance()),u(n.getAzimuthalAngle()),f(n.getPolarAngle()),p(n.target.x),g(n.target.y),b(n.target.z)};return e(),n.addEventListener("change",e),function(){n.removeEventListener("change",e)}}),[]),LQ("div",{className:"form-section",children:[LQ("div",{className:"form-group",children:LQ("fieldset",{className:"field-group",children:[LQ("legend",{className:"field-group-legend",children:"Position"}),LQ("div",{className:"field-group-body",children:[LQ(H0,{label:"r",name:"radius",value:W0(i),onChange:function(e){x(e.target.name,Number(e.target.value))}}),LQ(H0,{label:"Î¸",name:"theta",value:W0(V0(s)),onChange:function(e){x(e.target.name,G0(Number(e.target.value)))}}),LQ(H0,{label:"Ï",name:"phi",value:W0(V0(c)),onChange:function(e){x(e.target.name,G0(Number(e.target.value)))}})]})]})}),LQ("div",{className:"form-group",children:LQ("fieldset",{className:"field-group",children:[LQ("legend",{className:"field-group-legend",children:"Target"}),LQ("div",{className:"field-group-body",children:[LQ(H0,{label:"x",name:"x",value:W0(d),onChange:w}),LQ(H0,{label:"y",name:"y",value:W0(m),onChange:w}),LQ(H0,{label:"z",name:"z",value:W0(_),onChange:w})]})]})}),LQ("div",{className:"form-group",children:LQ("button",{type:"button",className:"btn",onClick:function(){n.reset()},children:[LQ(D0,{component:kT}),LQ("span",{className:"btn-text",children:"Reset camera"})]})})]})}q0.propTypes={app:Yx.object.isRequired};var X0=UQ(q0),Y0=["className","openClassName","open","onClick","children"],Z0=["className","openClassName","open","onClick"],K0=["className","openClassName","open","children"];function $0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$0(Object(n),!0).forEach((function(t){EE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$0(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q0(e){var t=e.className,n=e.openClassName,r=e.open,i=e.onClick,a=e.children;return LQ("button",J0(J0({type:"button",className:t+(r?" "+n:""),onClick:i},BQ(e,Y0)),{},{children:a}))}function e1(e){var t=e.className,n=e.openClassName;return LQ("div",J0({className:t+(e.open?" "+n:""),onClick:e.onClick},BQ(e,Z0)))}function t1(e){var t=e.className,n=e.openClassName,r=e.open,i=e.children;return LQ("div",J0(J0({className:t+(r?" "+n:""),"aria-hidden":!r},BQ(e,K0)),{},{children:i}))}Q0.propTypes={className:Yx.string,openClassName:Yx.string,open:Yx.bool.isRequired,onClick:Yx.func,children:Yx.node},Q0.defaultProps={className:"drawer-btn",openClassName:"open"},e1.propTypes={className:Yx.string,openClassName:Yx.string,open:Yx.bool.isRequired,onClick:Yx.func},e1.defaultProps={className:"drawer-overlay",openClassName:"open"},t1.propTypes={className:Yx.string,openClassName:Yx.string,open:Yx.bool.isRequired,children:Yx.node},t1.defaultProps={className:"drawer",openClassName:"open"},t1.Button=Q0,t1.Overlay=e1;
/*!
    * tabbable 5.3.3
    * @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
    */
var n1=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"].join(","),r1="undefined"==typeof Element,i1=r1?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,a1=!r1&&Element.prototype.getRootNode?function(e){return e.getRootNode()}:function(e){return e.ownerDocument},o1=function e(t,n,r){for(var i=[],a=Array.from(t);a.length;){var o=a.shift();if("SLOT"===o.tagName){var s=o.assignedElements(),u=e(s.length?s:o.children,!0,r);r.flatten?i.push.apply(i,u):i.push({scope:o,candidates:u})}else{i1.call(o,n1)&&r.filter(o)&&(n||!t.includes(o))&&i.push(o);var l=o.shadowRoot||"function"==typeof r.getShadowRoot&&r.getShadowRoot(o),c=!r.shadowRootFilter||r.shadowRootFilter(o);if(l&&c){var f=e(!0===l?o.children:l.children,!0,r);r.flatten?i.push.apply(i,f):i.push({scope:o,candidates:f})}else a.unshift.apply(a,o.children)}}return i},s1=function(e,t){return e.tabIndex<0&&(t||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},u1=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},l1=function(e){return"INPUT"===e.tagName},c1=function(e){return function(e){return l1(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||a1(e),r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var i=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!i||i===e}(e)},f1=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return 0===n&&0===r},h1=function(e,t){return!(t.disabled||function(e){return l1(e)&&"hidden"===e.type}(t)||function(e,t){var n=t.displayCheck,r=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var i=i1.call(e,"details>summary:first-of-type")?e.parentElement:e;if(i1.call(i,"details:not([open]) *"))return!0;var a=a1(e).host,o=(null==a?void 0:a.ownerDocument.contains(a))||e.ownerDocument.contains(e);if(n&&"full"!==n){if("non-zero-area"===n)return f1(e)}else{if("function"==typeof r){for(var s=e;e;){var u=e.parentElement,l=a1(e);if(u&&!u.shadowRoot&&!0===r(u))return f1(e);e=e.assignedSlot?e.assignedSlot:u||l===e.ownerDocument?u:l.host}e=s}if(o)return!e.getClientRects().length}return!1}(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if("LEGEND"===r.tagName)return!!i1.call(t,"fieldset[disabled] *")||!r.contains(e)}return!0}t=t.parentElement}return!1}(t))},d1=function(e,t){return!(c1(t)||s1(t)<0||!h1(e,t))},p1=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},v1=function e(t){var n=[],r=[];return t.forEach((function(t,i){var a=!!t.scope,o=a?t.scope:t,s=s1(o,a),u=a?e(t.candidates):o;0===s?a?n.push.apply(n,u):n.push(o):r.push({documentOrder:i,tabIndex:s,item:t,isScope:a,content:u})})),r.sort(u1).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(n)},m1=function(e,t){var n;return n=(t=t||{}).getShadowRoot?o1([e],t.includeContainer,{filter:d1.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:p1}):function(e,t,n){var r=Array.prototype.slice.apply(e.querySelectorAll(n1));return t&&i1.call(e,n1)&&r.unshift(e),r.filter(n)}(e,t.includeContainer,d1.bind(null,t)),v1(n)},g1=function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t],i=r.getAttribute("tabindex");r.setAttribute("tabindex","-1"),i&&r.setAttribute("data-tabindex",i)}},y1=function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t],i=r.getAttribute("data-tabindex");r.removeAttribute("tabindex"),i&&(r.setAttribute("tabindex",i),r.removeAttribute("data-tabindex"))}};function _1(e){var t=e.disabled,n=function(e){var t=Qb(null),n=yx.only(e);return[Vx(n,{ref:function(e){t.current=e,"function"==typeof n.ref?n.ref(e):"object"===Rc(n.ref)&&(n.ref.current=e)}}),t.current]}(e.children),r=rT(n,2),i=r[0];return function(e,t){var n=Qb([]);$b((function(){e&&(t?(n.current=m1(e),g1(n.current)):y1(n.current))}),[e,t])}(r[1],t),i}function b1(e){var t=e.title,n=e.children;return LQ("section",{className:"panel",children:[LQ("header",{className:"panel-header",children:LQ("div",{className:"panel-header-inner",children:[LQ("div",{className:"panel-side"}),LQ("div",{className:"panel-main",children:LQ("h2",{className:"panel-heading",children:t})})]})}),LQ("div",{className:"panel-body",children:n})]})}function x1(e){var t=e.editor,n=e.resetApp,r=e.undo,i=e.redo,a=t.past.length>0,o=t.future.length>0;return LQ("div",{className:"form-section",children:LQ("div",{className:"form-group",children:[LQ("div",{className:"btn-group",children:LQ("button",{type:"button",className:"btn",onClick:n,children:[LQ(D0,{component:RT}),LQ("span",{className:"btn-text",children:"Reset"})]})}),LQ("div",{className:"btn-group",children:[LQ("button",{type:"button",className:"btn",title:"Undo",disabled:!a,onClick:function(){a&&r()},children:[LQ(D0,{component:bT}),LQ("span",{className:"sr-only",children:"Undo"})]}),LQ("button",{type:"button",className:"btn",title:"Redo",disabled:!o,onClick:function(){o&&i()},children:[LQ(D0,{component:_T}),LQ("span",{className:"sr-only",children:"Redo"})]})]})]})})}_1.propTypes={disabled:Yx.bool.isRequired,children:Yx.element.isRequired},b1.propTypes={title:Yx.node,children:Yx.node},x1.propTypes={editor:Yx.object.isRequired,resetApp:Yx.func,undo:Yx.func,redo:Yx.func},x1.defaultProps={resetApp:function(){},undo:function(){},redo:function(){}};var w1=FM((function(e){return{editor:e.editor}}),{resetApp:function(){return{type:j$}},undo:function(){return{type:G$}},redo:function(){return{type:V$}}})(x1);function S1(e){var t=e.muted,n=e.paused,r=e.setMuted,i=e.setPaused,a=nx(DQ);if(a){var o=a.module("animationControlModule");return t!==o.muted&&r(o.muted),LQ("div",{className:"form-section",children:LQ("div",{className:"form-group",children:[LQ("div",{className:"btn-group",children:[LQ("button",{type:"button",className:"btn",title:n?"Play":"Pause",onClick:function(){n?o.play():o.pause(),i(!n)},children:[LQ(D0,{component:n?dT:hT}),LQ("span",{className:"sr-only",children:n?"Play":"Pause"})]}),LQ("button",{type:"button",className:"btn",title:"Stop",onClick:function(){o.pause(),o.reset(),i(!0)},children:[LQ(D0,{component:vT}),LQ("span",{className:"sr-only",children:"Stop"})]}),LQ("button",{type:"button",className:"btn",title:"Step forward",onClick:function(){o.step()},children:[LQ(D0,{component:pT}),LQ("span",{className:"sr-only",children:"Step forward"})]})]}),LQ("div",{className:"btn-group",children:LQ("button",{type:"button",className:"btn",title:t?"Unmute":"Mute",onClick:function(){o.muted=!t,a.refresh(),r(!t)},children:[LQ(D0,{component:t?mT:gT}),LQ("span",{className:"sr-only",children:t?"Unmute":"Mute"})]})})]})})}return null}function M1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M1(Object(n),!0).forEach((function(t){EE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M1(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}S1.propTypes={muted:Yx.bool,paused:Yx.bool,setMuted:Yx.func,setPaused:Yx.func},S1.defaultProps={setMuted:function(){},setPaused:function(){}};var E1="flagwaver/animationControl/SET_MUTED",A1="flagwaver/animationControl/SET_PAUSED",R1={muted:!1,paused:!1};var C1=FM((function(e){return{muted:e.animationControl.muted,paused:e.animationControl.paused}}),{setMuted:function(e){return{type:E1,payload:e}},setPaused:function(e){return{type:A1,payload:e}}})(S1);function k1(e){var t=e.options,n=e.addToast,r=t.background,i=t.backgroundColor,a=t.backgroundImageSrc,o=rT(Zb(""),2),s=o[0],u=o[1];return $b((function(){u(""),a&&fX(a,(function(e){u(a)}),(function(e){n({status:"error",message:"Image could not be loaded."})}))}),[a]),LQ("div",{className:"app-bg bg-image-full bg-".concat(r),style:r===SX.CUSTOM?{backgroundColor:i,backgroundImage:s?'url("'.concat(s.replace(/"/g,'\\"'),'")'):null}:null})}k1.propTypes={options:Yx.object.isRequired,addToast:Yx.func.isRequired};var P1=FM((function(e){return{options:e.editor.present.scenery}}),{addToast:a0})(k1);function L1(e){var t=e.id,n=e.label,r=e.name,i=e.value,a=e.options,o=e.disabled,s=e.block,u=e.buttonClassName,l=e.buttonActiveClassName,c=e.validator,f=e.onChange,h=B0(t),d=c(i),p=d.valid,v=d.feedback,m=v?"".concat(h,"-feedback"):null,g="".concat(h,"-options");return LQ(z0,{valid:p,feedback:v,feedbackId:m,children:LQ("fieldset",{className:"btn-select"+(s?" btn-select-block":""),children:[LQ("legend",{className:"form-label",children:n}),LQ("div",{className:"btn-select-options",children:a.map((function(e,t){var n=e.label,a=e.value,s="".concat(h,"-option-").concat(t+1),c=a===i;return LQ("div",{className:"btn-select-option",children:[LQ("input",{type:"radio",id:s,name:g,value:a,checked:c,disabled:o,onChange:function(){f(r,a)}}),LQ("label",{className:u+(c?" "+l:""),htmlFor:s,children:n})]},a)}))})]})})}function O1(e){var t=e.id,n=e.label,r=e.name,i=e.value,a=e.accept,o=e.defaultText,s=e.disabled,u=e.buttonText,l=e.validator,c=e.onChange,f=e.isValidFileType,h=B0(t),d=l(i),p=d.valid,v=d.feedback,m=v?"".concat(h,"-feedback"):null,g=i||null;return LQ(z0,{valid:p,feedback:v,feedbackId:m,children:[LQ("label",{className:"form-label",htmlFor:h,children:n}),LQ("div",{className:"form-file",children:[LQ("input",{type:"file",className:"form-file-input",id:h,name:r,accept:a,disabled:s,"aria-describedby":m,onChange:function(e){if(window.File){var t=e.target.files[0];t?f(t.type)?c(r,t):console.error("Invalid file type."):console.error("No file was uploaded.")}else console.error("The File APIs are not fully supported in this browser.")}}),LQ("div",{className:"input-group form-file-btn","aria-hidden":"true",children:[LQ("input",{type:"text",className:"form-input",value:g?g.name:"",placeholder:o,disabled:"disabled"}),LQ("div",{className:"btn input-group-btn",children:u})]})]})]})}function D1(e){var t=e.id,n=e.label,r=e.name,i=e.placeholder,a=e.value,o=e.disabled,s=e.buttonTitle,u=e.buttonText,l=e.validator,c=e.onChange,f=e.onSubmit,h=B0(t),d=l(a),p=d.valid,v=d.feedback,m=v?"".concat(h,"-feedback"):null;return LQ(z0,{valid:p,feedback:v,feedbackId:m,children:[LQ("label",{className:"form-label",htmlFor:h,children:n}),LQ("div",{className:"input-group",children:[LQ("input",{type:"url",className:"form-input",id:h,name:r,value:a,placeholder:i,disabled:o,"aria-describedby":m,onChange:c,onKeyDown:function(e){var t=e.key||e.keyCode;"Enter"!==t&&13!==t||f(e)}}),LQ("button",{type:"button",className:"btn input-group-btn",title:s,disabled:o,onClick:f,children:u})]})]})}L1.propTypes={id:Yx.string,label:Yx.node,name:Yx.string,value:Yx.string,options:Yx.arrayOf(Yx.shape({label:Yx.node,value:Yx.string.isRequired})),disabled:Yx.bool,block:Yx.bool,buttonClassName:Yx.string,buttonActiveClassName:Yx.string,validator:Yx.func,onChange:Yx.func},L1.defaultProps={label:"Select",options:[],disabled:!1,buttonClassName:"btn",buttonActiveClassName:"active",validator:function(){return{valid:!0}},onChange:function(){}},O1.propTypes={id:Yx.string,label:Yx.node,name:Yx.string,value:Yx.instanceOf(File),accept:Yx.string,defaultText:Yx.node,disabled:Yx.bool,buttonText:Yx.node,validator:Yx.func,onChange:Yx.func,isValidFileType:Yx.func},O1.defaultProps={label:"File",defaultText:"Select file...",disabled:!1,buttonText:"Browse...",validator:function(){return{valid:!0}},onChange:function(){},isValidFileType:function(){return!0}},D1.propTypes={id:Yx.string,label:Yx.node,name:Yx.string,placeholder:Yx.string,value:Yx.string,disabled:Yx.bool,buttonText:Yx.node,validator:Yx.func,onChange:Yx.func,onSubmit:Yx.func},D1.defaultProps={label:"URL",placeholder:"https://www...",disabled:!1,buttonText:"Go",validator:function(){return{valid:!0}}};var N1={WEB:"web",FILE:"file"},I1=function(e){return!e||function(e){try{return!!new URL(e)}catch(e){return!1}}(e)};function U1(e){var t=e.label,n=e.name,r=e.value,i=e.accept,a=e.onChange,o=e.isValidFileType,s=rT(Zb(N1.WEB),2),u=s[0],l=s[1],c=rT(Zb(""),2),f=c[0],h=c[1],d=rT(Zb(!1),2),p=d[0],v=d[1];return $b((function(){!function(e){h(e&&!_$(e)?e:"")}(r)}),[r]),LQ("div",{className:"form-group form-file-picker-group",children:LQ("fieldset",{className:"field-group",children:[LQ("legend",{className:"field-group-legend",children:t}),LQ("div",{className:"field-group-body",children:[LQ(L1,{label:"From",name:"inputMode",value:u,options:[{label:"Web",value:N1.WEB},{label:"File",value:N1.FILE}],block:!0,onChange:function(e,t){l(t),v(!1)}}),u===N1.WEB&&LQ(D1,{label:"URL",name:"url",value:f,buttonTitle:"Load",buttonText:LQ(Z_,{children:[LQ(D0,{component:MT}),LQ("span",{className:"sr-only",children:"Load"})]}),validator:function(e){return p&&!I1(e)?{valid:!1,feedback:"Please enter a valid URL."}:{valid:!0}},onChange:function(e){h(e.target.value),v(!1)},onSubmit:function(){v(!0),I1(f)&&a(n,f)}}),u===N1.FILE&&LQ(O1,{label:"File",name:"file",value:_$(r),accept:i,defaultText:"Select file...",buttonText:LQ(Z_,{children:[LQ(D0,{component:xT}),LQ("span",{className:"sr-only",children:"Browse"})]}),onChange:function(e,t){h(""),a(n,b$(t))},isValidFileType:o}),LQ("div",{className:"form-group form-file-picker-group-footer",children:LQ("button",{type:"button",className:"btn",onClick:function(){h(""),v(!1),a(n,"")},children:[LQ(D0,{component:fT}),LQ("span",{className:"btn-text",children:"Clear"})]})})]})]})})}U1.propTypes={label:Yx.node,name:Yx.string,value:Yx.string,accept:Yx.string,onChange:Yx.func,isValidFileType:Yx.func},U1.defaultProps={label:"Select File",onChange:function(){}};var z1="default",F1="success",B1="warning",H1="error";function j1(e){var t=e.status,n=e.children;return LQ("div",{className:"message message-".concat(t),children:LQ("div",{className:"message-body",children:n})})}function G1(e){var t=e.options,n=e.setOptions;return t?LQ("div",{className:"form-section",children:LQ(U1,{label:"Select image",name:"imageSrc",value:t.imageSrc,accept:"image/*, video/*",onChange:function(e,t){n(EE({},e,t))},isValidFileType:function(e){return e.match("image.*")||e.match("video.*")}})}):LQ(j1,{status:"error",children:LQ("p",{children:"Error: Object does not exist."})})}j1.propTypes={status:Yx.oneOf([z1,F1,B1,H1]),children:Yx.node.isRequired},j1.defaultProps={status:z1},G1.propTypes={options:Yx.object.isRequired,setOptions:Yx.func},G1.defaultProps={setOptions:function(){}};var V1=FM((function(e){return{options:e.editor.present.flagGroup}}),{setOptions:T$})(G1);function W1(e){var t=e.id,n=e.label,r=e.name,i=e.value,a=e.options,o=e.disabled,s=e.validator,u=e.onChange,l=B0(t),c=s(i),f=c.valid,h=c.feedback,d=h?"".concat(l,"-feedback"):null;return LQ(z0,{valid:f,feedback:h,feedbackId:d,children:[LQ("label",{className:"form-label",htmlFor:l,children:n}),LQ("select",{className:"form-select",id:l,name:r,value:i,disabled:o,"aria-describedby":d,onChange:u,children:a.map((function(e){return LQ("option",{value:e.value,children:e.label},e.value)}))})]})}function q1(e){var t=e.id,n=e.label,r=e.name,i=e.value,a=e.disabled,o=e.validator,s=e.onChange,u=B0(t),l=o(i),c=l.valid,f=l.feedback,h=f?"".concat(u,"-feedback"):null;return LQ(z0,{valid:c,feedback:f,feedbackId:h,children:LQ("div",{className:"form-switch",children:[LQ("input",{type:"checkbox",className:"checkbox",id:u,name:r,checked:i,disabled:a,"aria-describedby":h,onChange:s}),LQ("span",{className:"form-icon","aria-hidden":"true"}),LQ("label",{htmlFor:u,children:[n,LQ("span",{className:"form-icon-target"})]})]})})}function X1(e){var t=e.options,n=e.setOptions,r=function(e){n(EE({},e.target.name,e.target.value))},i=function(e,t){n(EE({},e,t))};return t?LQ("div",{className:"form-section",children:[LQ(U1,{label:"Select image",name:"imageSrc",value:t.imageSrc,accept:"image/*, video/*",onChange:i,isValidFileType:function(e){return e.match("image.*")||e.match("video.*")}}),LQ(q1,{label:"Two-sided",name:"isTwoSided",value:t.isTwoSided,disabled:!t.imageSrc,onChange:function(e){n(EE({},e.target.name,e.target.checked))}}),t.isTwoSided?LQ(U1,{label:"Select back side image",name:"backSideImageSrc",value:t.backSideImageSrc,accept:"image/*, video/*",onChange:i,isValidFileType:function(e){return e.match("image.*")||e.match("video.*")}}):null,LQ(L1,{label:"Hoisting",name:"hoisting",value:t.hoisting,options:[{value:dA.SINISTER,label:LQ(Z_,{children:[LQ(D0,{component:yT,className:"icon-hoisting-sinister"}),LQ("span",{className:"btn-text",children:"Sinister"})]})},{value:dA.DEXTER,label:LQ(Z_,{children:[LQ(D0,{component:yT,className:"icon-hoisting-dexter"}),LQ("span",{className:"btn-text",children:"Dexter"})]})}],block:!0,onChange:function(e,t){n(EE({},e,t))}}),LQ(W1,{label:"Orientation",name:"orientation",value:t.orientation,onChange:r,options:[{value:pA.TOP,label:"Top"},{value:pA.LEFT,label:"Left"},{value:pA.BOTTOM,label:"Bottom"},{value:pA.RIGHT,label:"Right"}]}),LQ(W1,{label:"Flagpole type",name:"flagpoleType",value:t.flagpoleType,onChange:r,options:[{value:vA.VERTICAL,label:"Standard"},{value:vA.HORIZONTAL,label:"Horizontal"},{value:vA.OUTRIGGER,label:"Outrigger"},{value:vA.CROSSBAR,label:"Crossbar"},{value:vA.GALLERY,label:"Gallery"}]}),LQ(W1,{label:"Vertical hanging method",name:"verticalHoisting",value:t.verticalHoisting,disabled:t.flagpoleType!==vA.CROSSBAR,onChange:r,options:[{value:mA.TOP_RIGHT,label:"Rotate clockwise"},{value:mA.TOP_LEFT,label:"Rotate and flip"},{value:mA.NONE,label:"No change"}]})]}):LQ(j1,{status:"error",children:LQ("p",{children:"Error: Object does not exist."})})}W1.propTypes={id:Yx.string,label:Yx.node,name:Yx.string,value:Yx.string,options:Yx.arrayOf(Yx.shape({label:Yx.node,value:Yx.string.isRequired})),disabled:Yx.bool,validator:Yx.func,onChange:Yx.func},W1.defaultProps={label:"Select",options:[],disabled:!1,validator:function(){return{valid:!0}}},q1.propTypes={id:Yx.string,label:Yx.node,name:Yx.string,value:Yx.bool,disabled:Yx.bool,validator:Yx.func,onChange:Yx.func},q1.defaultProps={label:"Switch",disabled:!1,validator:function(){return{valid:!0}}},X1.propTypes={options:Yx.object.isRequired,setOptions:Yx.func},X1.defaultProps={setOptions:function(){}};var Y1=FM((function(e){return{options:e.editor.present.flagGroup}}),{setOptions:T$})(X1);function Z1(){return(Z1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function K1(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}function $1(e){var t=Qb(e),n=Qb((function(e){t.current&&t.current(e)}));return t.current=e,n.current}var J1=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e<t?t:e},Q1=function(e){return"touches"in e},e2=function(e){return e&&e.ownerDocument.defaultView||self},t2=function(e,t,n){var r=e.getBoundingClientRect(),i=Q1(t)?function(e,t){for(var n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return e[0]}(t.touches,n):t;return{left:J1((i.pageX-(r.left+e2(e).pageXOffset))/r.width),top:J1((i.pageY-(r.top+e2(e).pageYOffset))/r.height)}},n2=function(e){!Q1(e)&&e.preventDefault()},r2=Xx.memo((function(e){var t=e.onMove,n=e.onKey,r=K1(e,["onMove","onKey"]),i=Qb(null),a=$1(t),o=$1(n),s=Qb(null),u=Qb(!1),l=ex((function(){var e=function(e){n2(e),(Q1(e)?e.touches.length>0:e.buttons>0)&&i.current?a(t2(i.current,e,s.current)):n(!1)},t=function(){return n(!1)};function n(n){var r=u.current,a=e2(i.current),o=n?a.addEventListener:a.removeEventListener;o(r?"touchmove":"mousemove",e),o(r?"touchend":"mouseup",t)}return[function(e){var t=e.nativeEvent,r=i.current;if(r&&(n2(t),!function(e,t){return t&&!Q1(e)}(t,u.current)&&r)){if(Q1(t)){u.current=!0;var o=t.changedTouches||[];o.length&&(s.current=o[0].identifier)}r.focus(),a(t2(r,t,s.current)),n(!0)}},function(e){var t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),o({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},n]}),[o,a]),c=l[0],f=l[1],h=l[2];return $b((function(){return h}),[h]),Xx.createElement("div",Z1({},r,{onTouchStart:c,onMouseDown:c,className:"react-colorful__interactive",ref:i,onKeyDown:f,tabIndex:0,role:"slider"}))})),i2=function(e){return e.filter(Boolean).join(" ")},a2=function(e){var t=e.color,n=e.left,r=e.top,i=void 0===r?.5:r,a=i2(["react-colorful__pointer",e.className]);return Xx.createElement("div",{className:a,style:{top:100*i+"%",left:100*n+"%"}},Xx.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},o2=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n},s2=function(e){return"#"===e[0]&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?o2(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:8===e.length?o2(parseInt(e.substring(6,8),16)/255,2):1}},u2=function(e){var t=function(e){var t=e.s,n=e.v,r=e.a,i=(200-t)*n/100;return{h:o2(e.h),s:o2(i>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0),l:o2(i/2),a:o2(r,2)}}(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},l2=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var a=Math.floor(t),o=r*(1-n),s=r*(1-(t-a)*n),u=r*(1-(1-t+a)*n),l=a%6;return{r:o2(255*[r,s,o,o,u,r][l]),g:o2(255*[u,r,r,s,o,o][l]),b:o2(255*[o,o,u,r,r,s][l]),a:o2(i,2)}},c2=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},f2=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,a=i<1?c2(o2(255*i)):"";return"#"+c2(t)+c2(n)+c2(r)+a},h2=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,a=Math.max(t,n,r),o=a-Math.min(t,n,r),s=o?a===t?(n-r)/o:a===n?2+(r-t)/o:4+(t-n)/o:0;return{h:o2(60*(s<0?s+6:s)),s:o2(a?o/a*100:0),v:o2(a/255*100),a:i}},d2=Xx.memo((function(e){var t=e.hue,n=e.onChange,r=i2(["react-colorful__hue",e.className]);return Xx.createElement("div",{className:r},Xx.createElement(r2,{onMove:function(e){n({h:360*e.left})},onKey:function(e){n({h:J1(t+360*e.left,0,360)})},"aria-label":"Hue","aria-valuenow":o2(t),"aria-valuemax":"360","aria-valuemin":"0"},Xx.createElement(a2,{className:"react-colorful__hue-pointer",left:t/360,color:u2({h:t,s:100,v:100,a:1})})))})),p2=Xx.memo((function(e){var t=e.hsva,n=e.onChange,r={backgroundColor:u2({h:t.h,s:100,v:100,a:1})};return Xx.createElement("div",{className:"react-colorful__saturation",style:r},Xx.createElement(r2,{onMove:function(e){n({s:100*e.left,v:100-100*e.top})},onKey:function(e){n({s:J1(t.s+100*e.left,0,100),v:J1(t.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+o2(t.s)+"%, Brightness "+o2(t.v)+"%"},Xx.createElement(a2,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:u2(t)})))})),v2=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0};function m2(e,t,n){var r=$1(n),i=Zb((function(){return e.toHsva(t)})),a=i[0],o=i[1],s=Qb({color:t,hsva:a});$b((function(){if(!e.equal(t,s.current.color)){var n=e.toHsva(t);s.current={hsva:n,color:t},o(n)}}),[t,e]),$b((function(){var t;v2(a,s.current.hsva)||e.equal(t=e.fromHsva(a),s.current.color)||(s.current={hsva:a,color:t},r(t))}),[a,e,r]);var u=tx((function(e){o((function(t){return Object.assign({},t,e)}))}),[]);return[a,u]}var g2="undefined"!=typeof window?Jb:$b,y2=new Map,_2=function(e){g2((function(){var t=e.current?e.current.ownerDocument:document;if(void 0!==t&&!y2.has(t)){var n=t.createElement("style");n.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',y2.set(t,n);var r="undefined"!=typeof __webpack_nonce__?__webpack_nonce__:void 0;r&&n.setAttribute("nonce",r),t.head.appendChild(n)}}),[])},b2=function(e){var t=e.className,n=e.colorModel,r=e.color,i=void 0===r?n.defaultColor:r,a=e.onChange,o=K1(e,["className","colorModel","color","onChange"]),s=Qb(null);_2(s);var u=m2(n,i,a),l=u[0],c=u[1],f=i2(["react-colorful",t]);return Xx.createElement("div",Z1({},o,{ref:s,className:f}),Xx.createElement(p2,{hsva:l,onChange:c}),Xx.createElement(d2,{hue:l.h,onChange:c,className:"react-colorful__last-control"}))},x2={defaultColor:"000",toHsva:function(e){return h2(s2(e))},fromHsva:function(e){return function(e){return f2(l2(e))}({h:e.h,s:e.s,v:e.v,a:1})},equal:function(e,t){return e.toLowerCase()===t.toLowerCase()||v2(s2(e),s2(t))}},w2=function(e){return Xx.createElement(b2,Z1({},e,{colorModel:x2}))},S2=/^#?([0-9A-F]{3,8})$/i,M2=function(e){var t=e.color,n=void 0===t?"":t,r=e.onChange,i=e.onBlur,a=e.escape,o=e.validate,s=e.format,u=e.process,l=K1(e,["color","onChange","onBlur","escape","validate","format","process"]),c=Zb((function(){return a(n)})),f=c[0],h=c[1],d=$1(r),p=$1(i),v=tx((function(e){var t=a(e.target.value);h(t),o(t)&&d(u?u(t):t)}),[a,u,o,d]),m=tx((function(e){o(e.target.value)||h(a(n)),p(e)}),[n,a,o,p]);return $b((function(){h(a(n))}),[n,a]),Xx.createElement("input",Z1({},l,{value:s?s(f):f,spellCheck:"false",onChange:v,onBlur:m}))},T2=function(e){return"#"+e},E2=function(e){var t=e.prefixed,n=e.alpha,r=K1(e,["prefixed","alpha"]),i=tx((function(e){return e.replace(/([^0-9A-F]+)/gi,"").substring(0,n?8:6)}),[n]),a=tx((function(e){return function(e,t){var n=S2.exec(e),r=n?n[1].length:0;return 3===r||6===r||!!t&&4===r||!!t&&8===r}(e,n)}),[n]);return Xx.createElement(M2,Z1({},r,{escape:i,format:t?T2:void 0,process:T2,validate:a}))};function A2(e){var t=e.id,n=e.label,r=e.name,i=e.value,a=e.onChange,o=B0(t),s="".concat(o,"-input");return LQ("div",{className:"form-group",children:LQ("fieldset",{className:"field-group",children:[LQ("legend",{className:"field-group-legend",children:n}),LQ("div",{className:"field-group-body",children:[LQ("div",{className:"form-group",children:LQ(w2,{color:i,onChange:a})}),LQ("div",{className:"form-group",children:[LQ("label",{className:"form-label",htmlFor:s,children:"Hex"}),LQ(E2,{className:"form-input",id:s,name:r,color:i,onChange:a})]})]})]})})}function R2(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];clearTimeout(t),t=setTimeout((function(){t=null,e.apply(null,i)}),n)}}function C2(e){var t=e.options,n=e.setOptions,r=R2((function(e){n({backgroundColor:e})}));return LQ("div",{className:"form-section",children:[LQ(W1,{label:"Background",name:"background",value:t.background,onChange:function(e){n(EE({},e.target.name,e.target.value))},options:[{value:SX.CLASSIC,label:"Classic"},{value:SX.BLUE_SKY,label:"Blue sky"},{value:SX.NIGHT_SKY_CLOUDS,label:"Night sky with clouds"},{value:SX.CUSTOM,label:"Custom"}]}),t.background===SX.CUSTOM?LQ(A2,{label:"Background color",name:"backgroundColor",value:t.backgroundColor,onChange:r}):null,t.background===SX.CUSTOM?LQ(U1,{label:"Background image",name:"backgroundImageSrc",value:t.backgroundImageSrc,accept:"image/*",onChange:function(e,t){n(EE({},e,t))},isValidFileType:function(e){return e.match("image.*")}}):null]})}A2.propTypes={id:Yx.string,label:Yx.node,name:Yx.string,value:Yx.string,onChange:Yx.func},A2.defaultProps={label:"Color"},C2.propTypes={options:Yx.object.isRequired,setOptions:Yx.func},C2.defaultProps={setOptions:function(){}};var k2,P2,L2=FM((function(e){return{options:e.editor.present.scenery}}),{setOptions:P$})(C2),O2=0,D2=0,N2=0,I2=1e3,U2=0,z2=0,F2=0,B2="object"===("undefined"==typeof performance?"undefined":Rc(performance))&&performance.now?performance:Date,H2="object"===("undefined"==typeof window?"undefined":Rc(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function j2(){return z2||(H2(G2),z2=B2.now()+F2)}function G2(){z2=0}function V2(){this._call=this._time=this._next=null}function W2(e,t,n){var r=new V2;return r.restart(e,t,n),r}function q2(){z2=(U2=B2.now())+F2,O2=D2=0;try{!function(){j2(),++O2;for(var e,t=k2;t;)(e=z2-t._time)>=0&&t._call.call(null,e),t=t._next;--O2}()}finally{O2=0,function(){var e,t,n=k2,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:k2=t);P2=e,Y2(r)}(),z2=0}}function X2(){var e=B2.now(),t=e-U2;t>I2&&(F2-=t,U2=e)}function Y2(e){O2||(D2&&(D2=clearTimeout(D2)),e-z2>24?(e<1/0&&(D2=setTimeout(q2,e-B2.now()-F2)),N2&&(N2=clearInterval(N2))):(N2||(U2=B2.now(),N2=setInterval(X2,I2)),O2=1,H2(q2)))}function Z2(e,t,n){var r=new V2;return t=null==t?0:+t,r.restart((function(n){r.stop(),e(n+t)}),t,n),r}function K2(e){return K2="function"==typeof Symbol&&"symbol"===Rc(Symbol.iterator)?function(e){return Rc(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Rc(e)},K2(e)}V2.prototype=W2.prototype={constructor:V2,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?j2():+n)+(null==t?0:+t),this._next||P2===this||(P2?P2._next=this:k2=this,P2=this),this._call=e,this._time=n,Y2()},stop:function(){this._call&&(this._call=null,this._time=1/0,Y2())}};var $2=0;function J2(e,t){for(var n in t)e[n]=t[n]}var Q2={delay:0,duration:250,ease:function(e){return+e}};var e3=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.start=null,this.interrupt=null,this.end=null,t.events&&Object.keys(t.events).forEach((function(e){if("function"!=typeof t.events[e])throw new Error("Event handlers must be a function");n[e]=function(e){var t=!1;return function(){t||(t=!0,e.call(this))}}(t.events[e])}))};function t3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){n3(e,t,n[t])}))}return e}function n3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i3=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=t||{}}return function(e,t,n){t&&r3(e.prototype,t),n&&r3(e,n)}(e,[{key:"transition",value:function(e){if(Array.isArray(e)){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;this.parse(o)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}else this.parse(e)}},{key:"isTransitioning",value:function(){return!!this.transitionData}},{key:"stopTransitions",value:function(){var e=this.transitionData;e&&Object.keys(e).forEach((function(t){e[t].timer.stop()}))}},{key:"setState",value:function(e){J2(this.state,"function"==typeof e?e(this.state):e)}},{key:"parse",value:function(e){var t=this,n=t3({},e),r=new e3(n);n.events&&delete n.events;var i=t3({},Q2,n.timing||{},{time:j2()});n.timing&&delete n.timing,Object.keys(n).forEach((function(e){var a,o,s=[],u=n[e];if("object"===K2(o=u)&&!1===Array.isArray(o))Object.keys(u).forEach((function(n){var r=u[n];if(Array.isArray(r))1===r.length?s.push(t.getTween(n,r[0],e)):(t.setState((function(t){var i,a;return(a={})[e]=t3({},t[e],((i={})[n]=r[0],i)),a})),s.push(t.getTween(n,r[1],e)));else if("function"==typeof r){s.push((function(){return function(i){t.setState((function(t){var a,o;return(o={})[e]=t3({},t[e],((a={})[n]=r(i),a)),o}))}}))}else t.setState((function(t){var i,a;return(a={})[e]=t3({},t[e],((i={})[n]=r,i)),a})),s.push(t.getTween(n,r,e))}));else if(Array.isArray(u))1===u.length?s.push(t.getTween(e,u[0],null)):(t.setState(((a={})[e]=u[0],a)),s.push(t.getTween(e,u[1],null)));else if("function"==typeof u){s.push((function(){return function(n){var r;t.setState(((r={})[e]=u(n),r))}}))}else{var l;t.setState(((l={})[e]=u,l)),s.push(t.getTween(e,u,null))}t.update({stateKey:e,timing:i,tweens:s,events:r,status:0})}))}},{key:"getTween",value:function(e,t,n){var r=this;return function(){var i=n?r.state[n][e]:r.state[e];if(i===t)return null;var a,o=r.getInterpolator(i,t,e,n);return a=null===n?function(t){var n;r.setState(((n={})[e]=o(t),n))}:function(t){r.setState((function(r){var i,a;return(a={})[n]=t3({},r[n],((i={})[e]=o(t),i)),a}))},a}}},{key:"update",value:function(e){this.transitionData||(this.transitionData={}),this.init(++$2,e)}},{key:"init",value:function(e,t){var n=this,r=t.tweens.length,i=new Array(r);this.transitionData[e]=t,t.timer=W2((function(e){t.status=1,t.timer.restart(a,t.timing.delay,t.timing.time),t.timing.delay<=e&&a(e-t.timing.delay)}),0,t.timing.time);var a=function a(u){if(1!==t.status)return s();for(var l in n.transitionData){var c=n.transitionData[l];if(c.stateKey===t.stateKey){if(3===c.status)return Z2(a);4===c.status?(c.status=6,c.timer.stop(),c.events.interrupt&&c.events.interrupt.call(n),delete n.transitionData[l]):+l<e&&(c.status=6,c.timer.stop(),delete n.transitionData[l])}}if(Z2((function(){3===t.status&&(t.status=4,t.timer.restart(o,t.timing.delay,t.timing.time),o(u))})),t.status=2,t.events.start&&t.events.start.call(n),2===t.status){t.status=3;for(var f=-1,h=0;h<r;++h){var d=t.tweens[h]();d&&(i[++f]=d)}i.length=f+1}},o=function(e){var r=1;e<t.timing.duration?r=t.timing.ease(e/t.timing.duration):(t.timer.restart(s),t.status=5);for(var a=-1;++a<i.length;)i[a](r);5===t.status&&(t.events.end&&t.events.end.call(n),s())},s=function(){for(var r in t.status=6,t.timer.stop(),delete n.transitionData[e],n.transitionData)return;delete n.transitionData}}}]),e}();var a3="ENTER",o3="LEAVE";function s3(e,t){var n=+e,r=+t-n;return function(e){return n+r*e}}function u3(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}var l3=function(e){yk(n,e);var t=u3(n);function n(e){var r;gA(this,n),EE(_k(r=t.call(this,e)),"animate",(function(){var e=r.state,t=e.nodeKeys,n=e.nodeHash;if(!r.unmounting){for(var i=!1,a=[],o=t.length,s=0;s<o;s++){var u=t[s],l=n[u],c=l.isTransitioning();c&&(i=!0),l.type!==o3||c?a.push(u):delete n[u]}i||r.interval.stop(),r.setState((function(){return{nodeKeys:a,nodes:a.map((function(e){return n[e]}))}}))}})),EE(_k(r),"interval",null),EE(_k(r),"unmounting",!1);var i=e.interpolation,a=function(e){yk(n,e);var t=u3(n);function n(e,r){var a;return gA(this,n),EE(_k(a=t.call(this)),"getInterpolator",i),a.key=e,a.data=r,a.type=a3,a}return n}(i3);return r.state={Node:a,nodeKeys:[],nodeHash:{},nodes:[],data:null},r}return _A(n,[{key:"componentDidMount",value:function(){this.startInterval()}},{key:"componentDidUpdate",value:function(e){e.data===this.props.data||this.unmounting||this.startInterval()}},{key:"startInterval",value:function(){this.interval?this.interval.restart(this.animate):this.interval=function(e,t,n){var r=new V2,i=t;return null==t?(r.restart(e,t,n),r):(t=+t,n=null==n?j2():+n,r.restart((function a(o){o+=i,r.restart(a,i+=t,n),e(o)}),t,n),r)}(this.animate)}},{key:"componentWillUnmount",value:function(){var e=this.state,t=e.nodeKeys,n=e.nodeHash;this.unmounting=!0,this.interval&&this.interval.stop(),t.forEach((function(e){n[e].stopTransitions()}))}},{key:"render",value:function(){var e=this.props.children(this.state.nodes);return e&&Xx.Children.only(e)}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.data!==t.data){for(var n=e.data,r=e.keyAccessor,i=e.start,a=e.enter,o=e.update,s=e.leave,u=t.Node,l=t.nodeKeys,c=t.nodeHash,f={},h=0;h<l.length;h++)f[l[h]]=h;for(var d={},p=[],v=0;v<n.length;v++){var m=n[v],g=r(m,v);if(d[g]=v,p.push(g),void 0===f[g]){var y=new u;y.key=g,y.data=m,y.type=a3,c[g]=y}}for(var _=0;_<l.length;_++){var b=l[_],x=c[b];void 0!==d[b]?(x.data=n[d[b]],x.type="UPDATE"):x.type=o3}for(var w=function(e,t,n,r){for(var i=[],a=0;a<n.length;a++)i[a]=n[a];for(var o=0;o<e.length;o++)void 0===r[e[o]]&&i.push(e[o]);return i.sort((function(e,i){var a=r[e],o=r[i],s=t[e],u=t[i];if(null!=a&&null!=o)return r[e]-r[i];if(null!=s&&null!=u)return t[e]-t[i];if(null!=a){for(var l=0;l<n.length;l++){var c=n[l];if(t[c]){if(a<r[c]&&u>t[c])return-1;if(a>r[c]&&u<t[c])return 1}}return 1}for(var f=0;f<n.length;f++){var h=n[f];if(t[h]){if(o<r[h]&&s>t[h])return 1;if(o>r[h]&&s<t[h])return-1}}return-1}))}(l,f,p,d),S=0;S<w.length;S++){var M=w[S],T=c[M],E=T.data;T.type===a3?(T.setState(i(E,d[M])),T.transition(a(E,d[M]))):T.type===o3?T.transition(s(E,f[M])):T.transition(o(E,d[M]))}return{data:n,nodes:w.map((function(e){return c[e]})),nodeHash:c,nodeKeys:w}}return null}}]),n}(eb);function c3(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xk(e);if(t){var i=xk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bk(this,n)}}l3.propTypes={},l3.defaultProps={enter:function(){},update:function(){},leave:function(){},interpolation:s3};var f3=function(){return"$$key$$"},h3=function(e){yk(n,e);var t=c3(n);function n(){return gA(this,n),t.apply(this,arguments)}return _A(n,[{key:"render",value:function(){var e=this.props,t=e.show,n=e.start,r=e.enter,i=e.update,a=e.leave,o=e.interpolation,s=e.children,u="function"==typeof n?n():n;return Xx.createElement(l3,{data:t?[u]:[],start:function(){return u},keyAccessor:f3,interpolation:o,enter:"function"==typeof r?r:function(){return r},update:"function"==typeof i?i:function(){return i},leave:"function"==typeof a?a:function(){return a}},(function(e){if(!e[0])return null;var t=s(e[0].state);return t&&Xx.Children.only(t)}))}}]),n}(eb);h3.propTypes={},h3.defaultProps={show:!0,interpolation:s3};var d3="default",p3="success",v3="warning",m3="error";function g3(e){var t=e.status,n=e.onDismissClick,r=e.children;return LQ("div",{className:"toast toast-".concat(t),children:[LQ("div",{className:"toast-body",children:r}),LQ("button",{type:"button",className:"btn btn-clear",onClick:n,children:LQ("span",{className:"sr-only",children:"Dismiss"})})]})}g3.propTypes={status:Yx.oneOf([d3,p3,v3,m3]),onDismissClick:Yx.func.isRequired,children:Yx.node.isRequired},g3.defaultProps={status:d3};var y3=function(e){return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2},_3=["id","message"];function b3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b3(Object(n),!0).forEach((function(t){EE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w3(e){var t=e.toasts,n=e.removeToast,r=Qb(new Map).current,i=function(e){return function(t){null!==t?r.set(e,t):r.delete(e)}};return LQ("div",{role:"alert","aria-live":"assertive","aria-atomic":"true",children:LQ(l3,{data:t,keyAccessor:function(e){return e.id},start:function(e,t){return{h0:0,h:0,x:1}},enter:function(e,t){return[{h:[1],timing:{duration:400,ease:y3}},{x:[0],timing:{delay:400,duration:600,ease:y3}}]},leave:function(e,t){return{x:[1],timing:{duration:600,ease:y3}}},children:function(e){return LQ("ul",{className:"toasts",children:e.map((function(e){var t=e.key,a=e.data,o=e.state,s=a.id,u=a.message,l=BQ(a,_3),c=o.h0,f=o.h,h=o.x;if(!c){var d=r.get(s),p=d?d.clientHeight:0;o.h0=p}return LQ("li",{ref:i(s),style:{height:c?"".concat(f*c,"px"):"auto",transform:"translate3d(".concat(22*h,"rem, 0, 0)")},children:LQ(_1,{disabled:!!h,children:LQ("div",{className:"toasts-item-wrap",children:LQ(g3,x3(x3({},l),{},{onDismissClick:function(){n(s)},children:LQ("p",{children:u})}))})})},t)}))})}})})}w3.propTypes={toasts:Yx.arrayOf(Yx.object).isRequired,removeToast:Yx.func.isRequired};var S3=FM((function(e){return{toasts:e.toasts}}),{removeToast:o0})(w3);function M3(e){var t=e.options,n=e.setOptions;return LQ("div",{className:"form-section",children:LQ(q1,{label:"Wind",name:"enabled",value:t.enabled,onChange:function(e){n(EE({},e.target.name,e.target.checked))}})})}M3.propTypes={options:Yx.object.isRequired,setOptions:Yx.func},M3.defaultProps={setOptions:function(){}};var T3=FM((function(e){return{options:e.editor.present.wind}}),{setOptions:B$})(M3);function E3(e){var t=e.id,n=e.label,r=e.name,i=e.value,a=e.min,o=e.max,s=e.step,u=e.disabled,l=e.outputPrefix,c=e.outputSuffix,f=e.ticksLabel,h=e.ticks,d=e.validator,p=e.onChange,v=B0(t),m=d(i),g=m.valid,y=m.feedback,_=y?"".concat(v,"-feedback"):null,b="".concat(v,"-ticks"),x=function(e){p(r,e.target.value)};return LQ(z0,{valid:g,feedback:y,feedbackId:_,children:[LQ("label",{className:"form-label",htmlFor:v,children:n}),LQ("div",{className:"form-static"+(u?" disabled":""),children:[l,LQ("output",{htmlFor:v,children:i}),c]}),LQ("input",{type:"range",className:"slider",id:v,name:r,value:i,min:a,max:o,step:s,disabled:u,"aria-describedby":_,onChange:x}),h&&h.length?LQ("fieldset",{className:"form-group",disabled:u,children:[LQ("legend",{className:"sr-only",children:LQ("span",{className:"sr-only",children:f})}),LQ("ul",{className:"slider-ticks",children:h.map((function(e){var t=e.label,n=e.value;return LQ("li",{children:[LQ("input",{type:"radio",id:"".concat(v,"-tick-").concat(n),name:b,value:n,checked:i===n,disabled:u,onChange:x}),LQ("label",{htmlFor:"".concat(v,"-tick-").concat(n),children:t})]},n)}))})]}):null]})}function A3(e){var t=e.symbol,n=e.text;return LQ(Z_,{children:[LQ("span",{"aria-hidden":"true",children:t}),LQ("span",{className:"sr-only",children:n})]})}function R3(e){var t=e.options,n=e.setOptions,r=function(e,t){n(EE({},e,Number(t)))},i=function(e){n(EE({},e.target.name,e.target.checked))},a=t.enabled&&t.controlled;return LQ("div",{className:"form-section",children:[LQ(q1,{label:"Wind",name:"enabled",value:t.enabled,onChange:i}),LQ(q1,{label:"Wind control",name:"controlled",value:t.controlled,disabled:!t.enabled,onChange:i}),LQ(E3,{label:"Direction",name:"direction",value:t.direction,min:0,max:360,outputSuffix:"Â°",ticksLabel:"Select cardinal direction",ticks:[{label:LQ(A3,{symbol:"N",text:"North"}),value:0},{label:LQ(A3,{symbol:"E",text:"East"}),value:90},{label:LQ(A3,{symbol:"S",text:"South"}),value:180},{label:LQ(A3,{symbol:"W",text:"West"}),value:270}],disabled:!a,onChange:r}),LQ(E3,{label:"Speed",name:"speed",value:t.speed,min:0,max:30,outputSuffix:" m/s",disabled:!a,onChange:r})]})}E3.propTypes={id:Yx.string,label:Yx.node,name:Yx.string,value:Yx.number,min:Yx.number,max:Yx.number,step:Yx.oneOfType([Yx.number,Yx.oneOf(["any"])]),disabled:Yx.bool,outputPrefix:Yx.string,outputSuffix:Yx.string,ticksLabel:Yx.node,ticks:Yx.arrayOf(Yx.shape({label:Yx.node,value:Yx.number.isRequired})),validator:Yx.func,onChange:Yx.func},E3.defaultProps={label:"Slider",min:0,max:100,step:1,disabled:!1,outputPrefix:"",outputSuffix:"",ticksLabel:"Select position",ticks:[],validator:function(){return{valid:!0}},onChange:function(){}},R3.propTypes={options:Yx.object.isRequired,setOptions:Yx.func},R3.defaultProps={setOptions:function(){}};var C3=FM((function(e){return{options:e.editor.present.wind}}),{setOptions:B$})(R3);function k3(e){return LQ("div",{className:"empty empty-screen",children:LQ("div",{className:"v-align",children:LQ("div",{className:"v-align-content",children:e.children})})})}function P3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}k3.propTypes={children:Yx.node.isRequired};var L3=A$(void 0,{}),O3=O$(void 0,{});function D3(e,t){var n=t.toLowerCase();return Object.values(e).find((function(e){return e.toLowerCase()===n}))||null}var N3=new wX({src:{defaultValue:L3.imageSrc,parse:function(e){return decodeURIComponent(e)},stringify:function(e){return _$(e)?void 0:encodeURIComponent(e)}},backsidesrc:{defaultValue:L3.backSideImageSrc,parse:function(e){return decodeURIComponent(e)},stringify:function(e){return _$(e)?void 0:encodeURIComponent(e)}},hoisting:{defaultValue:L3.hoisting,parse:function(e){return e.match(/^dex(ter)?$/gi)?dA.DEXTER:e.match(/^sin(ister)?$/gi)?dA.SINISTER:null},stringify:function(e){return"sin"}},orientation:{defaultValue:L3.orientation,parse:function(e){return D3(pA,e)}},flagpoletype:{defaultValue:L3.flagpoleType,parse:function(e){return D3(vA,e)}},vhoisting:{defaultValue:L3.verticalHoisting,parse:function(e){return D3(mA,e)}},background:{defaultValue:O3.background,parse:function(e){return D3(SX,e)}},backgroundcolor:{defaultValue:O3.backgroundColor,parse:function(e){return Z$("#".concat(e))?"#".concat(e):null},stringify:function(e){return e.slice(1)}},backgroundimage:{defaultValue:O3.backgroundImageSrc,parse:function(e){return decodeURIComponent(e)},stringify:function(e){return _$(e)?void 0:encodeURIComponent(e)}}});var I3=R2((function(e){var t=e.getState();!function(e){var t=e.editor.present.flagGroup,n=t.imageSrc,r=t.backSideImageSrc;return!(!n||_$(n)||_$(r))}(t)?N3.setState(null):N3.setState(function(e){var t=e.editor.present;return{src:t.flagGroup.imageSrc,backsidesrc:t.flagGroup.backSideImageSrc,hoisting:t.flagGroup.hoisting,orientation:t.flagGroup.orientation,flagpoletype:t.flagGroup.flagpoleType,vhoisting:t.flagGroup.verticalHoisting,background:t.scenery.background,backgroundcolor:t.scenery.backgroundColor,backgroundimage:t.scenery.backgroundImageSrc}}(t))}));var U3=$X({animationControl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E1:return T1(T1({},e),{},{muted:t.payload});case A1:return T1(T1({},e),{},{paused:t.payload});default:return e}},editor:function(e,t){return t.type===j$?X$(void 0,t):X$(e,t)},toasts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case t0:return[t.payload].concat(_W(e));case n0:return e.filter((function(e){return e.id!==t.payload}));default:return e}}}),z3=function e(t,n,r){var i;if("function"==typeof n&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(XX(0));if("function"==typeof n&&void 0===r&&(r=n,n=void 0),void 0!==r){if("function"!=typeof r)throw new Error(XX(1));return r(e)(t,n)}if("function"!=typeof t)throw new Error(XX(2));var a=t,o=n,s=[],u=s,l=!1;function c(){u===s&&(u=s.slice())}function f(){if(l)throw new Error(XX(3));return o}function h(e){if("function"!=typeof e)throw new Error(XX(4));if(l)throw new Error(XX(5));var t=!0;return c(),u.push(e),function(){if(t){if(l)throw new Error(XX(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),s=null}}}function d(e){if(!function(e){if("object"!==Rc(e)||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(XX(7));if(void 0===e.type)throw new Error(XX(8));if(l)throw new Error(XX(9));try{l=!0,o=a(o,e)}finally{l=!1}for(var t=s=u,n=0;n<t.length;n++){(0,t[n])()}return e}return d({type:KX.INIT}),(i={dispatch:d,subscribe:h,getState:f,replaceReducer:function(e){if("function"!=typeof e)throw new Error(XX(10));a=e,d({type:KX.REPLACE})}})[YX]=function(){var e,t=h;return(e={subscribe:function(e){if("object"!==Rc(e)||null===e)throw new Error(XX(11));function n(){e.next&&e.next(f())}return n(),{unsubscribe:t(n)}}})[YX]=function(){return this},e},i}(U3,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(XX(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=JX.apply(void 0,a)(n.dispatch),qX(qX({},n),{},{dispatch:r})}}}((function(e){return function(t){return function(n){var r=t(n);return I3(e),r}}}),(function(e){return function(t){return function(n){var r=t(n);if(n.type===t0){var i=r.payload,a=i.id,o=i.message,s=Math.max(Math.min(100*o.length,3500),8e3);setTimeout((function(){e.dispatch(o0(a))}),s)}return r}}}))),F3="".concat(".","/assets/img/site-headline-inverse.svg"),B3={EDIT:"edit",ANIMATE:"animate",CAMERA:"camera",ABOUT:"about"},H3=[{key:B3.EDIT,displayName:"Flag"},{key:B3.ANIMATE,displayName:"Animation control"},{key:B3.CAMERA,displayName:"Camera control"},{key:B3.ABOUT,displayName:"About"}];var j3,G3=(j3=function(){var e,t=rT(Zb(!1),2),n=t[0],r=t[1],i=rT(Zb(!1),2),a=i[0],o=i[1],s=rT(Zb(!1),2),u=s[0],l=s[1],c=rT(Zb(B3.EDIT),2),f=c[0],h=c[1],d=rT(Zb(!1),2),p=d[0],v=d[1],m=rT(Zb(!1),2),g=m[0],y=m[1],_=Qb(null),b=(e=Kb((function(e){return e+1}),0),rT(e,2)[1]),x=B0(),w="".concat(x,"-drawer");return $b((function(){var e=function(){rJ(z3)};return _.current=(ZU.legacyMode=!1,CQ()),e(),window.addEventListener("hashchange",e),b(),kQ(),function(){_.current.destroy(),_.current=null,window.removeEventListener("hashchange",e)}}),[]),$b((function(){var e=function(){y(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),function(){document.removeEventListener("fullscreenchange",e)}}),[]),$b((function(){var e=function(e){var t=e.key||e.keyCode;p&&("Enter"!==t&&13!==t&&" "!==t&&32!==t&&"Escape"!==t&&27!==t||(v(!1),e.preventDefault()))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[p]),$b((function(){o(!1),setTimeout((function(){o(!0)}),0),setTimeout((function(){_.current.module("resizeModule").resize()}),200),setTimeout((function(){o(!1)}),400)}),[n]),LQ(DQ.Provider,{value:_.current,children:[LQ(g0,{}),LQ("div",{className:["site-wrapper",n?"site-is-drawer-open":"site-not-drawer-open",a?"site-is-drawer-animating":"",p?"site-is-theater-mode":"site-not-theater-mode"].filter((function(e){return e})).join(" "),children:[LQ("header",{className:"site-header",role:"banner",children:LQ("div",{className:"site-header-layout",children:[LQ("div",{className:"site-header-center",children:LQ("h1",{className:"site-headline",children:LQ("img",{width:"189",height:"48",alt:"FlagWaver",src:F3})})}),LQ("div",{className:"site-header-left",children:LQ(t1.Button,{className:"site-header-btn drawer-btn",open:n,onClick:function(){r(!n)},"aria-controls":w,"aria-expanded":n,children:[LQ("span",{className:"icon icon-bars","aria-hidden":"true",children:[LQ("span",{className:"icon-bar"}),LQ("span",{className:"icon-bar"}),LQ("span",{className:"icon-bar"})]}),LQ("span",{className:"sr-only",children:"Toggle side panel"})]})}),LQ("div",{className:"site-header-right",children:LQ("button",{type:"button",className:"site-header-btn",children:[LQ("span",{className:"icon icon-dots","aria-hidden":"true",children:[LQ("span",{className:"icon-dot"}),LQ("span",{className:"icon-dot"}),LQ("span",{className:"icon-dot"})]}),LQ("span",{className:"sr-only",children:"Options"})]})})]})}),LQ("main",{className:"site-main",role:"main",children:[LQ("div",{className:"app-viewer",children:[LQ(P1,{}),LQ(FQ,{})]}),LQ("section",{className:"bottom-app-bar","aria-label":"Toolbar",children:[f===B3.EDIT||f===B3.ABOUT?LQ(Z_,{children:[LQ("div",{className:"bottom-app-bar-primary",children:LQ(V1,{})}),LQ("div",{className:"bottom-app-bar-secondary",children:LQ(T3,{})}),LQ("div",{className:"bottom-app-bar-tertiary",children:LQ("div",{className:"form-section",children:LQ("button",{type:"button",className:"btn btn-link","aria-controls":w,onClick:function(){r(!0)},children:"More options"})})})]}):f===B3.ANIMATE?LQ("div",{className:"bottom-app-bar-primary",children:LQ(C1,{})}):f===B3.CAMERA?LQ("div",{className:"bottom-app-bar-primary"}):null,LQ("div",{className:"bottom-app-bar-quaternary",children:LQ("div",{className:"form-section",children:LQ("div",{className:"btn-group",children:[LQ("button",{type:"button",className:"btn",title:"Reset camera",onClick:function(){_.current.module("orbitControlsModule").orbitControls.reset()},children:[LQ(D0,{component:kT}),LQ("span",{className:"sr-only",children:"Reset camera"})]}),LQ("button",{type:"button",className:"btn site-theater-mode-toggle-btn",title:p?"":"Theater mode",onClick:function(){v(!p)},children:[LQ("div",{className:"site-theater-mode-toggle-btn-overlay"}),LQ(D0,{component:CT}),LQ("span",{className:"sr-only",children:p?"Exit theater mode":"Theater mode"})]}),document.fullscreenEnabled?LQ("button",{type:"button",className:"btn site-fullscreen-toggle-btn",title:g?"Exit fullscreen":"Fullscreen",onClick:function(){if(g)document.exitFullscreen&&document.exitFullscreen();else{var e=document.documentElement;e.requestFullscreen&&e.requestFullscreen()}},children:[LQ(D0,{component:g?ET:AT}),LQ("span",{className:"sr-only",children:g?"Exit fullscreen":"Fullscreen"})]}):null]})})})]})]})]}),LQ(t1,{id:w,open:n,children:LQ(_1,{disabled:!n,children:LQ("section",{className:"drawer-layout focusable-wrap","aria-label":"Side panel",children:[LQ("div",{className:"drawer-header",children:LQ("div",{className:"drawer-header-layout",children:[LQ("div",{className:"drawer-header-left",children:LQ("button",{type:"button",className:"btn btn-link",onClick:function(){l(!u)},children:[LQ(D0,{component:u?ST:wT}),LQ("span",{className:"btn-text","aria-hidden":"true",children:"Menu"}),LQ("span",{className:"sr-only",children:u?"Close menu":"Open menu"})]})}),LQ("div",{className:"drawer-header-right",children:LQ(t1.Button,{className:"btn btn-link",open:n,onClick:function(){r(!1)},"aria-controls":w,children:[LQ(D0,{component:TT}),LQ("span",{className:"sr-only",children:"Hide side panel"})]})})]})}),LQ("div",{className:"drawer-body",children:[LQ("section",{className:u?"panel":"hidden",children:LQ("div",{className:"panel-nav",children:[LQ("h2",{className:"sr-only",children:"Menu"}),LQ("ul",{className:"nav",children:H3.map((function(e){var t=e.key,n=e.displayName;return LQ("li",{className:"nav-item"+(f===t?" active":""),children:LQ("button",{type:"button",className:"link",onClick:function(){!function(e){h(e),l(!1)}(t)},children:n})},t)}))})]})}),u?null:f===B3.EDIT?LQ(Z_,{children:[LQ(b1,{title:"Flag",children:LQ(Y1,{})}),LQ(b1,{title:"Wind",children:LQ(C3,{})}),LQ(b1,{title:"Scenery",children:LQ(L2,{})}),LQ(b1,{title:"Actions",children:LQ(w1,{})})]}):f===B3.ANIMATE?LQ(b1,{title:"Animation control",children:LQ(C1,{})}):f===B3.CAMERA?LQ(b1,{title:"Camera control",children:LQ(X0,{})}):f===B3.ABOUT?LQ(b1,{title:LQ(Z_,{children:["FlagWaver",LQ("small",{children:"3.0.0"})]}),children:LQ(OQ,{})}):null]})]})})}),LQ(S3,{})]})},function(e){if(!window.WebGLRenderingContext)return kQ(),LQ(k3,{children:[LQ("h2",{children:"Your browser or device does not support WebGL"}),LQ("p",{children:"This site requires a browser that supports WebGL."}),LQ("p",{children:LQ("a",{href:"http://get.webgl.org/",rel:"noopener",target:"_blank",children:"More information"})})]});var t=document.createElement("canvas");return t.getContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))?/Trident\/|MSIE/.test(window.navigator.userAgent)?(kQ(),LQ(k3,{children:[LQ("h2",{children:"Your browser is not supported"}),LQ("p",{children:"Please upgrade your browser to use FlagWaver."})]})):LQ(j3,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P3(Object(n),!0).forEach((function(t){EE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)):(kQ(),LQ(k3,{children:[LQ("h2",{children:"WebGL could not be initialized"}),LQ("p",{children:"Your browser supports WebGL but has encountered another problem."}),LQ("p",{children:LQ("a",{href:"http://get.webgl.org/troubleshooting",rel:"noopener",target:"_blank",children:"More information"})})]}))}),V3=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function W3(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}Ox(LQ(DS,{store:z3,children:LQ(G3,{})}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("https://krikienoid.github.io/flagwaver",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("https://krikienoid.github.io/flagwaver","/service-worker.js");V3?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):W3(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):W3(e)}))}}()}();